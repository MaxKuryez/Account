/*! For license information please see main.f6e8891e.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var u in n)r.call(n,u)&&n[u]&&e.push(u);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},176:function(e){"use strict";e.exports=function(e,t,n,r,i,a,o,u){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,u],l=0;(s=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case E:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){$(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ie=null;function Ee(e){if(e=mi(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=gi(t),xe(e.stateNode,e.type,t))}}function Se(e){_e?Ie?Ie.push(e):Ie=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ie;if(Ie=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==_e||null!==Ie)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=gi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var gt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,xt,_t,It,Et=!1,St=[],Tt=null,Ct=null,Nt=null,At=new Map,Rt=new Map,Pt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=mi(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void It(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ht(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=mi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function jt(){Et=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==Nt&&Ft(Nt)&&(Nt=null),At.forEach(Ut),Rt.forEach(Ut)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Bt(e){function t(t){return Vt(t,e)}if(0<St.length){Vt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Vt(Tt,e),null!==Ct&&Vt(Ct,e),null!==Nt&&Vt(Nt,e),At.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var zt=b.ReactCurrentBatchConfig;function qt(e,t,n,r){var i=gt,a=zt.transition;zt.transition=null;try{gt=1,Gt(e,t,n,r)}finally{gt=i,zt.transition=a}}function Kt(e,t,n,r){var i=gt,a=zt.transition;zt.transition=null;try{gt=4,Gt(e,t,n,r)}finally{gt=i,zt.transition=a}}function Gt(e,t,n,r){var i=Ht(e,t,n,r);if(null===i)zr(e,t,r,Wt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,i),!0;case"dragenter":return Ct=Lt(Ct,e,t,n,r,i),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Lt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Lt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=mi(i);if(null!==a&&bt(a),null===(a=Ht(e,t,n,r))&&zr(e,t,r,Wt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else zr(e,t,r,null,n)}var Wt=null;function Ht(e,t,n,r){if(Wt=null,null!==(e=vi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,$t=null;function Jt(){if($t)return $t;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function Zt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function en(){return!0}function tn(){return!1}function nn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?en:tn,this.isPropagationStopped=tn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=en)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=en)},persist:function(){},isPersistent:en}),t}var rn,an,on,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sn=nn(un),cn=F({},un,{view:0,detail:0}),ln=nn(cn),fn=F({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(rn=e.screenX-on.screenX,an=e.screenY-on.screenY):an=rn=0,on=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),hn=nn(fn),dn=nn(F({},fn,{dataTransfer:0})),pn=nn(F({},cn,{relatedTarget:0})),vn=nn(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),mn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=nn(mn),gn=nn(F({},un,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function _n(){return xn}var In=F({},cn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Zt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?Zt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Zt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=nn(In),Sn=nn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=nn(F({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),Cn=nn(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=nn(Nn),Rn=[9,13,27,32],Pn=l&&"CompositionEvent"in window,Dn=null;l&&"documentMode"in document&&(Dn=document.documentMode);var On=l&&"TextEvent"in window&&!Dn,Ln=l&&(!Pn||Dn&&8<Dn&&11>=Dn),Mn=String.fromCharCode(32),Fn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function qn(e,t,n,r){Se(r),0<(t=Kr(t,"onChange")).length&&(n=new sn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Wn(e){Mr(e,0)}function Hn(e){if(H(yi(e)))return e}function Qn(e,t){if("change"===e)return t}var Yn=!1;if(l){var Xn;if(l){var $n="oninput"in document;if(!$n){var Jn=document.createElement("div");Jn.setAttribute("oninput","return;"),$n="function"===typeof Jn.oninput}Xn=$n}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function Zn(){Kn&&(Kn.detachEvent("onpropertychange",er),Gn=Kn=null)}function er(e){if("value"===e.propertyName&&Hn(Gn)){var t=[];qn(t,Gn,e,we(e)),Re(Wn,t)}}function tr(e,t,n){"focusin"===e?(Zn(),Gn=n,(Kn=t).attachEvent("onpropertychange",er)):"focusout"===e&&Zn()}function nr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Hn(Gn)}function rr(e,t){if("click"===e)return Hn(t)}function ir(e,t){if("input"===e||"change"===e)return Hn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function cr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?cr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function lr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=lr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=sr(n,a);var o=sr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dr=l&&"documentMode"in document&&11>=document.documentMode,pr=null,vr=null,mr=null,yr=!1;function gr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==pr||pr!==Q(r)||("selectionStart"in(r=pr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},mr&&or(mr,r)||(mr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new sn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},wr={},xr={};function _r(e){if(wr[e])return wr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return wr[e]=n[t];return e}l&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Ir=_r("animationend"),Er=_r("animationiteration"),Sr=_r("animationstart"),Tr=_r("transitionend"),Cr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Cr.set(e,t),s(t,[e])}for(var Rr=0;Rr<Nr.length;Rr++){var Pr=Nr[Rr];Ar(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Ar(Ir,"onAnimationEnd"),Ar(Er,"onAnimationIteration"),Ar(Sr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Lr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Lr(i,u,c),a=s}}}if(Ue)throw e=je,Ue=!1,je=null,e}function Fr(e,t){var n=t[hi];void 0===n&&(n=t[hi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Ur("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Qt(t)){case 1:var i=qt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=vi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var u=Cr.get(e);if(void 0!==u){var s=sn,c=e;switch(e){case"keypress":if(0===Zt(n))break e;case"keydown":case"keyup":s=En;break;case"focusin":c="focus",s=pn;break;case"focusout":c="blur",s=pn;break;case"beforeblur":case"afterblur":s=pn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Tn;break;case Ir:case Er:case Sr:s=vn;break;case Tr:s=Cn;break;case"scroll":s=ln;break;case"wheel":s=An;break;case"copy":case"cut":case"paste":s=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Sn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(qr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[fi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=hn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Sn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:yi(s),d=null==c?u:yi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,vi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==s&&Wr(o,u,s,l,!1),null!==c&&null!==f&&Wr(o,f,c,l,!0)}if("select"===(s=(u=r?yi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Qn;else if(zn(u))if(Yn)m=ir;else{m=nr;var y=tr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=rr);switch(m&&(m=m(e,r))?qn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?yi(r):window,e){case"focusin":(zn(y)||"true"===y.contentEditable)&&(pr=y,vr=r,mr=null);break;case"focusout":mr=vr=pr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,gr(o,n,i);break;case"selectionchange":if(dr)break;case"keydown":case"keyup":gr(o,n,i)}var g;if(Pn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Vn?Un(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Ln&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Vn&&(g=Jt()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,Vn=!0)),0<(y=Kr(r,k)).length&&(k=new gn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=jn(n))&&(k.data=g))),(g=On?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Mn);case"textInput":return(e=t.data)===Mn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Pn&&Un(e,t)?(e=Jt(),$t=Xt=Yt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new gn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Mr(o,t)}))}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(qr(e,a,i)),null!=(a=Pe(e,t))&&r.push(qr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Wr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(qr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(qr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Hr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Hr,"\n").replace(Qr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function $r(){}var Jr=null;function Zr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ei="function"===typeof setTimeout?setTimeout:void 0,ti="function"===typeof clearTimeout?clearTimeout:void 0,ni="function"===typeof Promise?Promise:void 0,ri="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ni?function(e){return ni.resolve(null).then(e).catch(ii)}:ei;function ii(e){setTimeout((function(){throw e}))}function ai(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function oi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var si=Math.random().toString(36).slice(2),ci="__reactFiber$"+si,li="__reactProps$"+si,fi="__reactContainer$"+si,hi="__reactEvents$"+si,di="__reactListeners$"+si,pi="__reactHandles$"+si;function vi(e){var t=e[ci];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[ci]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[ci])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function mi(e){return!(e=e[ci]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function gi(e){return e[li]||null}var ki=[],bi=-1;function wi(e){return{current:e}}function xi(e){0>bi||(e.current=ki[bi],ki[bi]=null,bi--)}function _i(e,t){bi++,ki[bi]=e.current,e.current=t}var Ii={},Ei=wi(Ii),Si=wi(!1),Ti=Ii;function Ci(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ni(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ai(){xi(Si),xi(Ei)}function Ri(e,t,n){if(Ei.current!==Ii)throw Error(a(168));_i(Ei,t),_i(Si,n)}function Pi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ti=Ei.current,_i(Ei,e),_i(Si,Si.current),!0}function Oi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Pi(e,t,Ti),r.__reactInternalMemoizedMergedChildContext=e,xi(Si),xi(Ei),_i(Ei,e)):xi(Si),_i(Si,n)}var Li=null,Mi=!1,Fi=!1;function Ui(e){null===Li?Li=[e]:Li.push(e)}function ji(){if(!Fi&&null!==Li){Fi=!0;var e=0,t=gt;try{var n=Li;for(gt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Li=null,Mi=!1}catch(i){throw null!==Li&&(Li=Li.slice(e+1)),He(Ze,ji),i}finally{gt=t,Fi=!1}}return null}var Vi=b.ReactCurrentBatchConfig;function Bi(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var zi=wi(null),qi=null,Ki=null,Gi=null;function Wi(){Gi=Ki=qi=null}function Hi(e){var t=zi.current;xi(zi),e._currentValue=t}function Qi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Yi(e,t){qi=e,Gi=Ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yu=!0),e.firstContext=null)}function Xi(e){var t=e._currentValue;if(Gi!==e)if(e={context:e,memoizedValue:t,next:null},null===Ki){if(null===qi)throw Error(a(308));Ki=e,qi.dependencies={lanes:0,firstContext:e}}else Ki=Ki.next=e;return t}var $i=null,Ji=!1;function Zi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ea(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ta(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function na(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==gs&&0!==(1&e.mode)&&0===(2&ys)?(null===(e=n.interleaved)?(t.next=t,null===$i?$i=[n]:$i.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function ra(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function ia(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function aa(e,t,n,r){var i=e.updateQueue;Ji=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Ji=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Es|=o,e.lanes=o,e.memoizedState=f}}function oa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ua=(new r.Component).refs;function sa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ca={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=zs(),i=qs(e),a=ta(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),na(e,a),null!==(t=Ks(e,i,r))&&ra(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=zs(),i=qs(e),a=ta(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),na(e,a),null!==(t=Ks(e,i,r))&&ra(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=zs(),r=qs(e),i=ta(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),na(e,i),null!==(t=Ks(e,r,n))&&ra(t,e,r)}};function la(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!or(n,r)||!or(i,a))}function fa(e,t,n){var r=!1,i=Ii,a=t.contextType;return"object"===typeof a&&null!==a?a=Xi(a):(i=Ni(t)?Ti:Ei.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ci(e,i):Ii),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ca,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ca.enqueueReplaceState(t,t.state,null)}function da(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ua,Zi(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Xi(a):(a=Ni(t)?Ti:Ei.current,i.context=Ci(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(sa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ca.enqueueReplaceState(i,i.state,null),aa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var pa=[],va=0,ma=null,ya=0,ga=[],ka=0,ba=null,wa=1,xa="";function _a(e,t){pa[va++]=ya,pa[va++]=ma,ma=e,ya=t}function Ia(e,t,n){ga[ka++]=wa,ga[ka++]=xa,ga[ka++]=ba,ba=e;var r=wa;e=xa;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,wa=1<<32-ot(t)+i|n<<i|r,xa=a+e}else wa=1<<a|n<<i|r,xa=e}function Ea(e){null!==e.return&&(_a(e,1),Ia(e,1,0))}function Sa(e){for(;e===ma;)ma=pa[--va],pa[va]=null,ya=pa[--va],pa[va]=null;for(;e===ba;)ba=ga[--ka],ga[ka]=null,xa=ga[--ka],ga[ka]=null,wa=ga[--ka],ga[ka]=null}var Ta=null,Ca=null,Na=!1,Aa=null;function Ra(e,t){var n=bc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Pa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ta=e,Ca=oi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ta=e,Ca=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==ba?{id:wa,overflow:xa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=bc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ta=e,Ca=null,!0);default:return!1}}function Da(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Oa(e){if(Na){var t=Ca;if(t){var n=t;if(!Pa(e,t)){if(Da(e))throw Error(a(418));t=oi(n.nextSibling);var r=Ta;t&&Pa(e,t)?Ra(r,n):(e.flags=-4097&e.flags|2,Na=!1,Ta=e)}}else{if(Da(e))throw Error(a(418));e.flags=-4097&e.flags|2,Na=!1,Ta=e}}}function La(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ta=e}function Ma(e){if(e!==Ta)return!1;if(!Na)return La(e),Na=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Zr(e.type,e.memoizedProps)),t&&(t=Ca)){if(Da(e)){for(e=Ca;e;)e=oi(e.nextSibling);throw Error(a(418))}for(;t;)Ra(e,t),t=oi(t.nextSibling)}if(La(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ca=oi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ca=null}}else Ca=Ta?oi(e.stateNode.nextSibling):null;return!0}function Fa(){Ca=Ta=null,Na=!1}function Ua(e){null===Aa?Aa=[e]:Aa.push(e)}function ja(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Va(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ba(e){return(0,e._init)(e._payload)}function za(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=xc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Sc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Ba(a)===t.type)?((r=i(t,n.props)).ref=ja(e,t,n),r.return=e,r):((r=_c(n.type,n.key,n.props,null,e.mode,r)).ref=ja(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Tc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Ic(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Sc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=_c(t.type,t.key,t.props,null,e.mode,n)).ref=ja(e,null,t),n.return=e,n;case x:return(t=Tc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ic(t,e.mode,n,null)).return=e,t;Va(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Va(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Va(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),Na&&_a(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return Na&&_a(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),Na&&_a(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),Na&&_a(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return Na&&_a(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),Na&&_a(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Ba(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=ja(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Ic(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=_c(o.type,o.key,o.props,null,r.mode,s)).ref=ja(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Tc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Va(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Sc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var qa=za(!0),Ka=za(!1),Ga={},Wa=wi(Ga),Ha=wi(Ga),Qa=wi(Ga);function Ya(e){if(e===Ga)throw Error(a(174));return e}function Xa(e,t){switch(_i(Qa,t),_i(Ha,e),_i(Wa,Ga),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(Wa),_i(Wa,t)}function $a(){xi(Wa),xi(Ha),xi(Qa)}function Ja(e){Ya(Qa.current);var t=Ya(Wa.current),n=se(t,e.type);t!==n&&(_i(Ha,e),_i(Wa,n))}function Za(e){Ha.current===e&&(xi(Wa),xi(Ha))}var eo=wi(0);function to(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var no=[];function ro(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var io=b.ReactCurrentDispatcher,ao=b.ReactCurrentBatchConfig,oo=0,uo=null,so=null,co=null,lo=!1,fo=!1,ho=0,po=0;function vo(){throw Error(a(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function yo(e,t,n,r,i,o){if(oo=o,uo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?Zo:eu,e=n(r,i),fo){o=0;do{if(fo=!1,ho=0,25<=o)throw Error(a(301));o+=1,co=so=null,t.updateQueue=null,io.current=tu,e=n(r,i)}while(fo)}if(io.current=Jo,t=null!==so&&null!==so.next,oo=0,co=so=uo=null,lo=!1,t)throw Error(a(300));return e}function go(){var e=0!==ho;return ho=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?uo.memoizedState=co=e:co=co.next=e,co}function bo(){if(null===so){var e=uo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===co?uo.memoizedState:co.next;if(null!==t)co=t,so=e;else{if(null===e)throw Error(a(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===co?uo.memoizedState=co=e:co=co.next=e}return co}function wo(e,t){return"function"===typeof t?t(e):t}function xo(e){var t=bo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=so,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((oo&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,uo.lanes|=f,Es|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ar(r,t.memoizedState)||(yu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,uo.lanes|=o,Es|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _o(e){var t=bo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ar(o,t.memoizedState)||(yu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Io(){}function Eo(e,t){var n=uo,r=bo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,yu=!0),r=r.queue,Mo(Co.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==co&&1&co.memoizedState.tag){if(n.flags|=2048,Ro(9,To.bind(null,n,r,i,t),void 0,null),null===gs)throw Error(a(349));0!==(30&oo)||So(n,t,i)}return i}function So(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function To(e,t,n,r){t.value=n,t.getSnapshot=r,No(t)&&Ks(e,1,-1)}function Co(e,t,n){return n((function(){No(t)&&Ks(e,1,-1)}))}function No(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ao(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Ho.bind(null,uo,e),[t.memoizedState,e]}function Ro(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Po(){return bo().memoizedState}function Do(e,t,n,r){var i=ko();uo.flags|=e,i.memoizedState=Ro(1|t,n,void 0,void 0===r?null:r)}function Oo(e,t,n,r){var i=bo();r=void 0===r?null:r;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Ro(t,n,a,r))}uo.flags|=e,i.memoizedState=Ro(1|t,n,a,r)}function Lo(e,t){return Do(8390656,8,e,t)}function Mo(e,t){return Oo(2048,8,e,t)}function Fo(e,t){return Oo(4,2,e,t)}function Uo(e,t){return Oo(4,4,e,t)}function jo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4,4,jo.bind(null,t,e),n)}function Bo(){}function zo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ko(e,t){var n=gt;gt=0!==n&&4>n?n:4,e(!0);var r=ao.transition;ao.transition={};try{e(!1),t()}finally{gt=n,ao.transition=r}}function Go(){return bo().memoizedState}function Wo(e,t,n){var r=qs(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e)?Yo(t,n):(Xo(e,t,n),null!==(e=Ks(e,r,n=zs()))&&$o(e,t,r))}function Ho(e,t,n){var r=qs(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Yo(t,i);else{Xo(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ar(u,o))return}catch(s){}null!==(e=Ks(e,r,n=zs()))&&$o(e,t,r)}}function Qo(e){var t=e.alternate;return e===uo||null!==t&&t===uo}function Yo(e,t){fo=lo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xo(e,t,n){null!==gs&&0!==(1&e.mode)&&0===(2&ys)?(null===(e=t.interleaved)?(n.next=n,null===$i?$i=[t]:$i.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function $o(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Jo={readContext:Xi,useCallback:vo,useContext:vo,useEffect:vo,useImperativeHandle:vo,useInsertionEffect:vo,useLayoutEffect:vo,useMemo:vo,useReducer:vo,useRef:vo,useState:vo,useDebugValue:vo,useDeferredValue:vo,useTransition:vo,useMutableSource:vo,useSyncExternalStore:vo,useId:vo,unstable_isNewReconciler:!1},Zo={readContext:Xi,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Xi,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4194308,4,jo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wo.bind(null,uo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Ao,useDebugValue:Bo,useDeferredValue:function(e){var t=Ao(e),n=t[0],r=t[1];return Lo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){var e=Ao(!1),t=e[0];return e=Ko.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=uo,i=ko();if(Na){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===gs)throw Error(a(349));0!==(30&oo)||So(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(Co.bind(null,r,o,e),[e]),r.flags|=2048,Ro(9,To.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=gs.identifierPrefix;if(Na){var n=xa;t=":"+t+"R"+(n=(wa&~(1<<32-ot(wa)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eu={readContext:Xi,useCallback:zo,useContext:Xi,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:Uo,useMemo:qo,useReducer:xo,useRef:Po,useState:function(){return xo(wo)},useDebugValue:Bo,useDeferredValue:function(e){var t=xo(wo),n=t[0],r=t[1];return Mo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){return[xo(wo)[0],bo().memoizedState]},useMutableSource:Io,useSyncExternalStore:Eo,useId:Go,unstable_isNewReconciler:!1},tu={readContext:Xi,useCallback:zo,useContext:Xi,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:Uo,useMemo:qo,useReducer:_o,useRef:Po,useState:function(){return _o(wo)},useDebugValue:Bo,useDeferredValue:function(e){var t=_o(wo),n=t[0],r=t[1];return Mo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){return[_o(wo)[0],bo().memoizedState]},useMutableSource:Io,useSyncExternalStore:Eo,useId:Go,unstable_isNewReconciler:!1};function nu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ru(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var iu,au,ou,uu="function"===typeof WeakMap?WeakMap:Map;function su(e,t,n){(n=ta(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ps||(Ps=!0,Ds=r),ru(0,t)},n}function cu(e,t,n){(n=ta(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ru(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ru(0,t),"function"!==typeof r&&(null===Os?Os=new Set([this]):Os.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function lu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new uu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=pc.bind(null,e,t,n),t.then(e,e))}function fu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function hu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ta(-1,1)).tag=2,na(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function du(e,t){if(!Na)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function pu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vu(e,t,n){var r=t.pendingProps;switch(Sa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pu(t),null;case 1:case 17:return Ni(t.type)&&Ai(),pu(t),null;case 3:return r=t.stateNode,$a(),xi(Si),xi(Ei),ro(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ma(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Aa&&(Ys(Aa),Aa=null))),pu(t),null;case 5:Za(t);var i=Ya(Qa.current);if(n=t.type,null!==e&&null!=t.stateNode)au(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return pu(t),null}if(e=Ya(Wa.current),Ma(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ci]=t,r[li]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Fr(Dr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":X(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Fr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ci]=t,e[li]=r,iu(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Fr(Dr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Fr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return pu(t),null;case 6:if(e&&null!=t.stateNode)ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ya(Qa.current),Ya(Wa.current),Ma(t)){if(r=t.stateNode,n=t.memoizedProps,r[ci]=t,(o=r.nodeValue!==n)&&null!==(e=Ta))switch(s=0!==(1&e.mode),e.tag){case 3:Xr(r.nodeValue,n,s);break;case 5:!0!==e.memoizedProps[void 0]&&Xr(r.nodeValue,n,s)}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ci]=t,t.stateNode=r}return pu(t),null;case 13:if(xi(eo),r=t.memoizedState,Na&&null!==Ca&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Ca;r;)r=oi(r.nextSibling);return Fa(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Ma(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[ci]=t}else Fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return pu(t),null}return null!==Aa&&(Ys(Aa),Aa=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Ma(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&eo.current)?0===_s&&(_s=3):ic())),null!==t.updateQueue&&(t.flags|=4),pu(t),null);case 4:return $a(),null===e&&Vr(t.stateNode.containerInfo),pu(t),null;case 10:return Hi(t.type._context),pu(t),null;case 19:if(xi(eo),null===(o=t.memoizedState))return pu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)du(o,!1);else{if(0!==_s||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=to(e))){for(t.flags|=128,du(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _i(eo,1&eo.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>Rs&&(t.flags|=128,r=!0,du(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=to(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),du(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Na)return pu(t),null}else 2*$e()-o.renderingStartTime>Rs&&1073741824!==n&&(t.flags|=128,r=!0,du(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=eo.current,_i(eo,r?1&n|2:1&n),t):(pu(t),null);case 22:case 23:return ec(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&ws)&&(pu(t),6&t.subtreeFlags&&(t.flags|=8192)):pu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}iu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},au=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ya(Wa.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Fr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var mu=b.ReactCurrentOwner,yu=!1;function gu(e,t,n,r){t.child=null===e?Ka(t,null,n,r):qa(t,e.child,n,r)}function ku(e,t,n,r,i){n=n.render;var a=t.ref;return Yi(t,i),r=yo(e,t,n,r,a,i),n=go(),null===e||yu?(Na&&n&&Ea(t),t.flags|=1,gu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ju(e,t,i))}function bu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||wc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=_c(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,wu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:or)(o,r)&&e.ref===t.ref)return ju(e,t,i)}return t.flags|=1,(e=xc(a,r)).ref=t.ref,e.return=t,t.child=e}function wu(e,t,n,r,i){if(null!==e&&or(e.memoizedProps,r)&&e.ref===t.ref){if(yu=!1,0===(e.lanes&i))return t.lanes=e.lanes,ju(e,t,i);0!==(131072&e.flags)&&(yu=!0)}return Iu(e,t,n,r,i)}function xu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},_i(xs,ws),ws|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,_i(xs,ws),ws|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,_i(xs,ws),ws|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_i(xs,ws),ws|=r;return gu(e,t,i,n),t.child}function _u(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Iu(e,t,n,r,i){var a=Ni(n)?Ti:Ei.current;return a=Ci(t,a),Yi(t,i),n=yo(e,t,n,r,a,i),r=go(),null===e||yu?(Na&&r&&Ea(t),t.flags|=1,gu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ju(e,t,i))}function Eu(e,t,n,r,i){if(Ni(n)){var a=!0;Di(t)}else a=!1;if(Yi(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),fa(t,n,r),da(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Xi(c):c=Ci(t,c=Ni(n)?Ti:Ei.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ha(t,o,r,c),Ji=!1;var h=t.memoizedState;o.state=h,aa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Si.current||Ji?("function"===typeof l&&(sa(t,n,l,r),s=t.memoizedState),(u=Ji||la(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ea(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Bi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Xi(s):s=Ci(t,s=Ni(n)?Ti:Ei.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&ha(t,o,r,s),Ji=!1,h=t.memoizedState,o.state=h,aa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Si.current||Ji?("function"===typeof d&&(sa(t,n,d,r),p=t.memoizedState),(c=Ji||la(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Su(e,t,n,r,a,i)}function Su(e,t,n,r,i,a){_u(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Oi(t,n,!1),ju(e,t,a);r=t.stateNode,mu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=qa(t,e.child,null,a),t.child=qa(t,null,u,a)):gu(e,t,u,a),t.memoizedState=r.state,i&&Oi(t,n,!0),t.child}function Tu(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),Xa(e,t.containerInfo)}function Cu(e,t,n,r,i){return Fa(),Ua(i),t.flags|=256,gu(e,t,n,r),t.child}var Nu={dehydrated:null,treeContext:null,retryLane:0};function Au(e){return{baseLanes:e,cachePool:null}}function Ru(e,t,n){var r,i=t.pendingProps,o=eo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),_i(eo,1&o),null===e)return Oa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=Ec(o,i,0,null),e=Ic(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Au(n),t.memoizedState=Nu,e):Pu(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,Lu(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=Ec({mode:"visible",children:i.children},o,0,null),(u=Ic(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&qa(t,e.child,null,n),t.child.memoizedState=Au(n),t.memoizedState=Nu,u);if(0===(1&t.mode))t=Lu(e,t,n,null);else if("$!"===r.data)t=Lu(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),yu||i){if(null!==(i=gs)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Ks(e,i,-1))}ic(),t=Lu(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=mc.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Ca=oi(r.nextSibling),Ta=t,Na=!0,Aa=null,null!==n&&(ga[ka++]=wa,ga[ka++]=xa,ga[ka++]=ba,wa=n.id,xa=n.overflow,ba=t),(t=Pu(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=Ou(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Au(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=Nu,i):(n=Du(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=Ou(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Au(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=Nu,i):(n=Du(e,t,i.children,n),t.memoizedState=null,n)}function Pu(e,t){return(t=Ec({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Du(e,t,n,r){var i=e.child;return e=i.sibling,n=xc(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Ou(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=xc(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=xc(o,r):(r=Ic(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Lu(e,t,n,r){return null!==r&&Ua(r),qa(t,e.child,null,n),(e=Pu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Mu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Qi(e.return,t,n)}function Fu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Uu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(gu(e,t,r.children,n),0!==(2&(r=eo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Mu(e,n,t);else if(19===e.tag)Mu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_i(eo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===to(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Fu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===to(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Fu(t,!0,n,null,a);break;case"together":Fu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ju(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Es|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=xc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=xc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vu(e,t){switch(Sa(t),t.tag){case 1:return Ni(t.type)&&Ai(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $a(),xi(Si),xi(Ei),ro(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(xi(eo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(eo),null;case 4:return $a(),null;case 10:return Hi(t.type._context),null;case 22:case 23:return ec(),null;default:return null}}var Bu=!1,zu=!1,qu="function"===typeof WeakSet?WeakSet:Set,Ku=null;function Gu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){dc(e,t,r)}else n.current=null}function Wu(e,t,n){try{n()}catch(r){dc(e,t,r)}}var Hu=!1;function Qu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Wu(t,n,a)}i=i.next}while(i!==r)}}function Yu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Xu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function $u(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&Wu(t,n,a),r=r.next}while(r!==e)}break;case 1:if(Gu(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){dc(t,n,o)}break;case 5:Gu(t,n);break;case 4:is(e,t,n)}}function Ju(e){var t=e.alternate;null!==t&&(e.alternate=null,Ju(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ci],delete t[li],delete t[hi],delete t[di],delete t[pi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zu(e){return 5===e.tag||3===e.tag||4===e.tag}function es(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Zu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ts(e){e:{for(var t=e.return;null!==t;){if(Zu(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(he(t,""),n.flags&=-33),rs(e,n=es(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,ns(e,n=es(e),t);break;default:throw Error(a(161))}}function ns(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ns(e,t,n),e=e.sibling;null!==e;)ns(e,t,n),e=e.sibling}function rs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(rs(e,t,n),e=e.sibling;null!==e;)rs(e,t,n),e=e.sibling}function is(e,t,n){for(var r,i,o=t,u=!1;;){if(!u){u=o.return;e:for(;;){if(null===u)throw Error(a(160));switch(r=u.stateNode,u.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}u=u.return}u=!0}if(5===o.tag||6===o.tag){e:for(var s=e,c=o,l=n,f=c;;)if($u(s,f,l),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break e;for(;null===f.sibling;){if(null===f.return||f.return===c)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(s=r,c=o.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):r.removeChild(o.stateNode)}else if(18===o.tag)i?(s=r,c=o.stateNode,8===s.nodeType?ai(s.parentNode,c):1===s.nodeType&&ai(s,c),Bt(s)):ai(r,o.stateNode);else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if($u(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(u=!1)}o.sibling.return=o.return,o=o.sibling}}function as(e,t){switch(t.tag){case 0:case 11:case 14:case 15:return Qu(3,t,t.return),Yu(3,t),void Qu(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for("input"===e&&"radio"===r.type&&null!=r.name&&$(n,r),ke(e,i),t=ke(e,r),i=0;i<o.length;i+=2){var u=o[i],s=o[i+1];"style"===u?me(n,s):"dangerouslySetInnerHTML"===u?fe(n,s):"children"===u?he(n,s):k(n,u,s,t)}switch(e){case"input":J(n,r);break;case"textarea":ae(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ne(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ne(n,!!r.multiple,r.defaultValue,!0):ne(n,!!r.multiple,r.multiple?[]:"",!1))}n[li]=r}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void(null!==e&&e.memoizedState.isDehydrated&&Bt(t.stateNode.containerInfo));case 13:case 19:return void os(t)}throw Error(a(163))}function os(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new qu),t.forEach((function(t){var r=yc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function us(e,t,n){Ku=e,ss(e,t,n)}function ss(e,t,n){for(var r=0!==(1&e.mode);null!==Ku;){var i=Ku,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Bu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||zu;u=Bu;var c=zu;if(Bu=o,(zu=s)&&!c)for(Ku=i;null!==Ku;)s=(o=Ku).child,22===o.tag&&null!==o.memoizedState?fs(i):null!==s?(s.return=o,Ku=s):fs(i);for(;null!==a;)Ku=a,ss(a,t,n),a=a.sibling;Ku=i,Bu=u,zu=c}cs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ku=a):cs(e)}}function cs(e){for(;null!==Ku;){var t=Ku;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:zu||Yu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!zu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Bi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&oa(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}oa(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}zu||512&t.flags&&Xu(t)}catch(d){dc(t,t.return,d)}}if(t===e){Ku=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ku=n;break}Ku=t.return}}function ls(e){for(;null!==Ku;){var t=Ku;if(t===e){Ku=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ku=n;break}Ku=t.return}}function fs(e){for(;null!==Ku;){var t=Ku;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Yu(4,t)}catch(s){dc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){dc(t,i,s)}}var a=t.return;try{Xu(t)}catch(s){dc(t,a,s)}break;case 5:var o=t.return;try{Xu(t)}catch(s){dc(t,o,s)}}}catch(s){dc(t,t.return,s)}if(t===e){Ku=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Ku=u;break}Ku=t.return}}var hs,ds=Math.ceil,ps=b.ReactCurrentDispatcher,vs=b.ReactCurrentOwner,ms=b.ReactCurrentBatchConfig,ys=0,gs=null,ks=null,bs=0,ws=0,xs=wi(0),_s=0,Is=null,Es=0,Ss=0,Ts=0,Cs=null,Ns=null,As=0,Rs=1/0,Ps=!1,Ds=null,Os=null,Ls=!1,Ms=null,Fs=0,Us=0,js=null,Vs=-1,Bs=0;function zs(){return 0!==(6&ys)?$e():-1!==Vs?Vs:Vs=$e()}function qs(e){return 0===(1&e.mode)?1:0!==(2&ys)&&0!==bs?bs&-bs:null!==Vi.transition?(0===Bs&&(e=ct,0===(4194240&(ct<<=1))&&(ct=64),Bs=e),Bs):0!==(e=gt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function Ks(e,t,n){if(50<Us)throw Us=0,js=null,Error(a(185));var r=Gs(e,t);return null===r?null:(mt(r,t,n),0!==(2&ys)&&r===gs||(r===gs&&(0===(2&ys)&&(Ss|=t),4===_s&&Xs(r,bs)),Ws(r,n),1===t&&0===ys&&0===(1&e.mode)&&(Rs=$e()+500,Mi&&ji())),r)}function Gs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Ws(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===gs?bs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Mi=!0,Ui(e)}($s.bind(null,e)):Ui($s.bind(null,e)),ri((function(){0===ys&&ji()})),n=null;else{switch(kt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=gc(n,Hs.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Hs(e,t){if(Vs=-1,Bs=0,0!==(6&ys))throw Error(a(327));var n=e.callbackNode;if(fc()&&e.callbackNode!==n)return null;var r=ht(e,e===gs?bs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ac(e,r);else{t=r;var i=ys;ys|=2;var o=rc();for(gs===e&&bs===t||(Rs=$e()+500,tc(e,t));;)try{uc();break}catch(s){nc(e,s)}Wi(),ps.current=o,ys=i,null!==ks?t=0:(gs=null,bs=0,t=_s)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=Qs(e,i))),1===t)throw n=Is,tc(e,0),Xs(e,r),Ws(e,$e()),n;if(6===t)Xs(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ar(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ac(e,r))&&(0!==(o=pt(e))&&(r=o,t=Qs(e,o))),1===t))throw n=Is,tc(e,0),Xs(e,r),Ws(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:lc(e,Ns);break;case 3:if(Xs(e,r),(130023424&r)===r&&10<(t=As+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){zs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ei(lc.bind(null,e,Ns),t);break}lc(e,Ns);break;case 4:if(Xs(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ds(r/1960))-r)){e.timeoutHandle=ei(lc.bind(null,e,Ns),r);break}lc(e,Ns);break;default:throw Error(a(329))}}}return Ws(e,$e()),e.callbackNode===n?Hs.bind(null,e):null}function Qs(e,t){var n=Cs;return e.current.memoizedState.isDehydrated&&(tc(e,t).flags|=256),2!==(e=ac(e,t))&&(t=Ns,Ns=n,null!==t&&Ys(t)),e}function Ys(e){null===Ns?Ns=e:Ns.push.apply(Ns,e)}function Xs(e,t){for(t&=~Ts,t&=~Ss,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function $s(e){if(0!==(6&ys))throw Error(a(327));fc();var t=ht(e,0);if(0===(1&t))return Ws(e,$e()),null;var n=ac(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=Qs(e,r))}if(1===n)throw n=Is,tc(e,0),Xs(e,t),Ws(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lc(e,Ns),Ws(e,$e()),null}function Js(e,t){var n=ys;ys|=1;try{return e(t)}finally{0===(ys=n)&&(Rs=$e()+500,Mi&&ji())}}function Zs(e){null!==Ms&&0===Ms.tag&&0===(6&ys)&&fc();var t=ys;ys|=1;var n=ms.transition,r=gt;try{if(ms.transition=null,gt=1,e)return e()}finally{gt=r,ms.transition=n,0===(6&(ys=t))&&ji()}}function ec(){ws=xs.current,xi(xs)}function tc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ti(n)),null!==ks)for(n=ks.return;null!==n;){var r=n;switch(Sa(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ai();break;case 3:$a(),xi(Si),xi(Ei),ro();break;case 5:Za(r);break;case 4:$a();break;case 13:case 19:xi(eo);break;case 10:Hi(r.type._context);break;case 22:case 23:ec()}n=n.return}if(gs=e,ks=e=xc(e.current,null),bs=ws=t,_s=0,Is=null,Ts=Ss=Es=0,Ns=Cs=null,null!==$i){for(t=0;t<$i.length;t++)if(null!==(r=(n=$i[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}$i=null}return e}function nc(e,t){for(;;){var n=ks;try{if(Wi(),io.current=Jo,lo){for(var r=uo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}lo=!1}if(oo=0,co=so=uo=null,fo=!1,ho=0,vs.current=null,null===n||null===n.return){_s=1,Is=t,ks=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=bs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=fu(u);if(null!==p){p.flags&=-257,hu(p,u,s,0,t),1&p.mode&&lu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){lu(o,l,t),ic();break e}c=Error(a(426))}else if(Na&&1&s.mode){var y=fu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),hu(y,u,s,0,t),Ua(c);break e}}o=c,4!==_s&&(_s=2),null===Cs?Cs=[o]:Cs.push(o),c=nu(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ia(s,su(0,c,t));break e;case 1:o=c;var g=s.type,k=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Os||!Os.has(k)))){s.flags|=65536,t&=-t,s.lanes|=t,ia(s,cu(s,o,t));break e}}s=s.return}while(null!==s)}cc(n)}catch(b){t=b,ks===n&&null!==n&&(ks=n=n.return);continue}break}}function rc(){var e=ps.current;return ps.current=Jo,null===e?Jo:e}function ic(){0!==_s&&3!==_s&&2!==_s||(_s=4),null===gs||0===(268435455&Es)&&0===(268435455&Ss)||Xs(gs,bs)}function ac(e,t){var n=ys;ys|=2;var r=rc();for(gs===e&&bs===t||tc(e,t);;)try{oc();break}catch(i){nc(e,i)}if(Wi(),ys=n,ps.current=r,null!==ks)throw Error(a(261));return gs=null,bs=0,_s}function oc(){for(;null!==ks;)sc(ks)}function uc(){for(;null!==ks&&!Ye();)sc(ks)}function sc(e){var t=hs(e.alternate,e,ws);e.memoizedProps=e.pendingProps,null===t?cc(e):ks=t,vs.current=null}function cc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=vu(n,t,ws)))return void(ks=n)}else{if(null!==(n=Vu(n,t)))return n.flags&=32767,void(ks=n);if(null===e)return _s=6,void(ks=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(ks=t);ks=t=e}while(null!==t);0===_s&&(_s=5)}function lc(e,t){var n=gt,r=ms.transition;try{ms.transition=null,gt=1,function(e,t,n){do{fc()}while(null!==Ms);if(0!==(6&ys))throw Error(a(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===gs&&(ks=gs=null,bs=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Ls||(Ls=!0,gc(tt,(function(){return fc(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=ms.transition,ms.transition=null;var u=gt;gt=1;var s=ys;ys|=4,vs.current=null,function(e,t){if(fr(e=lr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jr={focusedElem:e,selectionRange:n},Ku=t;null!==Ku;)if(e=(t=Ku).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ku=e;else for(;null!==Ku;){t=Ku;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:Bi(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;if(1===b.nodeType)b.textContent="";else if(9===b.nodeType){var w=b.body;null!=w&&(w.textContent="")}break;default:throw Error(a(163))}}catch(x){dc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Ku=e;break}Ku=t.return}v=Hu,Hu=!1}(e,r),function(e,t){for(Ku=t;null!==Ku;){var n=(t=Ku).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{is(e,i,t);var a=i.alternate;null!==a&&(a.return=null),i.return=null}catch(I){dc(i,t,I)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,Ku=n;else for(;null!==Ku;){t=Ku;try{var o=t.flags;if(32&o&&he(t.stateNode,""),512&o){var u=t.alternate;if(null!==u){var s=u.ref;null!==s&&("function"===typeof s?s(null):s.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;null!==c&&null!==c.memoizedState||(As=$e())}break;case 22:var l=null!==t.memoizedState,f=t.alternate,h=null!==f&&null!==f.memoizedState;e:{i=l;for(var d=null,p=r=n=t;;){if(5===p.tag){if(null===d){d=p;var v=p.stateNode;if(i){var m=v.style;"function"===typeof m.setProperty?m.setProperty("display","none","important"):m.display="none"}else{var y=p.stateNode,g=p.memoizedProps.style,k=void 0!==g&&null!==g&&g.hasOwnProperty("display")?g.display:null;y.style.display=ve("display",k)}}}else if(6===p.tag)null===d&&(p.stateNode.nodeValue=i?"":p.memoizedProps);else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}if(l&&!h&&0!==(1&n.mode)){Ku=n;for(var b=n.child;null!==b;){for(n=Ku=b;null!==Ku;){var w=(r=Ku).child;switch(r.tag){case 0:case 11:case 14:case 15:Qu(4,r,r.return);break;case 1:Gu(r,r.return);var x=r.stateNode;if("function"===typeof x.componentWillUnmount){var _=r.return;try{x.props=r.memoizedProps,x.state=r.memoizedState,x.componentWillUnmount()}catch(I){dc(r,_,I)}}break;case 5:Gu(r,r.return);break;case 22:if(null!==r.memoizedState){ls(n);continue}}null!==w?(w.return=r,Ku=w):ls(n)}b=b.sibling}}}switch(4102&o){case 2:ts(t),t.flags&=-3;break;case 6:ts(t),t.flags&=-3,as(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,as(t.alternate,t);break;case 4:as(t.alternate,t)}}catch(I){dc(t,t.return,I)}if(null!==(n=t.sibling)){n.return=t.return,Ku=n;break}Ku=t.return}}}(e,r),hr(Jr),Jr=null,e.current=r,us(r,e,i),Xe(),ys=s,gt=u,ms.transition=o}else e.current=r;if(Ls&&(Ls=!1,Ms=e,Fs=i),0===(o=e.pendingLanes)&&(Os=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),Ws(e,$e()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(Ps)throw Ps=!1,e=Ds,Ds=null,e;0!==(1&Fs)&&0!==e.tag&&fc(),0!==(1&(o=e.pendingLanes))?e===js?Us++:(Us=0,js=e):Us=0,ji()}(e,t,n)}finally{ms.transition=r,gt=n}return null}function fc(){if(null!==Ms){var e=kt(Fs),t=ms.transition,n=gt;try{if(ms.transition=null,gt=16>e?16:e,null===Ms)var r=!1;else{if(e=Ms,Ms=null,Fs=0,0!==(6&ys))throw Error(a(331));var i=ys;for(ys|=4,Ku=e.current;null!==Ku;){var o=Ku,u=o.child;if(0!==(16&Ku.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Ku=l;null!==Ku;){var f=Ku;switch(f.tag){case 0:case 11:case 15:Qu(8,f,o)}var h=f.child;if(null!==h)h.return=f,Ku=h;else for(;null!==Ku;){var d=(f=Ku).sibling,p=f.return;if(Ju(f),f===l){Ku=null;break}if(null!==d){d.return=p,Ku=d;break}Ku=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Ku=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Ku=u;else e:for(;null!==Ku;){if(0!==(2048&(o=Ku).flags))switch(o.tag){case 0:case 11:case 15:Qu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Ku=g;break e}Ku=o.return}}var k=e.current;for(Ku=k;null!==Ku;){var b=(u=Ku).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Ku=b;else e:for(u=k;null!==Ku;){if(0!==(2048&(s=Ku).flags))try{switch(s.tag){case 0:case 11:case 15:Yu(9,s)}}catch(x){dc(s,s.return,x)}if(s===u){Ku=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Ku=w;break e}Ku=s.return}}if(ys=i,ji(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{gt=n,ms.transition=t}}return!1}function hc(e,t,n){na(e,t=su(0,t=nu(n,t),1)),t=zs(),null!==(e=Gs(e,1))&&(mt(e,1,t),Ws(e,t))}function dc(e,t,n){if(3===e.tag)hc(e,e,n);else for(;null!==t;){if(3===t.tag){hc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Os||!Os.has(r))){na(t,e=cu(t,e=nu(n,e),1)),e=zs(),null!==(t=Gs(t,1))&&(mt(t,1,e),Ws(t,e));break}}t=t.return}}function pc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=zs(),e.pingedLanes|=e.suspendedLanes&n,gs===e&&(bs&n)===n&&(4===_s||3===_s&&(130023424&bs)===bs&&500>$e()-As?tc(e,0):Ts|=n),Ws(e,t)}function vc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=zs();null!==(e=Gs(e,t))&&(mt(e,t,n),Ws(e,n))}function mc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),vc(e,n)}function yc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),vc(e,n)}function gc(e,t){return He(e,t)}function kc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bc(e,t,n,r){return new kc(e,t,n,r)}function wc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function xc(e,t){var n=e.alternate;return null===n?((n=bc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _c(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)wc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Ic(n.children,i,o,t);case I:u=8,i|=8;break;case E:return(e=bc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=bc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=bc(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Ec(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case R:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=bc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ic(e,t,n,r){return(e=bc(7,e,r,t)).lanes=n,e}function Ec(e,t,n,r){return(e=bc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={},e}function Sc(e,t,n){return(e=bc(6,e,null,t)).lanes=n,e}function Tc(e,t,n){return(t=bc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Cc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nc(e,t,n,r,i,a,o,u,s){return e=new Cc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=bc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},Zi(a),e}function Ac(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Rc(e){if(!e)return Ii;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ni(n))return Pi(e,n,t)}return t}function Pc(e,t,n,r,i,a,o,u,s){return(e=Nc(n,r,!0,e,0,a,0,u,s)).context=Rc(null),n=e.current,(a=ta(r=zs(),i=qs(n))).callback=void 0!==t&&null!==t?t:null,na(n,a),e.current.lanes=i,mt(e,i,r),Ws(e,r),e}function Dc(e,t,n,r){var i=t.current,a=zs(),o=qs(i);return n=Rc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ta(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),na(i,t),null!==(e=Ks(i,o,a))&&ra(e,i,o),o}function Oc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Lc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Mc(e,t){Lc(e,t),(e=e.alternate)&&Lc(e,t)}hs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Si.current)yu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return yu=!1,function(e,t,n){switch(t.tag){case 3:Tu(t),Fa();break;case 5:Ja(t);break;case 1:Ni(t.type)&&Di(t);break;case 4:Xa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_i(zi,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_i(eo,1&eo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ru(e,t,n):(_i(eo,1&eo.current),null!==(e=ju(e,t,n))?e.sibling:null);_i(eo,1&eo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Uu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),_i(eo,eo.current),r)break;return null;case 22:case 23:return t.lanes=0,xu(e,t,n)}return ju(e,t,n)}(e,t,n);yu=0!==(131072&e.flags)}else yu=!1,Na&&0!==(1048576&t.flags)&&Ia(t,ya,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Ci(t,Ei.current);Yi(t,n),i=yo(null,t,r,e,i,n);var o=go();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ni(r)?(o=!0,Di(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Zi(t),i.updater=ca,t.stateNode=i,i._reactInternals=t,da(t,r,e,n),t=Su(null,t,r,!0,o,n)):(t.tag=0,Na&&o&&Ea(t),gu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return wc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=Bi(r,e),i){case 0:t=Iu(null,t,r,e,n);break e;case 1:t=Eu(null,t,r,e,n);break e;case 11:t=ku(null,t,r,e,n);break e;case 14:t=bu(null,t,r,Bi(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:Bi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Eu(e,t,r,i=t.elementType===r?i:Bi(r,i),n);case 3:e:{if(Tu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ea(e,t),aa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Cu(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Cu(e,t,r,n,i=Error(a(424)));break e}for(Ca=oi(t.stateNode.containerInfo.firstChild),Ta=t,Na=!0,Aa=null,n=Ka(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Fa(),r===i){t=ju(e,t,n);break e}gu(e,t,r,n)}t=t.child}return t;case 5:return Ja(t),null===e&&Oa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,Zr(r,i)?u=null:null!==o&&Zr(r,o)&&(t.flags|=32),_u(e,t),gu(e,t,u,n),t.child;case 6:return null===e&&Oa(t),null;case 13:return Ru(e,t,n);case 4:return Xa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=qa(t,null,r,n):gu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ku(e,t,r,i=t.elementType===r?i:Bi(r,i),n);case 7:return gu(e,t,t.pendingProps,n),t.child;case 8:case 12:return gu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,_i(zi,r._currentValue),r._currentValue=u,null!==o)if(ar(o.value,u)){if(o.children===i.children&&!Si.current){t=ju(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ta(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Qi(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Qi(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}gu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Yi(t,n),r=r(i=Xi(i)),t.flags|=1,gu(e,t,r,n),t.child;case 14:return i=Bi(r=t.type,t.pendingProps),bu(e,t,r,i=Bi(r.type,i),n);case 15:return wu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Bi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ni(r)?(e=!0,Di(t)):e=!1,Yi(t,n),fa(t,r,i),da(t,r,i,n),Su(null,t,r,!0,e,n);case 19:return Uu(e,t,n);case 22:return xu(e,t,n)}throw Error(a(156,t.tag))};var Fc="function"===typeof reportError?reportError:function(e){console.error(e)};function Uc(e){this._internalRoot=e}function jc(e){this._internalRoot=e}function Vc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Bc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function zc(){}function qc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Oc(o);u.call(e)}}Dc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Oc(o);a.call(e)}}var o=Pc(t,r,e,0,null,!1,0,"",zc);return e._reactRootContainer=o,e[fi]=o.current,Vr(8===e.nodeType?e.parentNode:e),Zs(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Oc(s);u.call(e)}}var s=Nc(e,0,!1,null,0,!1,0,"",zc);return e._reactRootContainer=s,e[fi]=s.current,Vr(8===e.nodeType?e.parentNode:e),Zs((function(){Dc(t,s,n,r)})),s}(n,t,e,i,r);return Oc(o)}jc.prototype.render=Uc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Dc(e,t,null,null)},jc.prototype.unmount=Uc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zs((function(){Dc(null,e,null,null)})),t[fi]=null}},jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(yt(t,1|n),Ws(t,$e()),0===(6&ys)&&(Rs=$e()+500,ji()))}break;case 13:var r=zs();Zs((function(){return Ks(e,1,r)})),Mc(e,1)}},wt=function(e){13===e.tag&&(Ks(e,134217728,zs()),Mc(e,134217728))},xt=function(e){if(13===e.tag){var t=zs(),n=qs(e);Ks(e,n,t),Mc(e,n)}},_t=function(){return gt},It=function(e,t){var n=gt;try{return gt=e,t()}finally{gt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=gi(r);if(!i)throw Error(a(90));H(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=Js,Ne=Zs;var Kc={usingClientEntryPoint:!1,Events:[mi,yi,gi,Se,Te,Js]},Gc={findFiberByHostInstance:vi,bundleType:0,version:"18.0.0-fc46dba67-20220329",rendererPackageName:"react-dom"},Wc={bundleType:Gc.bundleType,version:Gc.version,rendererPackageName:Gc.rendererPackageName,rendererConfig:Gc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:Gc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{it=Hc.inject(Wc),at=Hc}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Vc(t))throw Error(a(200));return Ac(e,t,null,n)},t.createRoot=function(e,t){if(!Vc(e))throw Error(a(299));var n=!1,r="",i=Fc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Nc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Uc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return Zs(e)},t.hydrate=function(e,t,n){if(!Bc(t))throw Error(a(200));return qc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Vc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Fc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Pc(t,null,e,1,null!=n?n:null,i,0,o,u),e[fi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new jc(t)},t.render=function(e,t,n){if(!Bc(t))throw Error(a(200));return qc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Bc(e))throw Error(a(40));return!!e._reactRootContainer&&(Zs((function(){qc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=Js,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return qc(e,t,n,!1,r)},t.version="18.0.0-fc46dba67-20220329"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.0.0-fc46dba67-20220329"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(R){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function m(){}function y(){}function g(){}var k={};s(k,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(N([])));w&&w!==n&&r.call(w,a)&&(k=w);var x=g.prototype=m.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return y.prototype=g,s(x,"constructor",g),s(g,"constructor",y),y.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},_(I.prototype),s(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(x),s(x,u,"Generator"),s(x,a,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,D(x);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,I=!1,E=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?_():(I=!1,E=null)}}else I=!1}if("function"===typeof k)_=function(){k(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=A,_=function(){P.postMessage(null)}}else _=function(){y(A,0)};function D(e){E=e,I||(I=!0,_())}function O(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(S),S=-1):m=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},391:function(e){"use strict";var t=function(){};e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Pn},SDK_VERSION:function(){return Ar},_DEFAULT_ENTRY_NAME:function(){return yr},_addComponent:function(){return wr},_addOrOverwriteComponent:function(){return xr},_apps:function(){return kr},_clearComponents:function(){return Sr},_components:function(){return br},_getProvider:function(){return Ir},_registerComponent:function(){return _r},_removeServiceInstance:function(){return Er},deleteApp:function(){return Or},getApp:function(){return Pr},getApps:function(){return Dr},initializeApp:function(){return Rr},onLog:function(){return Fr},registerVersion:function(){return Mr},setLogLevel:function(){return Ur}});var t=n(791),r=n(250);function i(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function u(e){i(o,r,a,u,s,"next",e)}function s(e){i(o,r,a,u,s,"throw",e)}u(void 0)}))}}function o(e){if(Array.isArray(e))return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||s(e,t)||c()}var f=n(757),h=n.n(f);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function y(e,t){if(null==e)return{};var n,r,i=m(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var g=n(694),k=n.n(g),b=n(184),w=["xxl","xl","lg","md","sm","xs"],x=t.createContext({prefixes:{},breakpoints:w});x.Consumer,x.Provider;function _(e,n){var r=(0,t.useContext)(x).prefixes;return e||r[n]||n}var I=/-(.)/g;var E=["className","bsPrefix","as"],S=function(e){return e[0].toUpperCase()+(t=e,t.replace(I,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function T(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.displayName,i=void 0===r?S(e):r,a=n.Component,o=n.defaultProps,u=t.forwardRef((function(t,n){var r=t.className,i=t.bsPrefix,o=t.as,u=void 0===o?a||"div":o,s=y(t,E),c=_(i,e);return(0,b.jsx)(u,v({ref:n,className:k()(r,c)},s))}));return u.defaultProps=o,u.displayName=i,u}var C=function(e){return t.forwardRef((function(t,n){return(0,b.jsx)("div",v(v({},t),{},{ref:n,className:k()(t.className,e)}))}))},N=["bsPrefix","className","variant","as"],A=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.variant,a=e.as,o=void 0===a?"img":a,u=y(e,N),s=_(n,"card-img");return(0,b.jsx)(o,v({ref:t,className:k()(i?"".concat(s,"-").concat(i):s,r)},u))}));A.displayName="CardImg";var R=A,P=t.createContext(null);P.displayName="CardHeaderContext";var D=P,O=["bsPrefix","className","as"],L=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.as,o=void 0===a?"div":a,u=y(e,O),s=_(r,"card-header"),c=(0,t.useMemo)((function(){return{cardHeaderBsPrefix:s}}),[s]);return(0,b.jsx)(D.Provider,{value:c,children:(0,b.jsx)(o,v(v({ref:n},u),{},{className:k()(i,s)}))})}));L.displayName="CardHeader";var M=L,F=["bsPrefix","className","bg","text","border","body","children","as"],U=C("h5"),j=C("h6"),V=T("card-body"),B=T("card-title",{Component:U}),z=T("card-subtitle",{Component:j}),q=T("card-link",{Component:"a"}),K=T("card-text",{Component:"p"}),G=T("card-footer"),W=T("card-img-overlay"),H=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.bg,a=e.text,o=e.border,u=e.body,s=e.children,c=e.as,l=void 0===c?"div":c,f=y(e,F),h=_(n,"card");return(0,b.jsx)(l,v(v({ref:t},f),{},{className:k()(r,h,i&&"bg-".concat(i),a&&"text-".concat(a),o&&"border-".concat(o)),children:u?(0,b.jsx)(V,{children:s}):s}))}));H.displayName="Card",H.defaultProps={body:!1};var Q=Object.assign(H,{Img:R,Title:B,Subtitle:z,Body:V,Link:q,Text:K,Header:M,Footer:G,ImgOverlay:W});function Y(){return Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y.apply(this,arguments)}n(176);function X(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function $(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function J(e,n){return Object.keys(n).reduce((function(r,i){var a,o=r,u=o[X(i)],s=o[i],c=m(o,[X(i),i].map($)),l=n[i],f=function(e,n,r){var i=(0,t.useRef)(void 0!==e),a=(0,t.useState)(n),o=a[0],u=a[1],s=void 0!==e,c=i.current;return i.current=s,!s&&c&&o!==n&&u(n),[s?e:o,(0,t.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r&&r.apply(void 0,[e].concat(n)),u(e)}),[r])]}(s,u,e[l]),h=f[0],d=f[1];return Y({},c,((a={})[i]=h,a[l]=d,a))}),e)}function Z(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function ee(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function te(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}Z.__suppressDeprecationWarning=!0,ee.__suppressDeprecationWarning=!0,te.__suppressDeprecationWarning=!0;var ne=function(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e}),[e]),n};function re(e){var n=ne(e);return(0,t.useCallback)((function(){return n.current&&n.current.apply(n,arguments)}),[n])}var ie="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product;"undefined"!==typeof document||ie?t.useLayoutEffect:t.useEffect,new WeakMap;var ae=["as","disabled"];function oe(e){var t=e.tagName,n=e.disabled,r=e.href,i=e.target,a=e.rel,o=e.onClick,u=e.tabIndex,s=void 0===u?0:u,c=e.type;t||(t=null!=r||null!=i||null!=a?"a":"button");var l={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},l];var f=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==o||o(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:"button",disabled:void 0,tabIndex:n?void 0:s,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:f,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),f(e))}},l]}var ue=t.forwardRef((function(e,t){var n=e.as,r=e.disabled,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,ae),a=l(oe(Object.assign({tagName:n,disabled:r},i)),2),o=a[0],u=a[1].tagName;return(0,b.jsx)(u,Object.assign({},i,o,{ref:t}))}));ue.displayName="Button";var se=["onKeyDown"];var ce=t.forwardRef((function(e,t){var n,r=e.onKeyDown,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,se),a=l(oe(Object.assign({tagName:"a"},i)),1)[0],o=re((function(e){a.onKeyDown(e),null==r||r(e)}));return((n=i.href)&&"#"!==n.trim()||i.role)&&"button"!==i.role?(0,b.jsx)("a",Object.assign({ref:t},i,{onKeyDown:r})):(0,b.jsx)("a",Object.assign({ref:t},i,a,{onKeyDown:o}))}));ce.displayName="Anchor";var le=ce;function fe(e,t){return fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fe(e,t)}var he=n(164),de=!1,pe=t.createContext(null),ve="unmounted",me="exited",ye="entering",ge="entered",ke="exiting",be=function(e){var n,r;function i(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=me,r.appearStatus=ye):i=ge:i=t.unmountOnExit||t.mountOnEnter?ve:me,r.state={status:i},r.nextCallback=null,r}r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,fe(n,r),i.getDerivedStateFromProps=function(e,t){return e.in&&t.status===ve?{status:me}:null};var a=i.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==ye&&n!==ge&&(t=ye):n!==ye&&n!==ge||(t=ke)}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},a.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===ye?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===me&&this.setState({status:ve})},a.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[he.findDOMNode(this),r],a=i[0],o=i[1],u=this.getTimeouts(),s=r?u.appear:u.enter;!e&&!n||de?this.safeSetState({status:ge},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:ye},(function(){t.props.onEntering(a,o),t.onTransitionEnd(s,(function(){t.safeSetState({status:ge},(function(){t.props.onEntered(a,o)}))}))})))},a.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:he.findDOMNode(this);t&&!de?(this.props.onExit(r),this.safeSetState({status:ke},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:me},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:me},(function(){e.props.onExited(r)}))},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:he.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},a.render=function(){var e=this.state.status;if(e===ve)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,m(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(pe.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},i}(t.Component);function we(){}be.contextType=pe,be.propTypes={},be.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:we,onEntering:we,onEntered:we,onExit:we,onExiting:we,onExited:we},be.UNMOUNTED=ve,be.EXITED=me,be.ENTERING=ye,be.ENTERED=ge,be.EXITING=ke;var xe=be;function _e(e){var t=function(e){return e&&e.ownerDocument||document}(e);return t&&t.defaultView||window}var Ie=/([A-Z])/g;var Ee=/^ms-/;function Se(e){return function(e){return e.replace(Ie,"-$1").toLowerCase()}(e).replace(Ee,"-ms-")}var Te=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var Ce=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(Se(t))||function(e,t){return _e(e).getComputedStyle(e,t)}(e).getPropertyValue(Se(t));Object.keys(t).forEach((function(i){var a=t[i];a||0===a?!function(e){return!(!e||!Te.test(e))}(i)?n+=Se(i)+": "+a+";":r+=i+"("+a+") ":e.style.removeProperty(Se(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n},Ne=!("undefined"===typeof window||!window.document||!window.document.createElement),Ae=!1,Re=!1;try{var Pe={get passive(){return Ae=!0},get once(){return Re=Ae=!0}};Ne&&(window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,!0))}catch(rR){}var De=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!Re){var i=r.once,a=r.capture,o=n;!Re&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,a),n.call(this,r)},n.__once=o),e.addEventListener(t,o,Ae?r:a)}e.addEventListener(t,n,r)};var Oe=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var Le=function(e,t,n,r){return De(e,t,n,r),function(){Oe(e,t,n,r)}};function Me(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),a=Le(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),a()}}function Fe(e,t,n,r){null==n&&(n=function(e){var t=Ce(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=Me(e,n,r),a=Le(e,"transitionend",t);return function(){i(),a()}}function Ue(e,t){var n=Ce(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function je(e,t){var n=Ue(e,"transitionDuration"),r=Ue(e,"transitionDelay"),i=Fe(e,(function(n){n.target===e&&(i(),t(n))}),n+r)}var Ve=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var Be=function(e,n){return(0,t.useMemo)((function(){return function(e,t){var n=Ve(e),r=Ve(t);return function(e){n&&n(e),r&&r(e)}}(e,n)}),[e,n])};var ze,qe=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],Ke=t.forwardRef((function(e,n){var r=e.onEnter,i=e.onEntering,a=e.onEntered,o=e.onExit,u=e.onExiting,s=e.onExited,c=e.addEndListener,l=e.children,f=e.childRef,h=y(e,qe),d=(0,t.useRef)(null),p=Be(d,f),m=function(e){var t;p((t=e)&&"setState"in t?he.findDOMNode(t):null!=t?t:null)},g=function(e){return function(t){e&&d.current&&e(d.current,t)}},k=(0,t.useCallback)(g(r),[r]),w=(0,t.useCallback)(g(i),[i]),x=(0,t.useCallback)(g(a),[a]),_=(0,t.useCallback)(g(o),[o]),I=(0,t.useCallback)(g(u),[u]),E=(0,t.useCallback)(g(s),[s]),S=(0,t.useCallback)(g(c),[c]);return(0,b.jsx)(xe,v(v({ref:n},h),{},{onEnter:k,onEntered:x,onEntering:w,onExit:_,onExited:E,onExiting:I,addEndListener:S,nodeRef:d,children:"function"===typeof l?function(e,t){return l(e,v(v({},t),{},{ref:m}))}:t.cloneElement(l,{ref:m})}))})),Ge=["className","children","transitionClasses"],We=(d(ze={},ye,"show"),d(ze,ge,"show"),ze),He=t.forwardRef((function(e,n){var r=e.className,i=e.children,a=e.transitionClasses,o=void 0===a?{}:a,u=y(e,Ge),s=(0,t.useCallback)((function(e,t){!function(e){e.offsetHeight}(e),null==u.onEnter||u.onEnter(e,t)}),[u]);return(0,b.jsx)(Ke,v(v({ref:n,addEndListener:je},u),{},{onEnter:s,childRef:i.ref,children:function(e,n){return t.cloneElement(i,v(v({},n),{},{className:k()("fade",r,i.props.className,We[e],o[e])}))}}))}));He.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},He.displayName="Fade";var Qe=He,Ye=n(7),Xe=n.n(Ye),$e=["className","variant"],Je={"aria-label":Xe().string,onClick:Xe().func,variant:Xe().oneOf(["white"])},Ze=t.forwardRef((function(e,t){var n=e.className,r=e.variant,i=y(e,$e);return(0,b.jsx)("button",v({ref:t,type:"button",className:k()("btn-close",r&&"btn-close-".concat(r),n)},i))}));Ze.displayName="CloseButton",Ze.propTypes=Je,Ze.defaultProps={"aria-label":"Close"};var et=Ze,tt=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],nt=C("h4");nt.displayName="DivStyledAsH4";var rt=T("alert-heading",{Component:nt}),it=T("alert-link",{Component:le}),at={variant:"primary",show:!0,transition:Qe,closeLabel:"Close alert"},ot=t.forwardRef((function(e,t){var n=J(e,{show:"onClose"}),r=n.bsPrefix,i=n.show,a=n.closeLabel,o=n.closeVariant,u=n.className,s=n.children,c=n.variant,l=n.onClose,f=n.dismissible,h=n.transition,d=y(n,tt),p=_(r,"alert"),m=re((function(e){l&&l(!1,e)})),g=!0===h?Qe:h,w=(0,b.jsxs)("div",v(v({role:"alert"},g?void 0:d),{},{ref:t,className:k()(u,p,c&&"".concat(p,"-").concat(c),f&&"".concat(p,"-dismissible")),children:[f&&(0,b.jsx)(et,{onClick:m,"aria-label":a,variant:o}),s]}));return g?(0,b.jsx)(g,v(v({unmountOnExit:!0},d),{},{ref:void 0,in:i,children:w})):i?w:null}));ot.displayName="Alert",ot.defaultProps=at;var ut=Object.assign(ot,{Link:it,Heading:rt}),st=["as","className","type","tooltip"],ct={type:Xe().string,tooltip:Xe().bool,as:Xe().elementType},lt=t.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,i=e.className,a=e.type,o=void 0===a?"valid":a,u=e.tooltip,s=void 0!==u&&u,c=y(e,st);return(0,b.jsx)(r,v(v({},c),{},{ref:t,className:k()(i,"".concat(o,"-").concat(s?"tooltip":"feedback"))}))}));lt.displayName="Feedback",lt.propTypes=ct;var ft=lt,ht=t.createContext({}),dt=["id","bsPrefix","className","type","isValid","isInvalid","as"],pt=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.className,o=e.type,u=void 0===o?"checkbox":o,s=e.isValid,c=void 0!==s&&s,l=e.isInvalid,f=void 0!==l&&l,h=e.as,d=void 0===h?"input":h,p=y(e,dt),m=(0,t.useContext)(ht).controlId;return i=_(i,"form-check-input"),(0,b.jsx)(d,v(v({},p),{},{ref:n,type:u,id:r||m,className:k()(a,i,c&&"is-valid",f&&"is-invalid")}))}));pt.displayName="FormCheckInput";var vt=pt,mt=["bsPrefix","className","htmlFor"],yt=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.htmlFor,o=y(e,mt),u=(0,t.useContext)(ht).controlId;return r=_(r,"form-check-label"),(0,b.jsx)("label",v(v({},o),{},{ref:n,htmlFor:a||u,className:k()(i,r)}))}));yt.displayName="FormCheckLabel";var gt=yt;var kt=["id","bsPrefix","bsSwitchPrefix","inline","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],bt=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.bsSwitchPrefix,o=e.inline,u=void 0!==o&&o,s=e.disabled,c=void 0!==s&&s,l=e.isValid,f=void 0!==l&&l,h=e.isInvalid,d=void 0!==h&&h,p=e.feedbackTooltip,m=void 0!==p&&p,g=e.feedback,w=e.feedbackType,x=e.className,I=e.style,E=e.title,S=void 0===E?"":E,T=e.type,C=void 0===T?"checkbox":T,N=e.label,A=e.children,R=e.as,P=void 0===R?"input":R,D=y(e,kt);i=_(i,"form-check"),a=_(a,"form-switch");var O=(0,t.useContext)(ht).controlId,L=(0,t.useMemo)((function(){return{controlId:r||O}}),[O,r]),M=!A&&null!=N&&!1!==N||function(e,n){return t.Children.toArray(e).some((function(e){return t.isValidElement(e)&&e.type===n}))}(A,gt),F=(0,b.jsx)(vt,v(v({},D),{},{type:"switch"===C?"checkbox":C,ref:n,isValid:f,isInvalid:d,disabled:c,as:P}));return(0,b.jsx)(ht.Provider,{value:L,children:(0,b.jsx)("div",{style:I,className:k()(x,M&&i,u&&"".concat(i,"-inline"),"switch"===C&&a),children:A||(0,b.jsxs)(b.Fragment,{children:[F,M&&(0,b.jsx)(gt,{title:S,children:N}),g&&(0,b.jsx)(ft,{type:w,tooltip:m,children:g})]})})})}));bt.displayName="FormCheck";var wt=Object.assign(bt,{Input:vt,Label:gt}),xt=(n(391),["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"]),_t=t.forwardRef((function(e,n){var r,i,a=e.bsPrefix,o=e.type,u=e.size,s=e.htmlSize,c=e.id,l=e.className,f=e.isValid,h=void 0!==f&&f,p=e.isInvalid,m=void 0!==p&&p,g=e.plaintext,w=e.readOnly,x=e.as,I=void 0===x?"input":x,E=y(e,xt),S=(0,t.useContext)(ht).controlId;(a=_(a,"form-control"),g)?r=d({},"".concat(a,"-plaintext"),!0):(d(i={},a,!0),d(i,"".concat(a,"-").concat(u),u),r=i);return(0,b.jsx)(I,v(v({},E),{},{type:o,size:s,ref:n,readOnly:w,id:c||S,className:k()(l,r,h&&"is-valid",m&&"is-invalid","color"===o&&"".concat(a,"-color"))}))}));_t.displayName="FormControl";var It=Object.assign(_t,{Feedback:ft}),Et=T("form-floating"),St=["controlId","as"],Tt=t.forwardRef((function(e,n){var r=e.controlId,i=e.as,a=void 0===i?"div":i,o=y(e,St),u=(0,t.useMemo)((function(){return{controlId:r}}),[r]);return(0,b.jsx)(ht.Provider,{value:u,children:(0,b.jsx)(a,v(v({},o),{},{ref:n}))})}));Tt.displayName="FormGroup";var Ct=Tt,Nt=["as","bsPrefix","className"],At=["className"];function Rt(e){var n=e.as,r=e.bsPrefix,i=e.className,a=y(e,Nt);r=_(r,"col");var o=(0,t.useContext)(x).breakpoints,u=[],s=[];return o.forEach((function(e){var t,n,i,o=a[e];delete a[e],"object"===typeof o&&null!=o?(t=o.span,n=o.offset,i=o.order):t=o;var c="xs"!==e?"-".concat(e):"";t&&u.push(!0===t?"".concat(r).concat(c):"".concat(r).concat(c,"-").concat(t)),null!=i&&s.push("order".concat(c,"-").concat(i)),null!=n&&s.push("offset".concat(c,"-").concat(n))})),[v(v({},a),{},{className:k().apply(void 0,[i].concat(u,s))}),{as:n,bsPrefix:r,spans:u}]}var Pt=t.forwardRef((function(e,t){var n=l(Rt(e),2),r=n[0],i=r.className,a=y(r,At),o=n[1],u=o.as,s=void 0===u?"div":u,c=o.bsPrefix,f=o.spans;return(0,b.jsx)(s,v(v({},a),{},{ref:t,className:k()(i,!f.length&&c)}))}));Pt.displayName="Col";var Dt=Pt,Ot=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],Lt=t.forwardRef((function(e,n){var r=e.as,i=void 0===r?"label":r,a=e.bsPrefix,o=e.column,u=e.visuallyHidden,s=e.className,c=e.htmlFor,l=y(e,Ot),f=(0,t.useContext)(ht).controlId;a=_(a,"form-label");var h="col-form-label";"string"===typeof o&&(h="".concat(h," ").concat(h,"-").concat(o));var d=k()(s,a,u&&"visually-hidden",o&&h);return c=c||f,o?(0,b.jsx)(Dt,v({ref:n,as:"label",className:d,htmlFor:c},l)):(0,b.jsx)(i,v({ref:n,className:d,htmlFor:c},l))}));Lt.displayName="FormLabel",Lt.defaultProps={column:!1,visuallyHidden:!1};var Mt=Lt,Ft=["bsPrefix","className","id"],Ut=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.id,o=y(e,Ft),u=(0,t.useContext)(ht).controlId;return r=_(r,"form-range"),(0,b.jsx)("input",v(v({},o),{},{type:"range",ref:n,className:k()(i,r),id:a||u}))}));Ut.displayName="FormRange";var jt=Ut,Vt=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],Bt=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.size,a=e.htmlSize,o=e.className,u=e.isValid,s=void 0!==u&&u,c=e.isInvalid,l=void 0!==c&&c,f=e.id,h=y(e,Vt),d=(0,t.useContext)(ht).controlId;return r=_(r,"form-select"),(0,b.jsx)("select",v(v({},h),{},{size:a,ref:n,className:k()(o,r,i&&"".concat(r,"-").concat(i),s&&"is-valid",l&&"is-invalid"),id:f||d}))}));Bt.displayName="FormSelect";var zt=Bt,qt=["bsPrefix","className","as","muted"],Kt=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?"small":i,o=e.muted,u=y(e,qt);return n=_(n,"form-text"),(0,b.jsx)(a,v(v({},u),{},{ref:t,className:k()(r,n,o&&"text-muted")}))}));Kt.displayName="FormText";var Gt=Kt,Wt=t.forwardRef((function(e,t){return(0,b.jsx)(wt,v(v({},e),{},{ref:t,type:"switch"}))}));Wt.displayName="Switch";var Ht=Object.assign(Wt,{Input:wt.Input,Label:wt.Label}),Qt=["bsPrefix","className","children","controlId","label"],Yt=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.children,a=e.controlId,o=e.label,u=y(e,Qt);return n=_(n,"form-floating"),(0,b.jsxs)(Ct,v(v({ref:t,className:k()(r,n),controlId:a},u),{},{children:[i,(0,b.jsx)("label",{htmlFor:a,children:o})]}))}));Yt.displayName="FloatingLabel";var Xt=Yt,$t=["className","validated","as"],Jt={_ref:Xe().any,validated:Xe().bool,as:Xe().elementType},Zt=t.forwardRef((function(e,t){var n=e.className,r=e.validated,i=e.as,a=void 0===i?"form":i,o=y(e,$t);return(0,b.jsx)(a,v(v({},o),{},{ref:t,className:k()(n,r&&"was-validated")}))}));Zt.displayName="Form",Zt.propTypes=Jt;var en=Object.assign(Zt,{Group:Ct,Control:It,Floating:Et,Check:wt,Switch:Ht,Label:Mt,Text:Gt,Range:jt,Select:zt,FloatingLabel:Xt}),tn=["as","bsPrefix","variant","size","active","className"],nn=t.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,i=e.variant,a=e.size,o=e.active,u=e.className,s=y(e,tn),c=_(r,"btn"),f=l(oe(v({tagName:n},s)),2),h=f[0],d=f[1].tagName;return(0,b.jsx)(d,v(v(v({},h),s),{},{ref:t,className:k()(u,c,o&&"active",i&&"".concat(c,"-").concat(i),a&&"".concat(c,"-").concat(a),s.href&&s.disabled&&"disabled")}))}));nn.displayName="Button",nn.defaultProps={variant:"primary",active:!1,disabled:!1};var rn=nn;function an(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function un(e,t,n){return t&&on(e.prototype,t),n&&on(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function sn(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function cn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ln(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fe(e,t)}function fn(e){return fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fn(e)}function hn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(rR){return!1}}function dn(e){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(e)}function pn(e,t){if(t&&("object"===dn(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cn(e)}function vn(e){var t=hn();return function(){var n,r=fn(e);if(t){var i=fn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pn(this,n)}}function mn(e,t,n){return mn=hn()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&fe(i,n.prototype),i},mn.apply(null,arguments)}function yn(e){var t="function"===typeof Map?new Map:void 0;return yn=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return mn(e,arguments,fn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),fe(n,e)},yn(e)}var gn=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},kn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(gn(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},bn=function(e){return function(e){var t=gn(e);return kn.encodeByteArray(t,!0)}(e).replace(/\./g,"")},wn=function(e){try{return kn.decodeString(e,!0)}catch(rR){console.error("base64Decode failed: ",rR)}return null};function xn(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=xn(e[n],t[n]));return e}var _n=function(){function e(){var t=this;an(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return un(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function In(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[bn(JSON.stringify({alg:"none",type:"JWT"})),bn(JSON.stringify(a)),""].join(".")}function En(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Sn(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function Tn(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(rR){return!1}}function Cn(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Nn(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function An(){var e=En();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Rn(){return"object"===typeof indexedDB}var Pn=function(e){ln(n,e);var t=vn(n);function n(e,r,i){var a;return an(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(cn(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(cn(a),Dn.prototype.create),a}return un(n)}(yn(Error)),Dn=function(){function e(t,n,r){an(this,e),this.service=t,this.serviceName=n,this.errors=r}return un(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?On(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Pn(n,a,t);return o}}]),e}();function On(e,t){return e.replace(Ln,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Ln=/\{\$([^}]+)}/g;function Mn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Fn(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Un(u)&&Un(s)){if(!Fn(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Un(e){return null!==e&&"object"===typeof e}function jn(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Vn(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Bn(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function zn(e,t){var n=new qn(e,t);return n.subscribe.bind(n)}var qn=function(){function e(t,n){var r=this;an(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return un(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=sn(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Kn),void 0===r.error&&(r.error=Kn),void 0===r.complete&&(r.complete=Kn);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(rR){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(rR){"undefined"!==typeof console&&console.error&&console.error(rR)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Kn(){}function Gn(e){return e&&e._delegate?e._delegate:e}function Wn(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var Hn=function(){function e(t){an(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return un(e,[{key:"transaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return new Qn(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new Yn(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),Qn=function(){function e(t){var n=this;an(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return un(e,[{key:"objectStore",value:function(e){return new Yn(this._transaction.objectStore(e))}}]),e}(),Yn=function(){function e(t){an(this,e),this._store=t}return un(e,[{key:"index",value:function(e){return new Xn(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new Xn(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return Wn(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return Wn(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return Wn(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return Wn(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),Xn=function(){function e(t){an(this,e),this._index=t}return un(e,[{key:"get",value:function(e){return Wn(this._index.get(e),"Error reading from IndexedDB")}}]),e}();function $n(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Jn(e){return function(e){if(Array.isArray(e))return u(e)}(e)||$n(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Zn=function(){function e(t,n,r){an(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return un(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),er="[DEFAULT]",tr=function(){function e(t,n){an(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return un(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new _n;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(rR){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(rR){if(r)return null;throw rR}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:er})}catch(rR){}var t,n=sn(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(rR){}}}catch(s){n.e(s)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=a(f.mark((function e(){var t;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Jn(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Jn(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=sn(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=l(i.value,2),s=u[0],c=u[1],f=this.normalizeInstanceIdentifier(s);r===f&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=sn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(xS){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===er?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(xS){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er;return this.component?this.component.multipleInstances?e:er:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var nr,rr,ir=function(){function e(t){an(this,e),this.name=t,this.providers=new Map}return un(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new tr(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ar=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(rr||(rr={}));var or,ur,sr={debug:rr.DEBUG,verbose:rr.VERBOSE,info:rr.INFO,warn:rr.WARN,error:rr.ERROR,silent:rr.SILENT},cr=rr.INFO,lr=(d(nr={},rr.DEBUG,"log"),d(nr,rr.VERBOSE,"log"),d(nr,rr.INFO,"info"),d(nr,rr.WARN,"warn"),d(nr,rr.ERROR,"error"),nr),fr=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=lr[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},hr=function(){function e(t){an(this,e),this.name=t,this._logLevel=cr,this._logHandler=fr,this._userLogHandler=null,ar.push(this)}return un(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in rr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?sr[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,rr.DEBUG].concat(t)),this._logHandler.apply(this,[this,rr.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,rr.VERBOSE].concat(t)),this._logHandler.apply(this,[this,rr.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,rr.INFO].concat(t)),this._logHandler.apply(this,[this,rr.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,rr.WARN].concat(t)),this._logHandler.apply(this,[this,rr.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,rr.ERROR].concat(t)),this._logHandler.apply(this,[this,rr.ERROR].concat(t))}}]),e}();var dr=function(){function e(t){an(this,e),this.container=t}return un(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var pr="@firebase/app",vr="0.7.21",mr=new hr("@firebase/app"),yr="[DEFAULT]",gr=(d(or={},pr,"fire-core"),d(or,"@firebase/app-compat","fire-core-compat"),d(or,"@firebase/analytics","fire-analytics"),d(or,"@firebase/analytics-compat","fire-analytics-compat"),d(or,"@firebase/app-check","fire-app-check"),d(or,"@firebase/app-check-compat","fire-app-check-compat"),d(or,"@firebase/auth","fire-auth"),d(or,"@firebase/auth-compat","fire-auth-compat"),d(or,"@firebase/database","fire-rtdb"),d(or,"@firebase/database-compat","fire-rtdb-compat"),d(or,"@firebase/functions","fire-fn"),d(or,"@firebase/functions-compat","fire-fn-compat"),d(or,"@firebase/installations","fire-iid"),d(or,"@firebase/installations-compat","fire-iid-compat"),d(or,"@firebase/messaging","fire-fcm"),d(or,"@firebase/messaging-compat","fire-fcm-compat"),d(or,"@firebase/performance","fire-perf"),d(or,"@firebase/performance-compat","fire-perf-compat"),d(or,"@firebase/remote-config","fire-rc"),d(or,"@firebase/remote-config-compat","fire-rc-compat"),d(or,"@firebase/storage","fire-gcs"),d(or,"@firebase/storage-compat","fire-gcs-compat"),d(or,"@firebase/firestore","fire-fst"),d(or,"@firebase/firestore-compat","fire-fst-compat"),d(or,"fire-js","fire-js"),d(or,"firebase","fire-js-all"),or),kr=new Map,br=new Map;function wr(e,t){try{e.container.addComponent(t)}catch(rR){mr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),rR)}}function xr(e,t){e.container.addOrOverwriteComponent(t)}function _r(e){var t=e.name;if(br.has(t))return mr.debug("There were multiple attempts to register component ".concat(t,".")),!1;br.set(t,e);var n,r=sn(kr.values());try{for(r.s();!(n=r.n()).done;){wr(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Ir(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Er(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yr;Ir(e,t).clearInstance(n)}function Sr(){br.clear()}var Tr=(d(ur={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),d(ur,"bad-app-name","Illegal App name: '{$appName}"),d(ur,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),d(ur,"app-deleted","Firebase App named '{$appName}' already deleted"),d(ur,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),d(ur,"invalid-log-argument","First argument to `onLog` must be null or a function."),d(ur,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),d(ur,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),d(ur,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),d(ur,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),ur),Cr=new Dn("app","Firebase",Tr),Nr=function(){function e(t,n,r){var i=this;an(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zn("app",(function(){return i}),"PUBLIC"))}return un(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}}]),e}(),Ar="9.6.11";function Rr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:yr,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Cr.create("bad-app-name",{appName:String(i)});var a=kr.get(i);if(a){if(Fn(e,a.options)&&Fn(r,a.config))return a;throw Cr.create("duplicate-app",{appName:i})}var o,u=new ir(i),s=sn(br.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Nr(e,r,u);return kr.set(i,l),l}function Pr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yr,t=kr.get(e);if(!t)throw Cr.create("no-app",{appName:e});return t}function Dr(){return Array.from(kr.values())}function Or(e){return Lr.apply(this,arguments)}function Lr(){return Lr=a(f.mark((function e(t){var n;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!kr.has(n)){e.next=6;break}return kr.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),Lr.apply(this,arguments)}function Mr(e,t,n){var r,i=null!==(r=gr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void mr.warn(u.join(" "))}_r(new Zn("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Fr(e,t){if(null!==e&&"function"!==typeof e)throw Cr.create("invalid-log-argument");!function(e,t){var n,r=sn(ar);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=sr[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:rr[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Ur(e){var t;t=e,ar.forEach((function(e){e.setLogLevel(t)}))}var jr="firebase-heartbeat-store",Vr=null;function Br(){var e,t,n;return Vr||(Vr=(e="firebase-heartbeat-database",t=1,n=function(e,t){0===t&&e.createObjectStore(jr)},new Promise((function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new Hn(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new Hn(a.result),e.oldVersion,e.newVersion,new Qn(a.transaction))}}catch(rR){i("Error opening indexedDB: ".concat(rR.message))}}))).catch((function(e){throw Cr.create("storage-open",{originalErrorMessage:e.message})}))),Vr}function zr(e){return qr.apply(this,arguments)}function qr(){return qr=a(f.mark((function e(t){var n;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Br();case 3:return n=e.sent,e.abrupt("return",n.transaction(jr).objectStore(jr).get(Wr(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Cr.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),qr.apply(this,arguments)}function Kr(e,t){return Gr.apply(this,arguments)}function Gr(){return Gr=a(f.mark((function e(t,n){var r,i,a;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Br();case 3:return r=e.sent,i=r.transaction(jr,"readwrite"),a=i.objectStore(jr),e.next=8,a.put(n,Wr(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),Cr.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Gr.apply(this,arguments)}function Wr(e){return"".concat(e.name,"!").concat(e.options.appId)}var Hr=function(){function e(t){var n=this;an(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Jr(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return un(e,[{key:"triggerHeartbeat",value:function(){var e=a(f.mark((function e(){var t,n,r;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Qr(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=a(f.mark((function e(){var t,n,r,i,a;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Qr(),n=Yr(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=bn(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Qr(){return(new Date).toISOString().substring(0,10)}function Yr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=sn(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Zr(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Zr(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Xr,$r,Jr=function(){function e(t){an(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return un(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=a(f.mark((function e(){return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Rn()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=a(f.mark((function e(){var t;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,zr(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=a(f.mark((function e(t){var n,r;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Kr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=a(f.mark((function e(t){var n,r;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Kr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Jn(r.heartbeats),Jn(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Zr(e){return bn(JSON.stringify({version:2,heartbeats:e})).length}Xr="",_r(new Zn("platform-logger",(function(e){return new dr(e)}),"PRIVATE")),_r(new Zn("heartbeat",(function(e){return new Hr(e)}),"PRIVATE")),Mr(pr,vr,Xr),Mr(pr,vr,"esm2017"),Mr("fire-js","");var ei=function(){function e(t,n){var r=this;an(this,e),this._delegate=t,this.firebase=n,wr(t,new Zn("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return un(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Or(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yr;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yr;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){wr(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){xr(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),ti=(d($r={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),d($r,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),$r),ni=new Dn("app-compat","Firebase",ti);var ri=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Rr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Mn(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Mr,setLogLevel:Ur,onLog:Fr,apps:null,SDK_VERSION:Ar,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(_r(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw ni.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&xn(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Mn(n,e=e||yr))throw ni.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(ei);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){xn(n,e)},createSubscribe:zn,ErrorFactory:Dn,deepExtend:xn}),n}(),ii=new hr("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){ii.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ai=self.firebase.SDK_VERSION;ai&&ai.indexOf("LITE")>=0&&ii.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var oi=ri;!function(e){Mr("@firebase/app-compat","0.1.22",e)}();oi.registerVersion("firebase","9.6.11","app-compat");var ui="firebasestorage.googleapis.com",si=function(e){ln(n,e);var t=vn(n);function n(e,r){var i;return an(this,n),(i=t.call(this,ci(e),"Firebase Storage: ".concat(r," (").concat(ci(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(cn(i),n.prototype),i}return un(n,[{key:"_codeEquals",value:function(e){return ci(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Pn);function ci(e){return"storage/"+e}function li(){return new si("unknown","An unknown error occurred, please check the error payload for server response.")}function fi(){return new si("canceled","User canceled the upload/download.")}function hi(){return new si("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function di(e){return new si("invalid-argument",e)}function pi(){return new si("app-deleted","The Firebase app was deleted.")}function vi(e){return new si("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function mi(e,t){return new si("invalid-format","String does not match format '"+e+"': "+t)}function yi(e){throw new si("internal-error","Internal error: "+e)}var gi,ki=function(){function e(t,n){an(this,e),this.bucket=t,this.path_=n}return un(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(rR){return new e(t,"")}if(""===r.path)return r;throw new si("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===ui?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new si("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),bi=function(){function e(t){an(this,e),this.promise_=Promise.reject(t)}return un(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function wi(e){return"string"===typeof e||e instanceof String}function xi(e){return _i()&&e instanceof Blob}function _i(){return"undefined"!==typeof Blob}function Ii(e,t,n,r){if(r<t)throw di("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw di("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Ei(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Si(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(gi||(gi={}));var Ti=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this;an(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return un(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(rR){i(rR)}else if(null!==a){var u=li();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?pi():fi());else i(new si("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new Ci(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new Ci(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===gi.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new Ci(o,r))}else{var u=r.getErrorCode()===gi.ABORT;t(!1,new Ci(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),Ci=un((function e(t,n,r){an(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function Ni(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Ai(){for(var e=Ni(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(_i())return new Blob(n);throw new si("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Ri={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Pi=un((function e(t,n){an(this,e),this.data=t,this.contentType=n||null}));function Di(e,t){switch(e){case Ri.RAW:return new Pi(Oi(t));case Ri.BASE64:case Ri.BASE64URL:return new Pi(Li(e,t));case Ri.DATA_URL:return new Pi(function(e){var t=new Mi(e);return t.base64?Li(Ri.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(rR){throw mi(Ri.DATA_URL,"Malformed data URL.")}return Oi(t)}(t.rest)}(t),new Mi(t).contentType)}throw li()}function Oi(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Li(e,t){switch(e){case Ri.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw mi(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Ri.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw mi(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(rR){throw mi(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var Mi=un((function e(t){an(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw mi(Ri.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var Fi=function(){function e(t,n){an(this,e);var r=0,i="";xi(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return un(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(xi(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(_i()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(Ai.apply(null,i))}var a=n.map((function(e){return wi(e)?Di(Ri.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function Ui(e){var t;try{t=JSON.parse(e)}catch(rR){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function ji(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Vi(e,t){return t}var Bi=un((function e(t,n,r,i){an(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Vi})),zi=null;function qi(){if(zi)return zi;var e=[];e.push(new Bi("bucket")),e.push(new Bi("generation")),e.push(new Bi("metageneration")),e.push(new Bi("name","fullPath",!0));var t=new Bi("name");t.xform=function(e,t){return function(e){return!wi(e)||e.length<2?e:ji(e)}(t)},e.push(t);var n=new Bi("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Bi("timeCreated")),e.push(new Bi("updated")),e.push(new Bi("md5Hash",null,!0)),e.push(new Bi("cacheControl",null,!0)),e.push(new Bi("contentDisposition",null,!0)),e.push(new Bi("contentEncoding",null,!0)),e.push(new Bi("contentLanguage",null,!0)),e.push(new Bi("contentType",null,!0)),e.push(new Bi("metadata","customMetadata",!0)),zi=e}function Ki(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new ki(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Gi(e,t,n){var r=Ui(t);return null===r?null:Ki(e,r,n)}function Wi(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function Hi(e,t,n){var r=Ui(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=sn(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new ki(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var s,c=sn(n.items);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new ki(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var Qi=un((function e(t,n,r,i){an(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function Yi(e){if(!e)throw li()}function Xi(e,t){return function(n,r){var i=Gi(e,r,t);return Yi(null!==i),i}}function $i(e,t){return function(n,r){var i=Gi(e,r,t);return Yi(null!==i),function(e,t,n,r){var i=Ui(t);if(null===i)return null;if(!wi(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return Ei("/b/"+o(i)+"/o/"+o(a),n,r)+Si({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Ji(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new si("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new si("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new si("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new si("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function Zi(e){var t=Ji(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new si("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function ea(e,t,n){var r=Ei(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Qi(r,"GET",Xi(e,n),i);return a.errorHandler=Zi(t),a}function ta(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=Ei(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new Qi(o,"GET",function(e,t){return function(n,r){var i=Hi(e,t,r);return Yi(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=Ji(t),s}function na(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function ra(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=na(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Wi(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=Fi.getBlob(c,r,l);if(null===f)throw hi();var h={name:s.fullPath},d=Ei(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new Qi(d,"POST",Xi(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=Ji(t),v}var ia=un((function e(t,n,r,i){an(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function aa(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(rR){Yi(!1)}return Yi(!!n&&-1!==(t||["active"]).indexOf(n)),n}var oa=262144;function ua(e,t,n,r,i,a,o,u){var s=new ia(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new si("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw hi();var v=t.maxUploadRetryTime,m=new Qi(n,"POST",(function(e,n){var i,o=aa(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?Xi(t,a)(e,n):null,new ia(u,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=u||null,m.errorHandler=Ji(e),m}var sa={STATE_CHANGED:"state_changed"},ca={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function la(e){switch(e){case"running":case"pausing":case"canceling":return ca.RUNNING;case"paused":return ca.PAUSED;case"success":return ca.SUCCESS;case"canceled":return ca.CANCELED;default:return ca.ERROR}}var fa=un((function e(t,n,r){an(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function ha(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var da=function(){function e(){var t=this;an(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=gi.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=gi.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=gi.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return un(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw yi("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw yi("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw yi("cannot .getStatus() before sending");try{return this.xhr_.status}catch(rR){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw yi("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw yi("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),pa=function(e){ln(n,e);var t=vn(n);function n(){return an(this,n),t.apply(this,arguments)}return un(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(da);function va(){return new pa}var ma=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;an(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=qi(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return un(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=l(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=na(t,r,i),u={name:o.fullPath},s=Ei(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=Wi(o,n),f=e.maxUploadRetryTime,h=new Qi(s,"POST",(function(e){var t;aa(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(rR){Yi(!1)}return Yi(wi(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=Ji(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,va,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new Qi(n,"POST",(function(e){var t=aa(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(rR){Yi(!1)}n||Yi(!1);var i=Number(n);return Yi(!isNaN(i)),new ia(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=Ji(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,va,n,r);e._request=a,a.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=oa*this._chunkMultiplier,n=new ia(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=ua(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(rR){return e._error=rR,void e._transition("error")}var u=e._ref.storage._makeRequest(o,va,i,a);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){oa*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=ea(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,va,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=ra(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,va,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=fi(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=la(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new fa(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(la(this._state)){case ca.SUCCESS:ha(this._resolve.bind(null,this.snapshot))();break;case ca.CANCELED:case ca.ERROR:ha(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(la(this._state)){case ca.RUNNING:case ca.PAUSED:e.next&&ha(e.next.bind(e,this.snapshot))();break;case ca.SUCCESS:e.complete&&ha(e.complete.bind(e))();break;default:e.error&&ha(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),ya=function(){function e(t,n){an(this,e),this._service=t,this._location=n instanceof ki?n:ki.makeFromUrl(n,t.host)}return un(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new ki(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return ji(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new ki(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw vi(e)}}]),e}();function ga(e,t,n){return ka.apply(this,arguments)}function ka(){return(ka=a(h().mark((function e(t,n,r){var i,a,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,ba(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,Jn(u.prefixes)),(a=n.items).push.apply(a,Jn(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,ga(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ba(e,t){null!=t&&"number"===typeof t.maxResults&&Ii("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=ta(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,va)}function wa(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=Ei(t.fullServerUrl(),e.host,e._protocol),a=Wi(n,r),o=e.maxOperationRetryTime,u=new Qi(i,"PATCH",Xi(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=Zi(t),u}(e.storage,e._location,t,qi());return e.storage.makeRequestWithTokens(n,va)}function xa(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Ei(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Qi(r,"GET",$i(e,n),i);return a.errorHandler=Zi(t),a}(e.storage,e._location,qi());return e.storage.makeRequestWithTokens(t,va).then((function(e){if(null===e)throw new si("no-download-url","The given file does not have any download URLs.");return e}))}function _a(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=Ei(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Qi(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Zi(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,va)}function Ia(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new ki(e._location.bucket,n);return new ya(e.storage,r)}function Ea(e,t){if(e instanceof Na){var n=e;if(null==n._bucket)throw new si("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new ya(n,n._bucket);return null!=t?Ea(r,t):r}return void 0!==t?Ia(e,t):e}function Sa(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Na)return new ya(e,t);throw di("To use ref(service, url), the first argument must be a Storage instance.")}return Ea(e,t)}function Ta(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:ki.makeFromBucketSpec(n,e)}function Ca(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:In(i,e.app.options.projectId))}var Na=function(){function e(t,n,r,i,a){an(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=ui,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ki.makeFromBucketSpec(i,this._host):Ta(this._host,this.app.options)}return un(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=ki.makeFromBucketSpec(this._url,e):this._bucket=Ta(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Ii("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Ii("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=a(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=a(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new ya(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new bi(pi());var a=function(e,t,n,r,i,a){var o=Si(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new Ti(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=l(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Aa="@firebase/storage",Ra="0.9.5",Pa="storage";function Da(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new ma(e,new Fi(t),n)}(e=Gn(e),t,n)}function Oa(e){return function(e){e._throwIfRoot("getMetadata");var t=ea(e.storage,e._location,qi());return e.storage.makeRequestWithTokens(t,va)}(e=Gn(e))}function La(e){return function(e){var t={prefixes:[],items:[]};return ga(e,t).then((function(){return t}))}(e=Gn(e))}function Ma(e,t){return Sa(e=Gn(e),t)}function Fa(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Ca(e,t,n,r)}function Ua(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new Na(r,i,a,n,Ar)}_r(new Zn(Pa,Ua,"PUBLIC").setMultipleInstances(!0)),Mr(Aa,Ra,""),Mr(Aa,Ra,"esm2017");var ja=function(){function e(t,n,r){an(this,e),this._delegate=t,this.task=n,this.ref=r}return un(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),Va=function(){function e(t,n){an(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return un(e,[{key:"snapshot",get:function(){return new ja(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new ja(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new ja(e,i,i._ref))}:{next:t.next?function(e){return t.next(new ja(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),Ba=function(){function e(t,n){an(this,e),this._delegate=t,this._service=n}return un(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new za(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new za(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),za=function(){function e(t,n){an(this,e),this._delegate=t,this.storage=n}return un(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return Ia(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new Va(Da(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ri.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=Di(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Va(new ma(this._delegate,new Fi(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return La(this._delegate).then((function(t){return new Ba(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return ba(e=Gn(e),t)}(this._delegate,e||void 0).then((function(e){return new Ba(e,t.storage)}))}},{key:"getMetadata",value:function(){return Oa(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return wa(e=Gn(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return xa(Gn(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),_a(Gn(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw vi(e)}}]),e}(),qa=function(){function e(t,n){an(this,e),this.app=t,this._delegate=n}return un(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(Ka(e))throw di("ref() expected a child path but got a URL, use refFromURL instead.");return new za(Ma(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!Ka(e))throw di("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ki.makeFromUrl(e,this._delegate.host)}catch(rR){throw di("refFromUrl() expected a valid full URL but got an invalid one.")}return new za(Ma(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Fa(this._delegate,e,t,n)}}]),e}();function Ka(e){return/^[A-Za-z]+:\/\//.test(e)}function Ga(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new qa(r,i)}function Wa(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fn(e)););return e}function Ha(){return Ha="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Wa(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ha.apply(this,arguments)}!function(e){var t={TaskState:ca,TaskEvent:sa,StringFormat:Ri,Storage:qa,Reference:za};e.INTERNAL.registerComponent(new Zn("storage-compat",Ga,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.13")}(oi);function Qa(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Ya;Object.create;var Xa="facebook.com",$a="github.com",Ja="google.com",Za="password",eo="twitter.com",to="EMAIL_SIGNIN",no="PASSWORD_RESET",ro="RECOVER_EMAIL",io="REVERT_SECOND_FACTOR_ADDITION",ao="VERIFY_AND_CHANGE_EMAIL",oo="VERIFY_EMAIL";function uo(){return d({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var so=function(){var e;return d(e={},"admin-restricted-operation","This operation is restricted to administrators only."),d(e,"argument-error",""),d(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),d(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),d(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),d(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),d(e,"cordova-not-ready","Cordova framework is not ready."),d(e,"cors-unsupported","This browser is not supported."),d(e,"credential-already-in-use","This credential is already associated with a different user account."),d(e,"custom-token-mismatch","The custom token corresponds to a different audience."),d(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),d(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),d(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),d(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),d(e,"email-already-in-use","The email address is already in use by another account."),d(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),d(e,"expired-action-code","The action code has expired."),d(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),d(e,"internal-error","An internal AuthError has occurred."),d(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),d(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),d(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),d(e,"invalid-auth-event","An internal AuthError has occurred."),d(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),d(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),d(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),d(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),d(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),d(e,"invalid-email","The email address is badly formatted."),d(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),d(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),d(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),d(e,"invalid-credential","The supplied auth credential is malformed or has expired."),d(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),d(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),d(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),d(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),d(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),d(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),d(e,"wrong-password","The password is invalid or the user does not have a password."),d(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),d(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),d(e,"invalid-provider-id","The specified provider ID is invalid."),d(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),d(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),d(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),d(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),d(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),d(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),d(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),d(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),d(e,"missing-continue-uri","A continue URL must be provided in the request."),d(e,"missing-iframe-start","An internal AuthError has occurred."),d(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),d(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),d(e,"missing-multi-factor-info","No second factor identifier is provided."),d(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),d(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),d(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),d(e,"app-deleted","This instance of FirebaseApp has been deleted."),d(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),d(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),d(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),d(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),d(e,"no-auth-event","An internal AuthError has occurred."),d(e,"no-such-provider","User was not linked to an account with the given provider."),d(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),d(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),d(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),d(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),d(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),d(e,"provider-already-linked","User can only be linked to one identity for the given provider."),d(e,"quota-exceeded","The project's quota for this operation has been exceeded."),d(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),d(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),d(e,"rejected-credential","The request contains malformed or mismatching credentials."),d(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),d(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),d(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),d(e,"timeout","The operation has timed out."),d(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),d(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),d(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),d(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),d(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),d(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),d(e,"unverified-email","The operation requires a verified email."),d(e,"user-cancelled","The user did not grant your application the permissions it requested."),d(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),d(e,"user-disabled","The user account has been disabled by an administrator."),d(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),d(e,"user-signed-out",""),d(e,"weak-password","The password must be 6 characters long or more."),d(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),d(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},co=uo,lo=new Dn("auth","Firebase",uo()),fo=new hr("@firebase/auth");function ho(e){if(fo.logLevel<=rr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];fo.error.apply(fo,["Auth (".concat(Ar,"): ").concat(e)].concat(n))}}function po(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw go.apply(void 0,[e].concat(n))}function vo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return go.apply(void 0,[e].concat(n))}function mo(e,t,n){var r=Object.assign(Object.assign({},co()),d({},t,n));return new Dn("auth","Firebase",r).create(t,{appName:e.name})}function yo(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&po(e,"argument-error"),mo(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function go(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Jn(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Jn(o)))}return lo.create.apply(lo,[e].concat(n))}function ko(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw go.apply(void 0,[t].concat(r))}}function bo(e){var t="INTERNAL ASSERTION FAILED: "+e;throw ho(t),new Error(t)}function wo(e,t){e||bo(t)}var xo=new Map;function _o(e){wo(e instanceof Function,"Expected a class definition");var t=xo.get(e);return t?(wo(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,xo.set(e,t),t)}function Io(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Eo(){return"http:"===So()||"https:"===So()}function So(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var To=function(){function e(t,n){an(this,e),this.shortDelay=t,this.longDelay=n,wo(n>t,"Short delay should be less than long delay!"),this.isMobile=Sn()||Nn()}return un(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Eo()||Cn()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Co(e,t){wo(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var No=function(){function e(){an(this,e)}return un(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void bo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void bo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void bo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Ao=(d(Ya={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),d(Ya,"MISSING_CUSTOM_TOKEN","internal-error"),d(Ya,"INVALID_IDENTIFIER","invalid-email"),d(Ya,"MISSING_CONTINUE_URI","internal-error"),d(Ya,"INVALID_PASSWORD","wrong-password"),d(Ya,"MISSING_PASSWORD","internal-error"),d(Ya,"EMAIL_EXISTS","email-already-in-use"),d(Ya,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),d(Ya,"INVALID_IDP_RESPONSE","invalid-credential"),d(Ya,"INVALID_PENDING_TOKEN","invalid-credential"),d(Ya,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),d(Ya,"MISSING_REQ_TYPE","internal-error"),d(Ya,"EMAIL_NOT_FOUND","user-not-found"),d(Ya,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),d(Ya,"EXPIRED_OOB_CODE","expired-action-code"),d(Ya,"INVALID_OOB_CODE","invalid-action-code"),d(Ya,"MISSING_OOB_CODE","internal-error"),d(Ya,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),d(Ya,"INVALID_ID_TOKEN","invalid-user-token"),d(Ya,"TOKEN_EXPIRED","user-token-expired"),d(Ya,"USER_NOT_FOUND","user-token-expired"),d(Ya,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),d(Ya,"INVALID_CODE","invalid-verification-code"),d(Ya,"INVALID_SESSION_INFO","invalid-verification-id"),d(Ya,"INVALID_TEMPORARY_PROOF","invalid-credential"),d(Ya,"MISSING_SESSION_INFO","missing-verification-id"),d(Ya,"SESSION_EXPIRED","code-expired"),d(Ya,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),d(Ya,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),d(Ya,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),d(Ya,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),d(Ya,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),d(Ya,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),d(Ya,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),d(Ya,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),d(Ya,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),d(Ya,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),d(Ya,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ya),Ro=new To(3e4,6e4);function Po(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Do(e,t,n,r){return Oo.apply(this,arguments)}function Oo(){return Oo=a(h().mark((function e(t,n,r,i){var o,u=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=u.length>4&&void 0!==u[4]?u[4]:{},e.abrupt("return",Lo(t,o,a(h().mark((function e(){var a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=jn(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",No.fetch()(jo(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Oo.apply(this,arguments)}function Lo(e,t,n){return Mo.apply(this,arguments)}function Mo(){return Mo=a(h().mark((function e(t,n,r){var i,a,o,u,s,c,f,d,p,v;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Ao),n),e.prev=2,a=new Vo(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Bo(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),f=l(c,2),d=f[0],p=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=23;break}throw Bo(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==d){e.next=25;break}throw Bo(t,"email-already-in-use",u);case 25:if(v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!p){e.next=30;break}throw mo(t,v,p);case 30:po(t,v);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof Pn)){e.next=37;break}throw e.t0;case 37:po(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),Mo.apply(this,arguments)}function Fo(e,t,n,r){return Uo.apply(this,arguments)}function Uo(){return Uo=a(h().mark((function e(t,n,r,i){var a,o,u=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Do(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&po(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Uo.apply(this,arguments)}function jo(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Co(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Vo=function(){function e(t){var n=this;an(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(vo(n.auth,"network-request-failed"))}),Ro.get())}))}return un(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Bo(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=vo(e,t,r);return i.customData._tokenResponse=n,i}function zo(e,t){return qo.apply(this,arguments)}function qo(){return qo=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),qo.apply(this,arguments)}function Ko(e,t){return Go.apply(this,arguments)}function Go(){return Go=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Go.apply(this,arguments)}function Wo(e,t){return Ho.apply(this,arguments)}function Ho(){return Ho=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Ho.apply(this,arguments)}function Qo(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(rR){}}function Yo(){return Yo=a(h().mark((function e(t){var n,r,i,a,o,u,s=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Gn(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,ko((a=$o(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Qo(Xo(a.auth_time)),issuedAtTime:Qo(Xo(a.iat)),expirationTime:Qo(Xo(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Yo.apply(this,arguments)}function Xo(e){return 1e3*Number(e)}function $o(e){var t=l(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return ho("JWT malformed, contained fewer than 3 sections"),null;try{var a=wn(r);return a?JSON.parse(a):(ho("Failed to decode base64 JWT payload"),null)}catch(rR){return ho("Caught error parsing JWT payload as JSON",rR),null}}function Jo(e,t){return Zo.apply(this,arguments)}function Zo(){return Zo=a(h().mark((function e(t,n){var r=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Pn&&eu(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Zo.apply(this,arguments)}function eu(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var tu=function(){function e(t){an(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return un(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),nu=function(){function e(t,n){an(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return un(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Qo(this.lastLoginAt),this.creationTime=Qo(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function ru(e){return iu.apply(this,arguments)}function iu(){return iu=a(h().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Jo(t,Wo(r,{idToken:i}));case 6:ko(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?uu(o.providerUserInfo):[],s=ou(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new nu(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,d);case 17:case"end":return e.stop()}}),e)}))),iu.apply(this,arguments)}function au(){return(au=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Gn(t),e.next=3,ru(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ou(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Jn(n),Jn(t))}function uu(e){return e.map((function(e){var t=e.providerId,n=Qa(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function su(e,t){return cu.apply(this,arguments)}function cu(){return cu=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lo(t,{},a(h().mark((function e(){var r,i,a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jn({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=jo(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",No.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),cu.apply(this,arguments)}var lu=function(){function e(){an(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return un(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){ko(e.idToken,"internal-error"),ko("undefined"!==typeof e.idToken,"internal-error"),ko("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=$o(e);return ko(t,"internal-error"),ko("undefined"!==typeof t.exp,"internal-error"),ko("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=a(h().mark((function e(t){var n,r=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],ko(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,su(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return bo("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(ko("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(ko("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(ko("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function fu(e,t){ko("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var hu=function(){function e(t){an(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Qa(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Jn(a.providerData):[],this.metadata=new nu(a.createdAt||void 0,a.lastLoginAt||void 0)}return un(e,[{key:"getIdToken",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jo(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(ko(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Yo.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return au.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(ko(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){ko(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=a(h().mark((function e(t){var n,r,i=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,ru(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Jo(this,zo(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;ko(k&&_,t,"internal-error");var I=lu.fromJSON(this.name,_);ko("string"===typeof k,t,"internal-error"),fu(f,t.name),fu(h,t.name),ko("boolean"===typeof b,t,"internal-error"),ko("boolean"===typeof w,t,"internal-error"),fu(d,t.name),fu(p,t.name),fu(v,t.name),fu(m,t.name),fu(y,t.name),fu(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=a(h().mark((function t(n,r){var i,a,o,u=arguments;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new lu).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,ru(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),du=function(){function e(){an(this,e),this.type="NONE",this.storage={}}return un(e,[{key:"_isAvailable",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();du.type="NONE";var pu=du;function vu(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var mu=function(){function e(t,n,r){an(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=vu(this.userKey,a.apiKey,o),this.fullPersistenceKey=vu("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return un(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?hu._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=a(h().mark((function t(n,r){var i,o,u,s,c,l,f,d,p,v,m,y=arguments;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=y.length>2&&void 0!==y[2]?y[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(_o(pu),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:o=t.sent.filter((function(e){return e})),u=o[0]||_o(pu),s=vu(i,n.config.apiKey,n.name),c=null,l=sn(r),t.prev=10,l.s();case 12:if((f=l.n()).done){t.next=29;break}return d=f.value,t.prev=14,t.next=17,d._get(s);case 17:if(!(p=t.sent)){t.next=23;break}return v=hu._fromJSON(n,p),d!==u&&(c=v),u=d,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),l.e(t.t1);case 34:return t.prev=34,l.f(),t.finish(34);case 37:if(m=o.filter((function(e){return e._shouldAllowMigration})),u._shouldAllowMigration&&m.length){t.next=40;break}return t.abrupt("return",new e(u,n,i));case 40:if(u=m[0],!c){t.next=44;break}return t.next=44,u._set(s,c.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===u){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(u,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function yu(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(wu(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(gu(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(_u(t))return"Blackberry";if(Iu(t))return"Webos";if(ku(t))return"Safari";if((t.includes("chrome/")||bu(t))&&!t.includes("edge/"))return"Chrome";if(xu(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function gu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En();return/firefox\//i.test(e)}function ku(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function bu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En();return/crios\//i.test(e)}function wu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En();return/iemobile/i.test(e)}function xu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En();return/android/i.test(e)}function _u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En();return/blackberry/i.test(e)}function Iu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En();return/webos/i.test(e)}function Eu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En();return/iphone|ipad|ipod/i.test(e)}function Su(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En();return Eu(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Tu(){return An()&&10===document.documentMode}function Cu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En();return Eu(e)||xu(e)||Iu(e)||_u(e)||/windows phone/i.test(e)||wu(e)}function Nu(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=yu(En());break;case"Worker":t="".concat(yu(En()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ar,"/").concat(r)}var Au=function(){function e(t,n,r){an(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pu(this),this.idTokenSubscription=new Pu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lo,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return un(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=_o(t)),this._initializationPromise=this.queue(a(h().mark((function r(){var i,a;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,mu.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=a(h().mark((function e(t){var n,r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return ko(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ru(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Gn(t):null)&&ko(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=a(h().mark((function e(t){var n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&ko(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(a(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(_o(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Dn("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return ko(n=t&&_o(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,mu.create(this,[_o(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=a(h().mark((function e(t){var n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ko(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return ko(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Nu(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=a(h().mark((function e(){var t,n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ru(e){return Gn(e)}var Pu=function(){function e(t){var n=this;an(this,e),this.auth=t,this.observer=null,this.addObserver=zn((function(e){return n.observer=e}))}return un(e,[{key:"next",get:function(){return ko(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Du(e,t,n){var r=Ru(e);ko(r._canInitEmulator,r,"emulator-config-failed"),ko(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Ou(t),o=function(e){var t=Ou(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Lu(r.substr(a.length+1))}}var o=l(r.split(":"),2);return{host:o[0],port:Lu(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ou(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Lu(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Mu=function(){function e(t,n){an(this,e),this.providerId=t,this.signInMethod=n}return un(e,[{key:"toJSON",value:function(){return bo("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return bo("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return bo("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return bo("not implemented")}}]),e}();function Fu(e,t){return Uu.apply(this,arguments)}function Uu(){return Uu=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(t,"POST","/v1/accounts:resetPassword",Po(t,n)));case 1:case"end":return e.stop()}}),e)}))),Uu.apply(this,arguments)}function ju(e,t){return Vu.apply(this,arguments)}function Vu(){return Vu=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Vu.apply(this,arguments)}function Bu(e,t){return zu.apply(this,arguments)}function zu(){return zu=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(t,"POST","/v1/accounts:update",Po(t,n)));case 1:case"end":return e.stop()}}),e)}))),zu.apply(this,arguments)}function qu(e,t){return Ku.apply(this,arguments)}function Ku(){return Ku=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fo(t,"POST","/v1/accounts:signInWithPassword",Po(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ku.apply(this,arguments)}function Gu(e,t){return Wu.apply(this,arguments)}function Wu(){return Wu=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(t,"POST","/v1/accounts:sendOobCode",Po(t,n)));case 1:case"end":return e.stop()}}),e)}))),Wu.apply(this,arguments)}function Hu(e,t){return Qu.apply(this,arguments)}function Qu(){return Qu=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gu(t,n));case 1:case"end":return e.stop()}}),e)}))),Qu.apply(this,arguments)}function Yu(e,t){return Xu.apply(this,arguments)}function Xu(){return Xu=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gu(t,n));case 1:case"end":return e.stop()}}),e)}))),Xu.apply(this,arguments)}function $u(e,t){return Ju.apply(this,arguments)}function Ju(){return Ju=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gu(t,n));case 1:case"end":return e.stop()}}),e)}))),Ju.apply(this,arguments)}function Zu(e,t){return es.apply(this,arguments)}function es(){return es=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gu(t,n));case 1:case"end":return e.stop()}}),e)}))),es.apply(this,arguments)}function ts(e,t){return ns.apply(this,arguments)}function ns(){return ns=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fo(t,"POST","/v1/accounts:signInWithEmailLink",Po(t,n)));case 1:case"end":return e.stop()}}),e)}))),ns.apply(this,arguments)}function rs(e,t){return is.apply(this,arguments)}function is(){return is=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fo(t,"POST","/v1/accounts:signInWithEmailLink",Po(t,n)));case 1:case"end":return e.stop()}}),e)}))),is.apply(this,arguments)}var as=function(e){ln(n,e);var t=vn(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return an(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return un(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",qu(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ts(t,{email:this._email,oobCode:this._password}));case 5:po(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ju(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",rs(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:po(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Mu);function os(e,t){return us.apply(this,arguments)}function us(){return us=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fo(t,"POST","/v1/accounts:signInWithIdp",Po(t,n)));case 1:case"end":return e.stop()}}),e)}))),us.apply(this,arguments)}var ss=function(e){ln(n,e);var t=vn(n);function n(){var e;return an(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return un(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return os(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,os(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,os(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=jn(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):po("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Qa(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Mu);function cs(e,t){return ls.apply(this,arguments)}function ls(){return ls=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(t,"POST","/v1/accounts:sendVerificationCode",Po(t,n)));case 1:case"end":return e.stop()}}),e)}))),ls.apply(this,arguments)}function fs(){return fs=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fo(t,"POST","/v1/accounts:signInWithPhoneNumber",Po(t,n)));case 1:case"end":return e.stop()}}),e)}))),fs.apply(this,arguments)}function hs(){return hs=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fo(t,"POST","/v1/accounts:signInWithPhoneNumber",Po(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Bo(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),hs.apply(this,arguments)}var ds=d({},"USER_NOT_FOUND","user-not-found");function ps(){return ps=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Fo(t,"POST","/v1/accounts:signInWithPhoneNumber",Po(t,r),ds));case 2:case"end":return e.stop()}}),e)}))),ps.apply(this,arguments)}var vs=function(e){ln(n,e);var t=vn(n);function n(e){var r;return an(this,n),(r=t.call(this,"phone","phone")).params=e,r}return un(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return fs.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return hs.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return ps.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Mu);var ms=function(){function e(t){var n,r,i,a,o,u;an(this,e);var s=Vn(Bn(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);ko(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return un(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Vn(Bn(e)).link,n=t?Vn(Bn(t)).deep_link_id:null,r=Vn(Bn(e)).deep_link_id;return(r?Vn(Bn(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(xS){return null}}}]),e}();var ys=function(){function e(){an(this,e),this.providerId=e.PROVIDER_ID}return un(e,null,[{key:"credential",value:function(e,t){return as._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ms.parseLink(t);return ko(n,"argument-error"),as._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();ys.PROVIDER_ID="password",ys.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ys.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var gs=function(){function e(t){an(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return un(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),ks=function(e){ln(n,e);var t=vn(n);function n(){var e;return an(this,n),(e=t.apply(this,arguments)).scopes=[],e}return un(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Jn(this.scopes)}}]),n}(gs),bs=function(e){ln(n,e);var t=vn(n);function n(){return an(this,n),t.apply(this,arguments)}return un(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return ko(e.idToken||e.accessToken,"argument-error"),ss._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return ko("providerId"in t&&"signInMethod"in t,"argument-error"),ss._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(rR){return null}}}]),n}(ks),ws=function(e){ln(n,e);var t=vn(n);function n(){return an(this,n),t.call(this,"facebook.com")}return un(n,null,[{key:"credential",value:function(e){return ss._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(xS){return null}}}]),n}(ks);ws.FACEBOOK_SIGN_IN_METHOD="facebook.com",ws.PROVIDER_ID="facebook.com";var xs=function(e){ln(n,e);var t=vn(n);function n(){var e;return an(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return un(n,null,[{key:"credential",value:function(e,t){return ss._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(xS){return null}}}]),n}(ks);xs.GOOGLE_SIGN_IN_METHOD="google.com",xs.PROVIDER_ID="google.com";var _s=function(e){ln(n,e);var t=vn(n);function n(){return an(this,n),t.call(this,"github.com")}return un(n,null,[{key:"credential",value:function(e){return ss._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(xS){return null}}}]),n}(ks);_s.GITHUB_SIGN_IN_METHOD="github.com",_s.PROVIDER_ID="github.com";var Is=function(e){ln(n,e);var t=vn(n);function n(e,r){var i;return an(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return un(n,[{key:"_getIdTokenResponse",value:function(e){return os(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,os(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,os(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Mu),Es=function(e){ln(n,e);var t=vn(n);function n(e){return an(this,n),ko(e.startsWith("saml."),"argument-error"),t.call(this,e)}return un(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Is.fromJSON(e);return ko(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Is._create(r,n)}catch(rR){return null}}}]),n}(gs),Ss=function(e){ln(n,e);var t=vn(n);function n(){return an(this,n),t.call(this,"twitter.com")}return un(n,null,[{key:"credential",value:function(e,t){return ss._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(xS){return null}}}]),n}(ks);function Ts(e,t){return Cs.apply(this,arguments)}function Cs(){return Cs=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fo(t,"POST","/v1/accounts:signUp",Po(t,n)));case 1:case"end":return e.stop()}}),e)}))),Cs.apply(this,arguments)}Ss.TWITTER_SIGN_IN_METHOD="twitter.com",Ss.PROVIDER_ID="twitter.com";var Ns=function(){function e(t){an(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return un(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=a(h().mark((function t(n,r,i){var a,o,u,s,c=arguments;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,hu._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=As(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=a(h().mark((function t(n,r,i){var a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=As(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function As(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Rs(){return Rs=a(h().mark((function e(t){var n,r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ru(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Ns({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Ts(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Ns._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Rs.apply(this,arguments)}var Ps=function(e){ln(n,e);var t=vn(n);function n(e,r,i,a){var o,u;return an(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(cn(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return un(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Pn);function Ds(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ps._fromErrorAndOperation(e,n,t,r);throw n}))}function Os(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Ls(e,t){return Ms.apply(this,arguments)}function Ms(){return Ms=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gn(t),e.next=3,js(!0,r,n);case 3:return e.t0=Ko,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Os(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Ms.apply(this,arguments)}function Fs(e,t){return Us.apply(this,arguments)}function Us(){return Us=a(h().mark((function e(t,n){var r,i,a=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Jo,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Ns._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Us.apply(this,arguments)}function js(e,t,n){return Vs.apply(this,arguments)}function Vs(){return(Vs=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ru(n);case 2:i=Os(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",ko(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bs(e,t){return zs.apply(this,arguments)}function zs(){return zs=a(h().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Jo(t,Ds(i,a,n,t),r);case 6:return ko((o=e.sent).idToken,i,"internal-error"),ko(u=$o(o.idToken),i,"internal-error"),s=u.sub,ko(t.uid===s,i,"user-mismatch"),e.abrupt("return",Ns._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&po(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),zs.apply(this,arguments)}function qs(e,t){return Ks.apply(this,arguments)}function Ks(){return Ks=a(h().mark((function e(t,n){var r,i,a,o,u=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Ds(t,i,n);case 4:return a=e.sent,e.next=7,Ns._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Ks.apply(this,arguments)}function Gs(e,t){return Ws.apply(this,arguments)}function Ws(){return Ws=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qs(Ru(t),n));case 1:case"end":return e.stop()}}),e)}))),Ws.apply(this,arguments)}function Hs(e,t){return Qs.apply(this,arguments)}function Qs(){return(Qs=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gn(t),e.next=3,js(!1,r,n.providerId);case 3:return e.abrupt("return",Fs(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ys(e,t){return Xs.apply(this,arguments)}function Xs(){return(Xs=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bs(Gn(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $s(e,t){return Js.apply(this,arguments)}function Js(){return Js=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fo(t,"POST","/v1/accounts:signInWithCustomToken",Po(t,n)));case 1:case"end":return e.stop()}}),e)}))),Js.apply(this,arguments)}function Zs(){return Zs=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ru(t),e.next=3,$s(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Ns._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Zs.apply(this,arguments)}var ec=function(){function e(t,n){an(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return un(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?tc._fromServerResponse(e,t):po(e,"internal-error")}}]),e}(),tc=function(e){ln(n,e);var t=vn(n);function n(e){var r;return an(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return un(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ec);function nc(e,t,n){var r;ko((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ko("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ko(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ko(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function rc(){return rc=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gn(t),a={requestType:"PASSWORD_RESET",email:n},r&&nc(i,a,r),e.next=5,Yu(i,a);case 5:case"end":return e.stop()}}),e)}))),rc.apply(this,arguments)}function ic(){return ic=a(h().mark((function e(t,n,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fu(Gn(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),ic.apply(this,arguments)}function ac(){return ac=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bu(Gn(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),ac.apply(this,arguments)}function oc(e,t){return uc.apply(this,arguments)}function uc(){return uc=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gn(t),e.next=3,Fu(r,{oobCode:n});case 3:i=e.sent,ko(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return ko(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:ko(i.mfaInfo,r,"internal-error");case 13:ko(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=ec._fromServerResponse(Ru(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),uc.apply(this,arguments)}function sc(){return sc=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oc(Gn(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),sc.apply(this,arguments)}function cc(e,t,n){return lc.apply(this,arguments)}function lc(){return lc=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ru(t),e.next=3,Ts(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Ns._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),lc.apply(this,arguments)}function fc(){return fc=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gn(t),a={requestType:"EMAIL_SIGNIN",email:n},ko(r.handleCodeInApp,i,"argument-error"),r&&nc(i,a,r),e.next=6,$u(i,a);case 6:case"end":return e.stop()}}),e)}))),fc.apply(this,arguments)}function hc(){return hc=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gn(t),ko((a=ys.credentialWithLink(n,r||Io()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Gs(i,a));case 4:case"end":return e.stop()}}),e)}))),hc.apply(this,arguments)}function dc(e,t){return pc.apply(this,arguments)}function pc(){return pc=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(t,"POST","/v1/accounts:createAuthUri",Po(t,n)));case 1:case"end":return e.stop()}}),e)}))),pc.apply(this,arguments)}function vc(){return vc=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Eo()?Io():"http://localhost",i={identifier:n,continueUri:r},e.next=4,dc(Gn(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),vc.apply(this,arguments)}function mc(){return(mc=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gn(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&nc(r.auth,a,n),e.next=8,Hu(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yc(){return(yc=a(h().mark((function e(t,n,r){var i,a,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gn(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&nc(i.auth,o,r),e.next=8,Zu(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gc(e,t){return kc.apply(this,arguments)}function kc(){return kc=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Do(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),kc.apply(this,arguments)}function bc(){return(bc=a(h().mark((function e(t,n){var r,i,a,o,u,s,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Gn(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Jo(a,gc(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wc(e,t,n){return xc.apply(this,arguments)}function xc(){return xc=a(h().mark((function e(t,n,r){var i,a,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Jo(t,ju(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),xc.apply(this,arguments)}var _c=un((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};an(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Ic=function(e){ln(n,e);var t=vn(n);function n(e,r,i,a){var o;return an(this,n),(o=t.call(this,e,r,i)).username=a,o}return un(n)}(_c),Ec=function(e){ln(n,e);var t=vn(n);function n(e,r){return an(this,n),t.call(this,e,"facebook.com",r)}return un(n)}(_c),Sc=function(e){ln(n,e);var t=vn(n);function n(e,r){return an(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return un(n)}(Ic),Tc=function(e){ln(n,e);var t=vn(n);function n(e,r){return an(this,n),t.call(this,e,"google.com",r)}return un(n)}(_c),Cc=function(e){ln(n,e);var t=vn(n);function n(e,r,i){return an(this,n),t.call(this,e,"twitter.com",r,i)}return un(n)}(Ic);function Nc(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=$o(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new _c(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Ec(a,i);case"github.com":return new Sc(a,i);case"google.com":return new Tc(a,i);case"twitter.com":return new Cc(a,i,e.screenName||null);case"custom":case"anonymous":return new _c(a,null);default:return new _c(a,r,i)}}(n)}var Ac=function(){function e(t,n){an(this,e),this.type=t,this.credential=n}return un(e,[{key:"toJSON",value:function(){return{multiFactorSession:d({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Rc=function(){function e(t,n,r){an(this,e),this.session=t,this.hints=n,this.signInResolver=r}return un(e,[{key:"resolveSignIn",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Ru(t),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map((function(e){return ec._fromServerResponse(r,e)}));ko(i.mfaPendingCredential,r,"internal-error");var u=Ac._fromMfaPendingCredential(i.mfaPendingCredential);return new e(u,o,function(){var e=a(h().mark((function e(t){var a,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,u);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,o=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Ns._fromIdTokenResponse(r,n.operationType,o);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return ko(n.user,r,"internal-error"),e.abrupt("return",Ns._forOperation(n.user,n.operationType,o));case 17:po(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Pc(e,t){return Do(e,"POST","/v2/accounts/mfaEnrollment:start",Po(e,t))}function Dc(e,t){return Do(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Po(e,t))}var Oc=function(){function e(t){var n=this;an(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return ec._fromServerResponse(t.auth,e)})))}))}return un(e,[{key:"getSession",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ac,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Jo(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=a(h().mark((function e(t){var n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Jo(this.user,Dc(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Lc=new WeakMap;var Mc="__sak",Fc=function(){function e(t,n){an(this,e),this.storageRetriever=t,this.type=n}return un(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Mc,"1"),this.storage.removeItem(Mc),Promise.resolve(!0)):Promise.resolve(!1)}catch(xS){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Uc=function(e){ln(n,e);var t=vn(n);function n(){var e;return an(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=En();return ku(e)||Eu(e)}()&&function(){try{return!(!window||window===window.top)}catch(rR){return!1}}(),e.fallbackToPolling=Cu(),e._shouldAllowMigration=!0,e}return un(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Tu()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=a(h().mark((function e(t,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ha(fn(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=a(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ha(fn(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ha(fn(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Fc);Uc.type="LOCAL";var jc=Uc,Vc=function(e){ln(n,e);var t=vn(n);function n(){return an(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return un(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Fc);Vc.type="SESSION";var Bc=Vc;function zc(e){return Promise.all(e.map(function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var qc=function(){function e(t){an(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return un(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=a(h().mark((function e(t){var n,r,i,o,u,s,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,o=r.eventType,u=r.data,null===(s=this.handlersMap[o])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:o}),c=Array.from(s).map(function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,u));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,zc(c);case 9:l=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Kc(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}qc.receivers=[];var Gc=function(){function e(t){an(this,e),this.target=t,this.handlers=new Set}return un(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=a(h().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Kc("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Wc(){return window}function Hc(){return"undefined"!==typeof Wc().WorkerGlobalScope&&"function"===typeof Wc().importScripts}function Qc(){return Yc.apply(this,arguments)}function Yc(){return(Yc=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Xc(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var $c="firebaseLocalStorageDb",Jc="firebaseLocalStorage",Zc="fbase_key",el=function(){function e(t){an(this,e),this.request=t}return un(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function tl(e,t){return e.transaction([Jc],t?"readwrite":"readonly").objectStore(Jc)}function nl(){var e=indexedDB.deleteDatabase($c);return new el(e).toPromise()}function rl(){var e=indexedDB.open($c,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Jc,{keyPath:Zc})}catch(rR){n(rR)}})),e.addEventListener("success",a(h().mark((function n(){var r;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Jc)){n.next=12;break}return r.close(),n.next=5,nl();case 5:return n.t0=t,n.next=8,rl();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function il(e,t,n){return al.apply(this,arguments)}function al(){return al=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=tl(t,!0).put((d(i={},Zc,n),d(i,"value",r),i)),e.abrupt("return",new el(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),al.apply(this,arguments)}function ol(e,t){return ul.apply(this,arguments)}function ul(){return ul=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=tl(t,!1).get(n),e.next=3,new el(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),ul.apply(this,arguments)}function sl(e,t){var n=tl(e,!0).delete(t);return new el(n).toPromise()}var cl=function(){function e(){an(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return un(e,[{key:"_openDb",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,rl();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hc()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=a(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=qc._getInstance(Hc()?self:null),this.receiver._subscribe("keyChanged",function(){var e=a(h().mark((function e(n,r){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=a(h().mark((function e(){var t,n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qc();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Gc(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Xc()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,rl();case 5:return t=e.sent,e.next=8,il(t,Mc,"1");case 8:return e.next=10,sl(t,Mc);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=a(h().mark((function e(t,n){var r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return il(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return ol(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=a(h().mark((function e(t){var n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return sl(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=a(h().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=tl(e,!1).getAll();return new el(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=sn(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();cl.type="LOCAL";var ll=cl;function fl(e,t){return Do(e,"POST","/v2/accounts/mfaSignIn:start",Po(e,t))}function hl(e){return dl.apply(this,arguments)}function dl(){return dl=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Do(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),dl.apply(this,arguments)}function pl(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=vo("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function vl(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var ml=1e12,yl=function(){function e(t){an(this,e),this.auth=t,this.counter=ml,this._widgets=new Map}return un(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new gl(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||ml;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||ml;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||ml,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),gl=function(){function e(t,n,r){var i=this;an(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;ko(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return un(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(rR){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(rR){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var kl=vl("rcb"),bl=new To(3e4,6e4),wl="https://www.google.com/recaptcha/api.js?",xl=function(){function e(){an(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Wc().grecaptcha}return un(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ko(_l(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Wc().grecaptcha):new Promise((function(r,i){var a=Wc().setTimeout((function(){i(vo(e,"network-request-failed"))}),bl.get());Wc()[kl]=function(){Wc().clearTimeout(a),delete Wc()[kl];var o=Wc().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(vo(e,"internal-error"))},pl("".concat(wl,"?").concat(jn({onload:kl,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(vo(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Wc().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function _l(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Il=function(){function e(){an(this,e)}return un(e,[{key:"load",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new yl(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),El="recaptcha",Sl={theme:"light",type:"image"},Tl=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Sl),r=arguments.length>2?arguments[2]:void 0;an(this,e),this.parameters=n,this.type=El,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ru(r),this.isInvisible="invisible"===this.parameters.size,ko("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;ko(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Il:new xl,this.validateStartingState()}return un(e,[{key:"verify",value:function(){var e=a(h().mark((function e(){var t,n,r,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(rR){return Promise.reject(rR)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){ko(!this.parameters.sitekey,this.auth,"argument-error"),ko(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ko("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Wc()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){ko(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=a(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ko(Eo()&&!Hc(),this.auth,"internal-error"),e.next=3,Cl();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,hl(this.auth);case 8:ko(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return ko(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Cl(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Nl=function(){function e(t,n){an(this,e),this.verificationId=t,this.onConfirmation=n}return un(e,[{key:"confirm",value:function(e){var t=vs._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Al(){return Al=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ru(t),e.next=3,Ol(i,n,Gn(r));case 3:return a=e.sent,e.abrupt("return",new Nl(a,(function(e){return Gs(i,e)})));case 5:case"end":return e.stop()}}),e)}))),Al.apply(this,arguments)}function Rl(e,t,n){return Pl.apply(this,arguments)}function Pl(){return(Pl=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gn(t),e.next=3,js(!1,i,"phone");case 3:return e.next=5,Ol(i.auth,n,Gn(r));case 5:return a=e.sent,e.abrupt("return",new Nl(a,(function(e){return Hs(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dl(){return(Dl=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gn(t),e.next=3,Ol(i.auth,n,Gn(r));case 3:return a=e.sent,e.abrupt("return",new Nl(a,(function(e){return Ys(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ol(e,t,n){return Ll.apply(this,arguments)}function Ll(){return Ll=a(h().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,ko("string"===typeof a,t,"argument-error"),ko(r.type===El,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return ko("enroll"===u.type,t,"internal-error"),e.next=13,Pc(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return ko("signin"===u.type,t,"internal-error"),ko(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,fl(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,cs(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,d=f.sessionInfo,e.abrupt("return",d);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Ll.apply(this,arguments)}function Ml(){return(Ml=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fs(Gn(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fl=function(){function e(t){an(this,e),this.providerId=e.PROVIDER_ID,this.auth=Ru(t)}return un(e,[{key:"verifyPhoneNumber",value:function(e,t){return Ol(this.auth,e,Gn(t))}}],[{key:"credential",value:function(e,t){return vs._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?vs._fromTokenResponse(n,r):null}}]),e}();function Ul(e,t){return t?_o(t):(ko(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Fl.PROVIDER_ID="phone",Fl.PHONE_SIGN_IN_METHOD="phone";var jl=function(e){ln(n,e);var t=vn(n);function n(e){var r;return an(this,n),(r=t.call(this,"custom","custom")).params=e,r}return un(n,[{key:"_getIdTokenResponse",value:function(e){return os(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return os(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return os(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Mu);function Vl(e){return qs(e.auth,new jl(e),e.bypassAuthState)}function Bl(e){var t=e.auth,n=e.user;return ko(n,t,"internal-error"),Bs(n,new jl(e),e.bypassAuthState)}function zl(e){return ql.apply(this,arguments)}function ql(){return ql=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,ko(r=t.user,n,"internal-error"),e.abrupt("return",Fs(r,new jl(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),ql.apply(this,arguments)}var Kl=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];an(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return un(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=a(h().mark((function t(n,r){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=a(h().mark((function e(t){var n,r,i,a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vl;case"linkViaPopup":case"linkViaRedirect":return zl;case"reauthViaPopup":case"reauthViaRedirect":return Bl;default:po(this.auth,"internal-error")}}},{key:"resolve",value:function(e){wo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){wo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Gl=new To(2e3,1e4);function Wl(e,t,n){return Hl.apply(this,arguments)}function Hl(){return Hl=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ru(t),yo(t,n,gs),a=Ul(i,r),o=new $l(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Hl.apply(this,arguments)}function Ql(){return(Ql=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yo((i=Gn(t)).auth,n,gs),a=Ul(i.auth,r),o=new $l(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yl(e,t,n){return Xl.apply(this,arguments)}function Xl(){return(Xl=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yo((i=Gn(t)).auth,n,gs),a=Ul(i.auth,r),o=new $l(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $l=function(e){ln(n,e);var t=vn(n);function n(e,r,i,a,o){var u;return an(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=cn(u),u}return un(n,[{key:"executeNotNull",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return ko(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=a(h().mark((function e(){var t,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wo(1===this.filter.length,"Popup operations only handle one event"),t=Kc(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(vo(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(vo(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(vo(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Gl.get())}()}}]),n}(Kl);$l.currentPopupAction=null;var Jl=new Map,Zl=function(e){ln(n,e);var t=vn(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return an(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return un(n,[{key:"execute",value:function(){var e=a(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Jl.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,ef(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Ha(fn(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Jl.set(this.auth._key(),t);case 21:return this.bypassAuthState||Jl.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=a(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Ha(fn(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Ha(fn(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Kl);function ef(e,t){return tf.apply(this,arguments)}function tf(){return tf=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=of(n),i=af(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),tf.apply(this,arguments)}function nf(e,t){return rf.apply(this,arguments)}function rf(){return rf=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",af(t)._set(of(n),"true"));case 1:case"end":return e.stop()}}),e)}))),rf.apply(this,arguments)}function af(e){return _o(e._redirectPersistence)}function of(e){return vu("pendingRedirect",e.config.apiKey,e.name)}function uf(e,t,n){return function(e,t,n){return sf.apply(this,arguments)}(e,t,n)}function sf(){return sf=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ru(t),yo(t,n,gs),a=Ul(i,r),e.next=5,nf(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),sf.apply(this,arguments)}function cf(e,t,n){return function(e,t,n){return lf.apply(this,arguments)}(e,t,n)}function lf(){return(lf=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yo((i=Gn(t)).auth,n,gs),a=Ul(i.auth,r),e.next=5,nf(a,i.auth);case 5:return e.next=7,yf(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ff(e,t,n){return function(e,t,n){return hf.apply(this,arguments)}(e,t,n)}function hf(){return(hf=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yo((i=Gn(t)).auth,n,gs),a=Ul(i.auth,r),e.next=5,js(!1,i,n.providerId);case 5:return e.next=7,nf(a,i.auth);case 7:return e.next=9,yf(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function df(e,t){return pf.apply(this,arguments)}function pf(){return pf=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ru(t)._initializationPromise;case 2:return e.abrupt("return",vf(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),pf.apply(this,arguments)}function vf(e,t){return mf.apply(this,arguments)}function mf(){return mf=a(h().mark((function e(t,n){var r,i,a,o,u,s=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Ru(t),a=Ul(i,n),o=new Zl(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),mf.apply(this,arguments)}function yf(e){return gf.apply(this,arguments)}function gf(){return(gf=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Kc("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kf=function(){function e(t){an(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return un(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wf(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!wf(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(vo(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bf(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(bf(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function bf(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function wf(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function xf(e){return _f.apply(this,arguments)}function _f(){return _f=a(h().mark((function e(t){var n,r=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Do(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),_f.apply(this,arguments)}var If=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ef=/^https?/;function Sf(){return Sf=a(h().mark((function e(t){var n,r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,xf(t);case 4:n=e.sent,r=n.authorizedDomains,i=sn(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Tf(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:po(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Sf.apply(this,arguments)}function Tf(e){var t=Io(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Ef.test(r))return!1;if(If.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Cf=new To(3e4,6e4);function Nf(){var e=Wc().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Jn(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Af=null;function Rf(e){return Af=Af||function(e){return new Promise((function(t,n){var r,i,a;function o(){Nf(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Nf(),n(vo(e,"network-request-failed"))},timeout:Cf.get()})}if(null===(i=null===(r=Wc().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Wc().gapi)||void 0===a?void 0:a.load)){var u=vl("iframefcb");return Wc()[u]=function(){gapi.load?o():n(vo(e,"network-request-failed"))},pl("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Af=null,e}))}(e),Af}var Pf=new To(5e3,15e3),Df={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Of=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Lf(e){var t=e.config;ko(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Co(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Ar},i=Of.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(jn(r).slice(1))}function Mf(e){return Ff.apply(this,arguments)}function Ff(){return Ff=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rf(t);case 2:return n=e.sent,ko(r=Wc().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Lf(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Df,dontclear:!0},(function(e){return new Promise(function(){var n=a(h().mark((function n(r,i){var a,o,u;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Wc().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=vo(t,"network-request-failed"),o=Wc().setTimeout((function(){i(a)}),Pf.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Ff.apply(this,arguments)}var Uf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jf="_blank",Vf="http://localhost",Bf=function(){function e(t){an(this,e),this.window=t,this.associatedEvent=null}return un(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(rR){}}}]),e}();function zf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Uf),{width:r.toString(),height:i.toString(),top:a,left:o}),c=En().toLowerCase();n&&(u=bu(c)?jf:n),gu(c)&&(t=t||Vf,s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Su(c)&&"_self"!==u)return qf(t||"",u),new Bf(null);var h=window.open(t||"",u,f);ko(h,e,"popup-blocked");try{h.focus()}catch(rR){}return new Bf(h)}function qf(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Kf="__/auth/handler",Gf="emulator/auth/handler";function Wf(e,t,n,r,i,a){ko(e.config.authDomain,e,"auth-domain-config-required"),ko(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ar,eventId:i};if(t instanceof gs){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=l(s[u],2),f=c[0],h=c[1];o[f]=h}}if(t instanceof ks){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Kf);return Co(t,Gf)}(e),"?").concat(jn(p).slice(1))}var Hf="webStorageSupport",Qf=function(){function e(){an(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bc,this._completeRedirectFn=vf}return un(e,[{key:"_openPopup",value:function(){var e=a(h().mark((function e(t,n,r,i){var a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wo(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Wf(t,n,r,Io(),i),e.abrupt("return",zf(t,o,Kc()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=a(h().mark((function e(t,n,r,i){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Wf(t,n,r,Io(),i),Wc().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(wo(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mf(t);case 2:return n=e.sent,r=new kf(t),n.register("authEvent",(function(e){return ko(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Hf,{type:Hf},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),po(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Sf.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Cu()||ku()||Eu()}}]),e}(),Yf=Qf,Xf=function(){function e(t){an(this,e),this.factorId=t}return un(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return bo("unexpected MultiFactorSessionType")}}}]),e}(),$f=function(e){ln(n,e);var t=vn(n);function n(e){var r;return an(this,n),(r=t.call(this,"phone")).credential=e,r}return un(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Do(e,"POST","/v2/accounts/mfaEnrollment:finalize",Po(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Do(e,"POST","/v2/accounts/mfaSignIn:finalize",Po(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Xf),Jf=function(){function e(){an(this,e)}return un(e,null,[{key:"assertion",value:function(e){return $f._fromCredential(e)}}]),e}();Jf.FACTOR_ID="phone";var Zf,eh="@firebase/auth",th="0.19.12",nh=function(){function e(t){an(this,e),this.auth=t,this.internalListeners=new Map}return un(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){ko(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function rh(){return window}Zf="Browser",_r(new Zn("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){ko(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),ko(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Zf,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Nu(Zf)},i=new Au(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_o);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),_r(new Zn("auth-internal",(function(e){return function(e){return new nh(e)}(Ru(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Mr(eh,th,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Zf)),Mr(eh,th,"esm2017");function ih(e,t,n){return ah.apply(this,arguments)}function ah(){return ah=a(h().mark((function e(t,n,r){var i,a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=rh(),o=a.BuildInfo,wo(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,fh(n.sessionId);case 4:return u=e.sent,s={},Eu()?s.ibi=o.packageName:xu()?s.apn=o.packageName:po(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Wf(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),ah.apply(this,arguments)}function oh(){return oh=a(h().mark((function e(t){var n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=rh(),r=n.BuildInfo,i={},Eu()?i.iosBundleId=r.packageName:xu()?i.androidPackageName=r.packageName:po(t,"operation-not-supported-in-this-environment"),e.next=5,xf(t,i);case 5:case"end":return e.stop()}}),e)}))),oh.apply(this,arguments)}function uh(e){var t=rh().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function sh(e,t,n){return ch.apply(this,arguments)}function ch(){return ch=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=rh(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(vo(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),xu()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),ch.apply(this,arguments)}function lh(e){var t,n,r,i,a,o,u,s,c,l,f=rh();ko("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ko("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ko("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ko("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ko("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function fh(e){return hh.apply(this,arguments)}function hh(){return(hh=a(h().mark((function e(t){var n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=dh(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dh(e){if(wo(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var ph=function(e){ln(n,e);var t=vn(n);function n(){var e;return an(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return un(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Ha(fn(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(kf);function vh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:bh(),postBody:null,tenantId:e.tenantId,error:vo(e,"no-auth-event")}}function mh(e,t){return wh()._set(xh(e),t)}function yh(e){return gh.apply(this,arguments)}function gh(){return gh=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wh()._get(xh(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,wh()._remove(xh(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),gh.apply(this,arguments)}function kh(e,t){var n,r,i=function(e){var t=_h(e),n=t.link?decodeURIComponent(t.link):void 0,r=_h(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return _h(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=_h(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(rR){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?vo(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function bh(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function wh(){return _o(jc)}function xh(e){return vu("authEvent",e.config.apiKey,e.name)}function _h(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=o(t=n)||$n(t)||s(t)||c();r[0];return Vn(r.slice(1).join("?"))}var Ih=function(){function e(){an(this,e),this._redirectPersistence=Bc,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=vf}return un(e,[{key:"_initialize",value:function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new ph(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){po(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=a(h().mark((function e(t,n,r,i){var a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lh(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Jl.clear(),e.next=10,this._originValidation(t);case 10:return o=vh(t,r,i),e.next=13,mh(t,o);case 13:return e.next=15,ih(t,o,n);case 15:return u=e.sent,e.next=18,uh(u);case 18:return s=e.sent,e.abrupt("return",sh(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return oh.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=rh(),r=n.universalLinks,i=n.handleOpenURL,o=n.BuildInfo,u=setTimeout(a(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,yh(e);case 2:t.onEvent(Sh());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=a(h().mark((function n(r){var i,a;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(u),n.next=3,yh(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=kh(i,r.url)),t.onEvent(a||Sh());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var c=i,l="".concat(o.packageName.toLowerCase(),"://");rh().handleOpenURL=function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(l)&&s({url:t}),"function"===typeof c)try{c(t)}catch(rR){console.error(rR)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Eh=Ih;function Sh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:vo("no-auth-event")}}function Th(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Ch(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En();return!("file:"!==Th()&&"ionic:"!==Th()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Nh(){return An()&&11===(null===document||void 0===document?void 0:document.documentMode)}function Ah(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En();return/Edge\/\d+/.test(e)}function Rh(){try{var e=self.localStorage,t=Kc();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En();return Nh()||Ah(e)}()||Rn()}catch(rR){return Ph()&&Rn()}return!1}function Ph(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Dh(){return("http:"===Th()||"https:"===Th()||Cn()||Ch())&&!(Nn()||Tn())&&Rh()&&!Ph()}function Oh(){return Ch()&&"undefined"!==typeof document}function Lh(){return Mh.apply(this,arguments)}function Mh(){return(Mh=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Oh()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fh={LOCAL:"local",NONE:"none",SESSION:"session"},Uh=ko,jh="persistence";function Vh(e,t){Uh(Object.values(Fh).includes(t),e,"invalid-persistence-type"),Nn()?Uh(t!==Fh.SESSION,e,"unsupported-persistence-type"):Tn()?Uh(t===Fh.NONE,e,"unsupported-persistence-type"):Ph()?Uh(t===Fh.NONE||t===Fh.LOCAL&&Rn(),e,"unsupported-persistence-type"):Uh(t===Fh.NONE||Rh(),e,"unsupported-persistence-type")}function Bh(e){return zh.apply(this,arguments)}function zh(){return zh=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=qh(),r=vu(jh,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),zh.apply(this,arguments)}function qh(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(rR){return null}}var Kh=ko,Gh=function(){function e(){an(this,e),this.browserResolver=_o(Yf),this.cordovaResolver=_o(Eh),this.underlyingResolver=null,this._redirectPersistence=Bc,this._completeRedirectFn=vf}return un(e,[{key:"_initialize",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=a(h().mark((function e(t,n,r,i){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=a(h().mark((function e(t,n,r,i){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Oh()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Kh(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Lh();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Wh(e){return e.unwrap()}function Hh(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Jh(e,function(e,t){var n,r=Gn(e),i=t;return ko(t.customData.operationType,r,"argument-error"),ko(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Rc._fromError(r,i)}(e,t));else if(r){var i=Qh(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Qh(e){var t=(e instanceof Pn?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Pn)&&"temporaryProof"in t&&"phoneNumber"in t)return Fl.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Za)return null;switch(r){case Ja:n=xs;break;case Xa:n=ws;break;case $a:n=_s;break;case eo:n=Ss;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Is._create(r,u):ss._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new bs(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Pn?n.credentialFromError(e):n.credentialFromResult(e)}function Yh(e,t){return t.catch((function(t){throw t instanceof Pn&&Hh(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Qh(t)),additionalUserInfo:Nc(e),user:Zh.getOrCreate(r)}}))}function Xh(e,t){return $h.apply(this,arguments)}function $h(){return $h=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Yh(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),$h.apply(this,arguments)}var Jh=function(){function e(t,n){an(this,e),this.resolver=n,this.auth=t.wrapped()}return un(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Yh(Wh(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Zh=function(){function e(t){an(this,e),this._delegate=t,this.multiFactor=function(e){var t=Gn(e);return Lc.has(t)||Lc.set(t,Oc._fromUser(t)),Lc.get(t)}(t)}return un(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yh(this.auth,Hs(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xh(this.auth,Rl(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yh(this.auth,Yl(this._delegate,t,Gh)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bh(Ru(this.auth));case 2:return e.abrupt("return",ff(this._delegate,t,Gh));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yh(this.auth,Ys(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Xh(this.auth,function(e,t,n){return Dl.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Yh(this.auth,function(e,t,n){return Ql.apply(this,arguments)}(this._delegate,e,Gh))}},{key:"reauthenticateWithRedirect",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bh(Ru(this.auth));case 2:return e.abrupt("return",cf(this._delegate,t,Gh));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return mc.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ls(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return wc(Gn(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return wc(Gn(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Ml.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return bc.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return yc.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Zh.USER_MAP=new WeakMap;var ed=ko,td=function(){function e(t,n){if(an(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;ed(r,"invalid-api-key",{appName:t.name}),ed(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Gh:void 0;this._delegate=n.initialize({options:{persistence:rd(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(so),this.linkUnderlyingAuth()}return un(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Zh.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Du(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return ac.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return oc(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return ic.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yh(this._delegate,cc(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return vc.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=ms.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ed(Dh(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,df(this._delegate,Gh);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Yh(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Ru(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=nd(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=nd(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return fc.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return rc.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Vh(this._delegate,t),e.t0=t,e.next=e.t0===Fh.SESSION?4:e.t0===Fh.LOCAL?6:e.t0===Fh.NONE?11:13;break;case 4:return n=Bc,e.abrupt("break",14);case 6:return e.next=8,_o(ll)._isAvailable();case 8:return r=e.sent,n=r?ll:jc,e.abrupt("break",14);case 11:return n=pu,e.abrupt("break",14);case 13:return e.abrupt("return",po("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Yh(this._delegate,function(e){return Rs.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Yh(this._delegate,Gs(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Yh(this._delegate,function(e,t){return Zs.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Yh(this._delegate,function(e,t,n){return Gs(Gn(e),ys.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Yh(this._delegate,function(e,t,n){return hc.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Xh(this._delegate,function(e,t,n){return Al.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ed(Dh(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Yh(this._delegate,Wl(this._delegate,t,Gh)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ed(Dh(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Bh(this._delegate);case 3:return e.abrupt("return",uf(this._delegate,t,Gh));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return sc.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function nd(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Zh.getOrCreate(e))},error:t,complete:n}}function rd(e,t){var n=function(e,t){var n=qh();if(!n)return[];var r=vu(jh,e,t);switch(n.getItem(r)){case Fh.NONE:return[pu];case Fh.LOCAL:return[ll,Bc];case Fh.SESSION:return[Bc];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(ll)||n.push(ll),"undefined"!==typeof window)for(var r=0,i=[jc,Bc];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(pu)||n.push(pu),n}td.Persistence=Fh;var id=function(){function e(){an(this,e),this.providerId="phone",this._delegate=new Fl(Wh(oi.auth()))}return un(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Fl.credential(e,t)}}]),e}();id.PHONE_SIGN_IN_METHOD=Fl.PHONE_SIGN_IN_METHOD,id.PROVIDER_ID=Fl.PROVIDER_ID;var ad,od=ko,ud=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oi.app();an(this,e),od(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Tl(t,n,i.auth()),this.type=this._delegate.type}return un(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(ad=oi).INTERNAL.registerComponent(new Zn("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new td(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:to,PASSWORD_RESET:no,RECOVER_EMAIL:ro,REVERT_SECOND_FACTOR_ADDITION:io,VERIFY_AND_CHANGE_EMAIL:ao,VERIFY_EMAIL:oo}},EmailAuthProvider:ys,FacebookAuthProvider:ws,GithubAuthProvider:_s,GoogleAuthProvider:xs,OAuthProvider:bs,SAMLAuthProvider:Es,PhoneAuthProvider:id,PhoneMultiFactorGenerator:Jf,RecaptchaVerifier:ud,TwitterAuthProvider:Ss,Auth:td,AuthCredential:Mu,Error:Pn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ad.registerVersion("@firebase/auth-compat","0.2.12");var sd,cd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ld={},fd=fd||{},hd=cd||self;function dd(){}function pd(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function vd(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var md="closure_uid_"+(1e9*Math.random()>>>0),yd=0;function gd(e,t,n){return e.call.apply(e.bind,arguments)}function kd(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function bd(e,t,n){return(bd=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gd:kd).apply(null,arguments)}function wd(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function xd(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function _d(){this.s=this.s,this.o=this.o}var Id={};_d.prototype.s=!1,_d.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,md)&&e[md]||(e[md]=++yd)}(this);delete Id[e]}},_d.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ed=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Sd=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Td(e){return Array.prototype.concat.apply([],arguments)}function Cd(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Nd(e){return/^[\s\xa0]*$/.test(e)}var Ad,Rd=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Pd(e,t){return-1!=e.indexOf(t)}function Dd(e,t){return e<t?-1:e>t?1:0}e:{var Od=hd.navigator;if(Od){var Ld=Od.userAgent;if(Ld){Ad=Ld;break e}}Ad=""}function Md(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Fd(e){var t={};for(var n in e)t[n]=e[n];return t}var Ud="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function jd(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Ud.length;a++)n=Ud[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Vd(e){return Vd[" "](e),e}Vd[" "]=dd;var Bd,zd=Pd(Ad,"Opera"),qd=Pd(Ad,"Trident")||Pd(Ad,"MSIE"),Kd=Pd(Ad,"Edge"),Gd=Kd||qd,Wd=Pd(Ad,"Gecko")&&!(Pd(Ad.toLowerCase(),"webkit")&&!Pd(Ad,"Edge"))&&!(Pd(Ad,"Trident")||Pd(Ad,"MSIE"))&&!Pd(Ad,"Edge"),Hd=Pd(Ad.toLowerCase(),"webkit")&&!Pd(Ad,"Edge");function Qd(){var e=hd.document;return e?e.documentMode:void 0}e:{var Yd="",Xd=function(){var e=Ad;return Wd?/rv:([^\);]+)(\)|;)/.exec(e):Kd?/Edge\/([\d\.]+)/.exec(e):qd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Hd?/WebKit\/(\S+)/.exec(e):zd?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Xd&&(Yd=Xd?Xd[1]:""),qd){var $d=Qd();if(null!=$d&&$d>parseFloat(Yd)){Bd=String($d);break e}}Bd=Yd}var Jd,Zd={};function ep(){return function(e){var t=Zd;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Rd(String(Bd)).split("."),n=Rd("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Dd(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Dd(0==a[2].length,0==o[2].length)||Dd(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(hd.document&&qd){var tp=Qd();Jd=tp||(parseInt(Bd,10)||void 0)}else Jd=void 0;var np=Jd,rp=function(){if(!hd.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{hd.addEventListener("test",dd,t),hd.removeEventListener("test",dd,t)}catch(n){}return e}();function ip(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function ap(e,t){if(ip.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Wd){e:{try{Vd(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:op[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ap.Z.h.call(this)}}ip.prototype.h=function(){this.defaultPrevented=!0},xd(ap,ip);var op={2:"touch",3:"pen",4:"mouse"};ap.prototype.h=function(){ap.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var up="closure_listenable_"+(1e6*Math.random()|0),sp=0;function cp(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++sp,this.ca=this.fa=!1}function lp(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function fp(e){this.src=e,this.g={},this.h=0}function hp(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Ed(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(lp(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function dp(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}fp.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=dp(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new cp(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var pp="closure_lm_"+(1e6*Math.random()|0),vp={};function mp(e,t,n,r,i){if(r&&r.once)return gp(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)mp(e,t[a],n,r,i);return null}return n=Ep(n),e&&e[up]?e.N(t,n,vd(r)?!!r.capture:!!r,i):yp(e,t,n,!1,r,i)}function yp(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=vd(i)?!!i.capture:!!i,u=_p(e);if(u||(e[pp]=u=new fp(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=xp;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)rp||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(wp(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function gp(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)gp(e,t[a],n,r,i);return null}return n=Ep(n),e&&e[up]?e.O(t,n,vd(r)?!!r.capture:!!r,i):yp(e,t,n,!0,r,i)}function kp(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)kp(e,t[a],n,r,i);else r=vd(r)?!!r.capture:!!r,n=Ep(n),e&&e[up]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=dp(a=e.g[t],n,r,i))&&(lp(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=_p(e))&&(t=e.g[t.toString()],e=-1,t&&(e=dp(t,n,r,i)),(n=-1<e?t[e]:null)&&bp(n))}function bp(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[up])hp(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(wp(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=_p(t))?(hp(n,e),0==n.h&&(n.src=null,t[pp]=null)):lp(e)}}}function wp(e){return e in vp?vp[e]:vp[e]="on"+e}function xp(e,t){if(e.ca)e=!0;else{t=new ap(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&bp(e),e=n.call(r,t)}return e}function _p(e){return(e=e[pp])instanceof fp?e:null}var Ip="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ep(e){return"function"===typeof e?e:(e[Ip]||(e[Ip]=function(t){return e.handleEvent(t)}),e[Ip])}function Sp(){_d.call(this),this.i=new fp(this),this.P=this,this.I=null}function Tp(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new ip(t,e);else if(t instanceof ip)t.target=t.target||e;else{var i=t;jd(t=new ip(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Cp(o,r,!0,t)&&i}if(i=Cp(o=t.g=e,r,!0,t)&&i,i=Cp(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Cp(o=t.g=n[a],r,!1,t)&&i}function Cp(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&hp(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}xd(Sp,_d),Sp.prototype[up]=!0,Sp.prototype.removeEventListener=function(e,t,n,r){kp(this,e,t,n,r)},Sp.prototype.M=function(){if(Sp.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)lp(n[r]);delete t.g[e],t.h--}}this.I=null},Sp.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Sp.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Np=hd.JSON.stringify;function Ap(){var e=Up,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Rp,Pp=function(){function e(){an(this,e),this.h=this.g=null}return un(e,[{key:"add",value:function(e,t){var n=Dp.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Dp=new(function(){function e(t,n){an(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return un(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Op}),(function(e){return e.reset()})),Op=function(){function e(){an(this,e),this.next=this.g=this.h=null}return un(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Lp(e){hd.setTimeout((function(){throw e}),0)}function Mp(e,t){Rp||function(){var e=hd.Promise.resolve(void 0);Rp=function(){e.then(jp)}}(),Fp||(Rp(),Fp=!0),Up.add(e,t)}var Fp=!1,Up=new Pp;function jp(){for(var e;e=Ap();){try{e.h.call(e.g)}catch(n){Lp(n)}var t=Dp;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Fp=!1}function Vp(e,t){Sp.call(this),this.h=e||1,this.g=t||hd,this.j=bd(this.kb,this),this.l=Date.now()}function Bp(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function zp(e,t,n){if("function"===typeof e)n&&(e=bd(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=bd(e.handleEvent,e)}return 2147483647<Number(t)?-1:hd.setTimeout(e,t||0)}function qp(e){e.g=zp((function(){e.g=null,e.i&&(e.i=!1,qp(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}xd(Vp,Sp),(sd=Vp.prototype).da=!1,sd.S=null,sd.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Tp(this,"tick"),this.da&&(Bp(this),this.start()))}},sd.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},sd.M=function(){Vp.Z.M.call(this),Bp(this),delete this.g};var Kp=function(e){ln(n,e);var t=vn(n);function n(e,r){var i;return an(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return un(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:qp(this)}},{key:"M",value:function(){Ha(fn(n.prototype),"M",this).call(this),this.g&&(hd.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(_d);function Gp(e){_d.call(this),this.h=e,this.g={}}xd(Gp,_d);var Wp=[];function Hp(e,t,n,r){Array.isArray(n)||(n&&(Wp[0]=n.toString()),n=Wp);for(var i=0;i<n.length;i++){var a=mp(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Qp(e){Md(e.g,(function(e,t){this.g.hasOwnProperty(t)&&bp(e)}),e),e.g={}}function Yp(){this.g=!0}function Xp(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Np(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Gp.prototype.M=function(){Gp.Z.M.call(this),Qp(this)},Gp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Yp.prototype.Aa=function(){this.g=!1},Yp.prototype.info=function(){};var $p={},Jp=null;function Zp(){return Jp=Jp||new Sp}function ev(e){ip.call(this,$p.Ma,e)}function tv(e){var t=Zp();Tp(t,new ev(t,e))}function nv(e,t){ip.call(this,$p.STAT_EVENT,e),this.stat=t}function rv(e){var t=Zp();Tp(t,new nv(t,e))}function iv(e,t){ip.call(this,$p.Na,e),this.size=t}function av(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return hd.setTimeout((function(){e()}),t)}$p.Ma="serverreachability",xd(ev,ip),$p.STAT_EVENT="statevent",xd(nv,ip),$p.Na="timingevent",xd(iv,ip);var ov={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},uv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function sv(){}function cv(e){return e.h||(e.h=e.i())}function lv(){}sv.prototype.h=null;var fv,hv={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function dv(){ip.call(this,"d")}function pv(){ip.call(this,"c")}function vv(){}function mv(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Gp(this),this.P=gv,e=Gd?125:void 0,this.W=new Vp(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new yv}function yv(){this.i=null,this.g="",this.h=!1}xd(dv,ip),xd(pv,ip),xd(vv,sv),vv.prototype.g=function(){return new XMLHttpRequest},vv.prototype.i=function(){return{}},fv=new vv;var gv=45e3,kv={},bv={};function wv(e,t,n){e.K=1,e.v=Kv(Uv(t)),e.s=n,e.U=!0,xv(e,null)}function xv(e,t){e.F=Date.now(),Sv(e),e.A=Uv(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),rm(n.h,"t",r),e.C=0,n=e.l.H,e.h=new yv,e.g=ay(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Kp(bd(e.Ia,e,e.g),e.O)),Hp(e.V,e.g,"readystatechange",e.gb),t=e.H?Fd(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),tv(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function _v(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Iv(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Ev(e,n))==bv){4==t&&(e.o=4,rv(14),i=!1),Xp(e.j,e.m,null,"[Incomplete Response]");break}if(r==kv){e.o=4,rv(15),Xp(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Xp(e.j,e.m,r,null),Rv(e,r)}_v(e)&&r!=bv&&r!=kv&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,rv(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),$m(t),t.L=!0,rv(11))):(Xp(e.j,e.m,n,"[Invalid Chunked Response]"),Av(e),Nv(e))}function Ev(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?bv:(n=Number(t.substring(n,r)),isNaN(n)?kv:(r+=1)+n>t.length?bv:(t=t.substr(r,n),e.C=r+n,t))}function Sv(e){e.Y=Date.now()+e.P,Tv(e,e.P)}function Tv(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=av(bd(e.eb,e),t)}function Cv(e){e.B&&(hd.clearTimeout(e.B),e.B=null)}function Nv(e){0==e.l.G||e.I||ey(e.l,e)}function Av(e){Cv(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Bp(e.W),Qp(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Rv(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||fm(n.i,e)))if(n.I=e.N,!e.J&&fm(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Zm(n),zm(n)}Xm(n),rv(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=av(bd(n.ab,n),6e3));if(1>=lm(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else ny(n,11)}else if((e.J||n.g==e)&&Zm(n),!Nd(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(Pd(l,"spdy")||Pd(l,"quic")||Pd(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(hm(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,qv(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=iy(r,r.H?r.la:null,r.W),d.J){dm(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Cv(p),Sv(p)),r.g=d}else Ym(r);0<n.l.length&&Gm(n)}else"stop"!=a[0]&&"close"!=a[0]||ny(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?ny(n,7):Bm(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}tv(4)}catch(a){}}function Pv(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(pd(e)||"string"===typeof e)Sd(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(pd(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(pd(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Dv(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Dv)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Ov(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Lv(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Lv(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Lv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(sd=mv.prototype).setTimeout=function(e){this.P=e},sd.gb=function(e){e=e.target;var t=this.L;t&&3==Mm(e)?t.l():this.Ia(e)},sd.Ia=function(e){try{if(e==this.g)e:{var t=Mm(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Gd||this.g&&(this.h.h||this.g.ga()||Fm(this.g)))){this.I||4!=t||7==n||tv(8==n||0>=r?3:2),Cv(this);var i=this.g.ba();this.N=i;t:if(_v(this)){var a=Fm(this.g);e="";var o=a.length,u=4==Mm(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Av(this),Nv(this);var s="";break t}this.h.i=new hd.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Nd(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,rv(12),Av(this),Nv(this);break e}Xp(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Rv(this,i)}this.U?(Iv(this,t,s),Gd&&this.i&&3==t&&(Hp(this.V,this.W,"tick",this.fb),this.W.start())):(Xp(this.j,this.m,s,null),Rv(this,s)),4==t&&Av(this),this.i&&!this.I&&(4==t?ey(this.l,this):(this.i=!1,Sv(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,rv(12)):(this.o=0,rv(13)),Av(this),Nv(this)}}}catch(t){}},sd.fb=function(){if(this.g){var e=Mm(this.g),t=this.g.ga();this.C<t.length&&(Cv(this),Iv(this,e,t),this.i&&4!=e&&Sv(this))}},sd.cancel=function(){this.I=!0,Av(this)},sd.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(tv(3),rv(17)),Av(this),this.o=2,Nv(this)):Tv(this,this.Y-e)},(sd=Dv.prototype).R=function(){Ov(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},sd.T=function(){return Ov(this),this.g.concat()},sd.get=function(e,t){return Lv(this.h,e)?this.h[e]:t},sd.set=function(e,t){Lv(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},sd.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Mv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fv(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Fv){this.g=void 0!==t?t:e.g,jv(this,e.j),this.s=e.s,Vv(this,e.i),Bv(this,e.m),this.l=e.l,t=e.h;var n=new Zv;n.i=t.i,t.g&&(n.g=new Dv(t.g),n.h=t.h),zv(this,n),this.o=e.o}else e&&(n=String(e).match(Mv))?(this.g=!!t,jv(this,n[1]||"",!0),this.s=Gv(n[2]||""),Vv(this,n[3]||"",!0),Bv(this,n[4]),this.l=Gv(n[5]||"",!0),zv(this,n[6]||"",!0),this.o=Gv(n[7]||"")):(this.g=!!t,this.h=new Zv(null,this.g))}function Uv(e){return new Fv(e)}function jv(e,t,n){e.j=n?Gv(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Vv(e,t,n){e.i=n?Gv(t,!0):t}function Bv(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function zv(e,t,n){t instanceof Zv?(e.h=t,function(e,t){t&&!e.j&&(em(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(tm(this,t),rm(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Wv(t,$v)),e.h=new Zv(t,e.g))}function qv(e,t,n){e.h.set(t,n)}function Kv(e){return qv(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Gv(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Wv(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Hv),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Hv(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Fv.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Wv(t,Qv,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Wv(t,Qv,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Wv(n,"/"==n.charAt(0)?Xv:Yv,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Wv(n,Jv)),e.join("")};var Qv=/[#\/\?@]/g,Yv=/[#\?:]/g,Xv=/[#\?]/g,$v=/[#\?@]/g,Jv=/#/g;function Zv(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function em(e){e.g||(e.g=new Dv,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function tm(e,t){em(e),t=im(e,t),Lv(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Lv((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Ov(e)))}function nm(e,t){return em(e),t=im(e,t),Lv(e.g.h,t)}function rm(e,t,n){tm(e,t),0<n.length&&(e.i=null,e.g.set(im(e,t),Cd(n)),e.h+=n.length)}function im(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(sd=Zv.prototype).add=function(e,t){em(this),this.i=null,e=im(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},sd.forEach=function(e,t){em(this),this.g.forEach((function(n,r){Sd(n,(function(n){e.call(t,n,r,this)}),this)}),this)},sd.T=function(){em(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},sd.R=function(e){em(this);var t=[];if("string"===typeof e)nm(this,e)&&(t=Td(t,this.g.get(im(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Td(t,e[n])}return t},sd.set=function(e,t){return em(this),this.i=null,nm(this,e=im(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},sd.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},sd.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var am=un((function e(t,n){an(this,e),this.h=t,this.g=n}));function om(e){this.l=e||sm,hd.PerformanceNavigationTiming?e=0<(e=hd.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(hd.g&&hd.g.Ea&&hd.g.Ea()&&hd.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var um,sm=10;function cm(e){return!!e.h||!!e.g&&e.g.size>=e.j}function lm(e){return e.h?1:e.g?e.g.size:0}function fm(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function hm(e,t){e.g?e.g.add(t):e.h=t}function dm(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function pm(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=sn(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Cd(e.i)}function vm(){}function mm(){this.g=new vm}function ym(e,t,n){var r=n||"";try{Pv(e,(function(e,n){var i=e;vd(e)&&(i=Np(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(rR){throw t.push(r+"type="+encodeURIComponent("_badmap")),rR}}function gm(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function km(e){this.l=e.$b||null,this.j=e.ib||!1}function bm(e,t){Sp.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=wm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}om.prototype.cancel=function(){if(this.i=pm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=sn(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},vm.prototype.stringify=function(e){return hd.JSON.stringify(e,void 0)},vm.prototype.parse=function(e){return hd.JSON.parse(e,void 0)},xd(km,sv),km.prototype.g=function(){return new bm(this.l,this.j)},km.prototype.i=(um={},function(){return um}),xd(bm,Sp);var wm=0;function xm(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function _m(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Im(e)}function Im(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(sd=bm.prototype).open=function(e,t){if(this.readyState!=wm)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Im(this)},sd.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||hd).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},sd.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_m(this)),this.readyState=wm},sd.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Im(this)),this.g&&(this.readyState=3,Im(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof hd.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xm(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},sd.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?_m(this):Im(this),3==this.readyState&&xm(this)}},sd.Ua=function(e){this.g&&(this.response=this.responseText=e,_m(this))},sd.Ta=function(e){this.g&&(this.response=e,_m(this))},sd.ha=function(){this.g&&_m(this)},sd.setRequestHeader=function(e,t){this.v.append(e,t)},sd.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},sd.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(bm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Em=hd.JSON.parse;function Sm(e){Sp.call(this),this.headers=new Dv,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Tm,this.K=this.L=!1}xd(Sm,Sp);var Tm="",Cm=/^https?$/i,Nm=["POST","PUT"];function Am(e){return"content-type"==e.toLowerCase()}function Rm(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Pm(e),Om(e)}function Pm(e){e.D||(e.D=!0,Tp(e,"complete"),Tp(e,"error"))}function Dm(e){if(e.h&&"undefined"!=typeof fd&&(!e.C[1]||4!=Mm(e)||2!=e.ba()))if(e.v&&4==Mm(e))zp(e.Fa,0,e);else if(Tp(e,"readystatechange"),4==Mm(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Mv)[1]||null;if(!a&&hd.self&&hd.self.location){var o=hd.self.location.protocol;a=o.substr(0,o.length-1)}i=!Cm.test(a?a.toLowerCase():"")}t=i}if(t)Tp(e,"complete"),Tp(e,"success");else{e.m=6;try{var u=2<Mm(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Pm(e)}}finally{Om(e)}}}function Om(e,t){if(e.g){Lm(e);var n=e.g,r=e.C[0]?dd:null;e.g=null,e.C=null,t||Tp(e,"ready");try{n.onreadystatechange=r}catch(rR){}}}function Lm(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(hd.clearTimeout(e.A),e.A=null)}function Mm(e){return e.g?e.g.readyState:0}function Fm(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Tm:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Um(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Md(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):qv(e,t,n))}function jm(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Vm(e){this.za=0,this.l=[],this.h=new Yp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=jm("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=jm("baseRetryDelayMs",5e3,e),this.$a=jm("retryDelaySeedMs",1e4,e),this.Ya=jm("forwardChannelMaxRetries",2,e),this.ra=jm("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new om(e&&e.concurrentRequestLimit),this.Ca=new mm,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Bm(e){if(qm(e),3==e.G){var t=e.V++,n=Uv(e.F);qv(n,"SID",e.J),qv(n,"RID",t),qv(n,"TYPE","terminate"),Hm(e,n),(t=new mv(e,e.h,t,void 0)).K=2,t.v=Kv(Uv(n)),n=!1,hd.navigator&&hd.navigator.sendBeacon&&(n=hd.navigator.sendBeacon(t.v.toString(),"")),!n&&hd.Image&&((new Image).src=t.v,n=!0),n||(t.g=ay(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Sv(t)}ry(e)}function zm(e){e.g&&($m(e),e.g.cancel(),e.g=null)}function qm(e){zm(e),e.u&&(hd.clearTimeout(e.u),e.u=null),Zm(e),e.i.cancel(),e.m&&("number"===typeof e.m&&hd.clearTimeout(e.m),e.m=null)}function Km(e,t){e.l.push(new am(e.Za++,t)),3==e.G&&Gm(e)}function Gm(e){cm(e.i)||e.m||(e.m=!0,Mp(e.Ha,e),e.C=0)}function Wm(e,t){var n;n=t?t.m:e.V++;var r=Uv(e.F);qv(r,"SID",e.J),qv(r,"RID",n),qv(r,"AID",e.U),Hm(e,r),e.o&&e.s&&Um(r,e.o,e.s),n=new mv(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Qm(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),hm(e.i,n),wv(n,r,t)}function Hm(e,t){e.j&&Pv({},(function(e,n){qv(t,n,e)}))}function Qm(e,t,n){n=Math.min(e.l.length,n);var r=e.j?bd(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{ym(l,o,"req"+c+"_")}catch(Dy){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Ym(e){e.g||e.u||(e.Y=1,Mp(e.Ga,e),e.A=0)}function Xm(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=av(bd(e.Ga,e),ty(e,e.A)),e.A++,!0)}function $m(e){null!=e.B&&(hd.clearTimeout(e.B),e.B=null)}function Jm(e){e.g=new mv(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Uv(e.oa);qv(t,"RID","rpc"),qv(t,"SID",e.J),qv(t,"CI",e.N?"0":"1"),qv(t,"AID",e.U),Hm(e,t),qv(t,"TYPE","xmlhttp"),e.o&&e.s&&Um(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Kv(Uv(t)),n.s=null,n.U=!0,xv(n,e)}function Zm(e){null!=e.v&&(hd.clearTimeout(e.v),e.v=null)}function ey(e,t){var n=null;if(e.g==t){Zm(e),$m(e),e.g=null;var r=2}else{if(!fm(e.i,t))return;n=t.D,dm(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Tp(r=Zp(),new iv(r,n,t,i)),Gm(e)}else Ym(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(lm(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=av(bd(e.Ha,e,t),ty(e,e.C)),e.C++,!0))}(e,t)||2==r&&Xm(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ny(e,5);break;case 4:ny(e,10);break;case 3:ny(e,6);break;default:ny(e,2)}}function ty(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function ny(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=bd(e.jb,e);n||(n=new Fv("//www.google.com/images/cleardot.gif"),hd.location&&"http"==hd.location.protocol||jv(n,"https"),Kv(n)),function(e,t){var n=new Yp;if(hd.Image){var r=new Image;r.onload=wd(gm,n,r,"TestLoadImage: loaded",!0,t),r.onerror=wd(gm,n,r,"TestLoadImage: error",!1,t),r.onabort=wd(gm,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=wd(gm,n,r,"TestLoadImage: timeout",!1,t),hd.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else rv(2);e.G=0,e.j&&e.j.va(t),ry(e),qm(e)}function ry(e){e.G=0,e.I=-1,e.j&&(0==pm(e.i).length&&0==e.l.length||(e.i.i.length=0,Cd(e.l),e.l.length=0),e.j.ua())}function iy(e,t,n){var r=function(e){return e instanceof Fv?Uv(e):new Fv(e,void 0)}(n);if(""!=r.i)t&&Vv(r,t+"."+r.i),Bv(r,r.m);else{var i=hd.location;r=function(e,t,n,r){var i=new Fv(null,void 0);return e&&jv(i,e),t&&Vv(i,t),n&&Bv(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Md(e.aa,(function(e,t){qv(r,t,e)})),t=e.D,n=e.sa,t&&n&&qv(r,t,n),qv(r,"VER",e.ma),Hm(e,r),r}function ay(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Sm(new km({ib:!0})):new Sm(e.qa)).L=e.H,t}function oy(){}function uy(){if(qd&&!(10<=Number(np)))throw Error("Environmental error: no available transport.")}function sy(e,t){Sp.call(this),this.g=new Vm(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Nd(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Nd(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new fy(this)}function cy(e){dv.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ly(){pv.call(this),this.status=1}function fy(e){this.g=e}(sd=Sm.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():fv.g(),this.C=this.u?cv(this.u):cv(fv),this.g.onreadystatechange=bd(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Rm(this,a)}e=n||"";var i=new Dv(this.headers);r&&Pv(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Am,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=hd.FormData&&e instanceof hd.FormData,!(0<=Ed(Nm,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Lm(this),0<this.B&&((this.K=function(e){return qd&&ep()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=bd(this.pa,this)):this.A=zp(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Rm(this,a)}},sd.pa=function(){"undefined"!=typeof fd&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tp(this,"timeout"),this.abort(8))},sd.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Tp(this,"complete"),Tp(this,"abort"),Om(this))},sd.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Om(this,!0)),Sm.Z.M.call(this)},sd.Fa=function(){this.s||(this.F||this.v||this.l?Dm(this):this.cb())},sd.cb=function(){Dm(this)},sd.ba=function(){try{return 2<Mm(this)?this.g.status:-1}catch(um){return-1}},sd.ga=function(){try{return this.g?this.g.responseText:""}catch(um){return""}},sd.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Em(t)}},sd.Da=function(){return this.m},sd.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(sd=Vm.prototype).ma=8,sd.G=1,sd.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},sd.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new mv(this,this.h,e,void 0),n=this.s;if(this.P&&(n?jd(n=Fd(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Qm(this,t,r),qv(i=Uv(this.F),"RID",e),qv(i,"CVER",22),this.D&&qv(i,"X-HTTP-Session-Id",this.D),Hm(this,i),this.o&&n&&Um(i,this.o,n),hm(this.i,t),this.Ra&&qv(i,"TYPE","init"),this.ja?(qv(i,"$req",r),qv(i,"SID","null"),t.$=!0,wv(t,i,null)):wv(t,i,r),this.G=2}}else 3==this.G&&(e?Wm(this,e):0==this.l.length||cm(this.i)||Wm(this))},sd.Ga=function(){if(this.u=null,Jm(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=av(bd(this.bb,this),e)}},sd.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,rv(10),zm(this),Jm(this))},sd.ab=function(){null!=this.v&&(this.v=null,zm(this),Xm(this),rv(19))},sd.jb=function(e){e?(this.h.info("Successfully pinged google.com"),rv(2)):(this.h.info("Failed to ping google.com"),rv(1))},(sd=oy.prototype).xa=function(){},sd.wa=function(){},sd.va=function(){},sd.ua=function(){},sd.Oa=function(){},uy.prototype.g=function(e,t){return new sy(e,t)},xd(sy,Sp),sy.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Mp(bd(e.hb,e,t))),rv(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=iy(e,null,e.W),Gm(e)},sy.prototype.close=function(){Bm(this.g)},sy.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Km(this.g,t)}else this.v?((t={}).__data__=Np(e),Km(this.g,t)):Km(this.g,e)},sy.prototype.M=function(){this.g.j=null,delete this.j,Bm(this.g),delete this.g,sy.Z.M.call(this)},xd(cy,dv),xd(ly,pv),xd(fy,oy),fy.prototype.xa=function(){Tp(this.g,"a")},fy.prototype.wa=function(e){Tp(this.g,new cy(e))},fy.prototype.va=function(e){Tp(this.g,new ly(e))},fy.prototype.ua=function(){Tp(this.g,"b")},uy.prototype.createWebChannel=uy.prototype.g,sy.prototype.send=sy.prototype.u,sy.prototype.open=sy.prototype.m,sy.prototype.close=sy.prototype.close,ov.NO_ERROR=0,ov.TIMEOUT=8,ov.HTTP_ERROR=6,uv.COMPLETE="complete",lv.EventType=hv,hv.OPEN="a",hv.CLOSE="b",hv.ERROR="c",hv.MESSAGE="d",Sp.prototype.listen=Sp.prototype.N,Sm.prototype.listenOnce=Sm.prototype.O,Sm.prototype.getLastError=Sm.prototype.La,Sm.prototype.getLastErrorCode=Sm.prototype.Da,Sm.prototype.getStatus=Sm.prototype.ba,Sm.prototype.getResponseJson=Sm.prototype.Qa,Sm.prototype.getResponseText=Sm.prototype.ga,Sm.prototype.send=Sm.prototype.ea;var hy=ld.createWebChannelTransport=function(){return new uy},dy=ld.getStatEventTarget=function(){return Zp()},py=ld.ErrorCode=ov,vy=ld.EventType=uv,my=ld.Event=$p,yy=ld.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},gy=ld.FetchXmlHttpFactory=km,ky=ld.WebChannel=lv,by=ld.XhrIo=Sm,wy="@firebase/firestore",xy=function(){function e(t){an(this,e),this.uid=t}return un(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();xy.UNAUTHENTICATED=new xy(null),xy.GOOGLE_CREDENTIALS=new xy("google-credentials-uid"),xy.FIRST_PARTY=new xy("first-party-uid"),xy.MOCK_USER=new xy("mock-user");var _y="9.6.11",Iy=new hr("@firebase/firestore");function Ey(){return Iy.logLevel}function Sy(e){if(Iy.logLevel<=rr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ny);Iy.debug.apply(Iy,["Firestore (".concat(_y,"): ").concat(e)].concat(Jn(i)))}}function Ty(e){if(Iy.logLevel<=rr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ny);Iy.error.apply(Iy,["Firestore (".concat(_y,"): ").concat(e)].concat(Jn(i)))}}function Cy(e){if(Iy.logLevel<=rr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ny);Iy.warn.apply(Iy,["Firestore (".concat(_y,"): ").concat(e)].concat(Jn(i)))}}function Ny(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ay(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(_y,") INTERNAL ASSERTION FAILED: ")+e;throw Ty(t),new Error(t)}function Ry(e,t){e||Ay()}function Py(e,t){return e}var Dy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Oy=function(e){ln(n,e);var t=vn(n);function n(e,r){var i;return an(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return un(n)}(Pn),Ly=un((function e(){var t=this;an(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),My=un((function e(t,n){an(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Fy=function(){function e(){an(this,e)}return un(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(xy.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Uy=function(){function e(t){an(this,e),this.token=t,this.changeListener=null}return un(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),jy=function(){function e(t){an(this,e),this.t=t,this.currentUser=xy.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return un(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},o=new Ly;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new Ly,e.enqueueRetryable((function(){return i(n.currentUser)}))};var u=function(){var t=o;e.enqueueRetryable(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Sy("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),u()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Sy("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ly)}}),0),u()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Sy("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Ry("string"==typeof n.accessToken),new My(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Ry(null===e||"string"==typeof e),new xy(e)}}]),e}(),Vy=un((function e(t,n,r){an(this,e),this.type="FirstParty",this.user=xy.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),By=function(){function e(t,n,r){an(this,e),this.h=t,this.l=n,this.m=r}return un(e,[{key:"getToken",value:function(){return Promise.resolve(new Vy(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(xy.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),zy=un((function e(t){an(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),qy=function(){function e(t){an(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return un(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Sy("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Sy("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Sy("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Sy("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Ry("string"==typeof t.token),e.p=t.token,new zy(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Ky=function(){function e(t,n){var r=this;an(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return un(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Gy(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Ky.A=-1;var Wy=function(){function e(){an(this,e)}return un(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Gy(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Hy(e,t){return e<t?-1:e>t?1:0}function Qy(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Yy(e){return e+"\0"}var Xy=function(){function e(t,n){if(an(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Oy(Dy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Oy(Dy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Oy(Dy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Oy(Dy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return un(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Hy(this.nanoseconds,e.nanoseconds):Hy(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),$y=function(){function e(t){an(this,e),this.timestamp=t}return un(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Xy(0,0))}},{key:"max",value:function(){return new e(new Xy(253402300799,999999999))}}]),e}();function Jy(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Zy(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function eg(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var tg=function(){function e(t,n,r){an(this,e),void 0===n?n=0:n>t.length&&Ay(),void 0===r?r=t.length-n:r>t.length-n&&Ay(),this.segments=t,this.offset=n,this.len=r}return un(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),ng=function(e){ln(n,e);var t=vn(n);function n(){return an(this,n),t.apply(this,arguments)}return un(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Oy(Dy.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Jn(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(tg),rg=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ig=function(e){ln(n,e);var t=vn(n);function n(){return an(this,n),t.apply(this,arguments)}return un(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return rg.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Oy(Dy.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Oy(Dy.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Oy(Dy.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Oy(Dy.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(tg),ag=function(){function e(t){an(this,e),this.fields=t,t.sort(ig.comparator)}return un(e,[{key:"covers",value:function(e){var t,n=sn(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Qy(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var og=function(e){function t(e){an(this,t),this.binaryString=e}return un(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Hy(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();og.EMPTY_BYTE_STRING=new og("");var ug=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sg(e){if(Ry(!!e),"string"==typeof e){var t=0,n=ug.exec(e);if(Ry(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:cg(e.seconds),nanos:cg(e.nanos)}}function cg(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function lg(e){return"string"==typeof e?og.fromBase64String(e):og.fromUint8Array(e)}function fg(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function hg(e){var t=e.mapValue.fields.__previous_value__;return fg(t)?hg(t):t}function dg(e){var t=sg(e.mapValue.fields.__local_write_time__.timestampValue);return new Xy(t.seconds,t.nanos)}var pg=un((function e(t,n,r,i,a,o,u,s){an(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),vg=function(){function e(t,n){an(this,e),this.projectId=t,this.database=n||"(default)"}return un(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function mg(e){return null==e}function yg(e){return 0===e&&1/e==-1/0}function gg(e){return"number"==typeof e&&Number.isInteger(e)&&!yg(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var kg=function(){function e(t){an(this,e),this.path=t}return un(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===ng.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(ng.fromString(t))}},{key:"fromName",value:function(t){return new e(ng.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(ng.emptyPath())}},{key:"comparator",value:function(e,t){return ng.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new ng(t.slice()))}}]),e}(),bg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wg={nullValue:"NULL_VALUE"};function xg(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?fg(e)?4:Mg(e)?9:10:Ay()}function _g(e,t){if(e===t)return!0;var n=xg(e);if(n!==xg(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return dg(e).isEqual(dg(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=sg(e.timestampValue),r=sg(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return lg(e.bytesValue).isEqual(lg(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return cg(e.geoPointValue.latitude)===cg(t.geoPointValue.latitude)&&cg(e.geoPointValue.longitude)===cg(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return cg(e.integerValue)===cg(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=cg(e.doubleValue),r=cg(t.doubleValue);return n===r?yg(n)===yg(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Qy(e.arrayValue.values||[],t.arrayValue.values||[],_g);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Jy(n)!==Jy(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!_g(n[i],r[i])))return!1;return!0}(e,t);default:return Ay()}}function Ig(e,t){return void 0!==(e.values||[]).find((function(e){return _g(e,t)}))}function Eg(e,t){if(e===t)return 0;var n=xg(e),r=xg(t);if(n!==r)return Hy(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Hy(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=cg(e.integerValue||e.doubleValue),r=cg(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Sg(e.timestampValue,t.timestampValue);case 4:return Sg(dg(e),dg(t));case 5:return Hy(e.stringValue,t.stringValue);case 6:return function(e,t){var n=lg(e),r=lg(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Hy(n[i],r[i]);if(0!==a)return a}return Hy(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Hy(cg(e.latitude),cg(t.latitude));return 0!==n?n:Hy(cg(e.longitude),cg(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Eg(n[i],r[i]);if(a)return a}return Hy(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Hy(r[o],a[o]);if(0!==u)return u;var s=Eg(n[r[o]],i[a[o]]);if(0!==s)return s}return Hy(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Ay()}}function Sg(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Hy(e,t);var n=sg(e),r=sg(t),i=Hy(n.seconds,r.seconds);return 0!==i?i:Hy(n.nanos,r.nanos)}function Tg(e){return Cg(e)}function Cg(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=sg(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?lg(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,kg.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=sn(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Cg(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=sn(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Cg(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Ay();var t,n}function Ng(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ag(e){return!!e&&"integerValue"in e}function Rg(e){return!!e&&"arrayValue"in e}function Pg(e){return!!e&&"nullValue"in e}function Dg(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Og(e){return!!e&&"mapValue"in e}function Lg(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Zy(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Lg(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Lg(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Mg(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Fg(e){return"nullValue"in e?wg:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ng(vg.empty(),kg.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ay()}function Ug(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ng(vg.empty(),kg.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?bg:Ay()}function jg(e,t){return void 0===e?t:void 0===t||Eg(e,t)>0?e:t}function Vg(e,t){return void 0===e?t:void 0===t||Eg(e,t)<0?e:t}var Bg=function(){function e(t){an(this,e),this.value=t}return un(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Og(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lg(t)}},{key:"setAll",value:function(e){var t=this,n=ig.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Lg(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Og(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return _g(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Og(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Zy(t,(function(t,n){return e[t]=n}));var r,i=sn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Lg(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function zg(e){var t=[];return Zy(e.fields,(function(e,n){var r=new ig([e]);if(Og(n)){var i=zg(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=sn(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new ag(t)}var qg=function(){function e(t,n,r,i,a,o){an(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return un(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Bg.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Bg.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,$y.min(),$y.min(),Bg.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,$y.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,$y.min(),Bg.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,$y.min(),Bg.empty(),2)}}]),e}(),Kg=un((function e(t,n,r,i){an(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Gg(e){return e.fields.find((function(e){return 2===e.kind}))}function Wg(e){return e.fields.filter((function(e){return 2!==e.kind}))}Kg.UNKNOWN_ID=-1;var Hg=un((function e(t,n){an(this,e),this.fieldPath=t,this.kind=n})),Qg=function(){function e(t,n){an(this,e),this.sequenceNumber=t,this.offset=n}return un(e,null,[{key:"empty",value:function(){return new e(0,$g.min())}}]),e}();function Yg(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=$y.fromTimestamp(1e9===r?new Xy(n+1,0):new Xy(n,r));return new $g(i,kg.empty(),t)}function Xg(e){return new $g(e.readTime,e.key,-1)}var $g=function(){function e(t,n,r){an(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return un(e,null,[{key:"min",value:function(){return new e($y.min(),kg.empty(),-1)}},{key:"max",value:function(){return new e($y.max(),kg.empty(),-1)}}]),e}();function Jg(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=kg.comparator(e.documentKey,t.documentKey))?n:Hy(e.largestBatchId,t.largestBatchId)}var Zg=un((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;an(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function ek(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Zg(e,t,n,r,i,a,o)}function tk(e){var t=Py(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Tg(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),mg(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Tg(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Tg(e)})).join(",")),t.P=n}return t.P}function nk(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!gk(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!_g(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!bk(e.startAt,t.startAt)&&bk(e.endAt,t.endAt)}function rk(e){return kg.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function ik(e,t){return e.filters.filter((function(e){return e instanceof uk&&e.field.isEqual(t)}))}function ak(e,t,n){var r,i,a=!0,o=sn(ik(e,t));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=void 0,c=!0;switch(u.op){case"<":case"<=":s=Fg(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=wg}jg(r,s)===s&&(r=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];jg(r,f)===f&&(r=f,a=n.inclusive);break}return{value:r,inclusive:a}}function ok(e,t,n){var r,i,a=!0,o=sn(ik(e,t));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=void 0,c=!0;switch(u.op){case">=":case">":s=Ug(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=bg}Vg(r,s)===s&&(r=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Vg(r,f)===f&&(r=f,a=n.inclusive);break}return{value:r,inclusive:a}}var uk=function(e){ln(n,e);var t=vn(n);function n(e,r,i){var a;return an(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return un(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Eg(t,this.value)):null!==t&&xg(this.value)===xg(t)&&this.v(Eg(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ay()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new sk(e,t,r):"array-contains"===t?new hk(e,r):"in"===t?new dk(e,r):"not-in"===t?new pk(e,r):"array-contains-any"===t?new vk(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new ck(e,n):new lk(e,n)}}]),n}(function(){return un((function e(){an(this,e)}))}()),sk=function(e){ln(n,e);var t=vn(n);function n(e,r,i){var a;return an(this,n),(a=t.call(this,e,r,i)).key=kg.fromName(i.referenceValue),a}return un(n,[{key:"matches",value:function(e){var t=kg.comparator(e.key,this.key);return this.v(t)}}]),n}(uk),ck=function(e){ln(n,e);var t=vn(n);function n(e,r){var i;return an(this,n),(i=t.call(this,e,"in",r)).keys=fk("in",r),i}return un(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(uk),lk=function(e){ln(n,e);var t=vn(n);function n(e,r){var i;return an(this,n),(i=t.call(this,e,"not-in",r)).keys=fk("not-in",r),i}return un(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(uk);function fk(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return kg.fromName(e.referenceValue)}))}var hk=function(e){ln(n,e);var t=vn(n);function n(e,r){return an(this,n),t.call(this,e,"array-contains",r)}return un(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Rg(t)&&Ig(t.arrayValue,this.value)}}]),n}(uk),dk=function(e){ln(n,e);var t=vn(n);function n(e,r){return an(this,n),t.call(this,e,"in",r)}return un(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Ig(this.value.arrayValue,t)}}]),n}(uk),pk=function(e){ln(n,e);var t=vn(n);function n(e,r){return an(this,n),t.call(this,e,"not-in",r)}return un(n,[{key:"matches",value:function(e){if(Ig(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Ig(this.value.arrayValue,t)}}]),n}(uk),vk=function(e){ln(n,e);var t=vn(n);function n(e,r){return an(this,n),t.call(this,e,"array-contains-any",r)}return un(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Rg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Ig(t.value.arrayValue,e)}))}}]),n}(uk),mk=un((function e(t,n){an(this,e),this.position=t,this.inclusive=n})),yk=un((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";an(this,e),this.field=t,this.dir=n}));function gk(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function kk(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?kg.comparator(kg.fromName(o.referenceValue),n.key):Eg(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function bk(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!_g(e.position[n],t.position[n]))return!1;return!0}var wk=un((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;an(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function xk(e,t,n,r,i,a,o,u){return new wk(e,t,n,r,i,a,o,u)}function _k(e){return new wk(e)}function Ik(e){return!mg(e.limit)&&"F"===e.limitType}function Ek(e){return!mg(e.limit)&&"L"===e.limitType}function Sk(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Tk(e){var t,n=sn(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Ck(e){return null!==e.collectionGroup}function Nk(e){var t=Py(e);if(null===t.D){t.D=[];var n=Tk(t),r=Sk(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new yk(n)),t.D.push(new yk(ig.keyField(),"asc"));else{var i,a=!1,o=sn(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new yk(ig.keyField(),s))}}}return t.D}function Ak(e){var t=Py(e);if(!t.C)if("F"===t.limitType)t.C=ek(t.path,t.collectionGroup,Nk(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=sn(Nk(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new yk(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new mk(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new mk(t.startAt.position,!t.startAt.inclusive):null;t.C=ek(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function Rk(e,t,n){return new wk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Pk(e,t){return nk(Ak(e),Ak(t))&&e.limitType===t.limitType}function Dk(e){return"".concat(tk(Ak(e)),"|lt:").concat(e.limitType)}function Ok(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Tg(t.value));var t})).join(", "),"]")),mg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Tg(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Tg(e)})).join(",")),"Target(".concat(t,")")}(Ak(e)),"; limitType=").concat(e.limitType,")")}function Lk(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):kg.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=sn(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=sn(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=kk(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Nk(e),t))&&!(e.endAt&&!function(e,t,n){var r=kk(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Nk(e),t))}(e,t)}function Mk(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Fk(e){return function(t,n){var r,i=!1,a=sn(Nk(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Uk(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Uk(e,t,n){var r=e.field.isKeyField()?kg.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Eg(r,i):Ay()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ay()}}function jk(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yg(t)?"-0":t}}function Vk(e){return{integerValue:""+e}}function Bk(e,t){return gg(t)?Vk(t):jk(e,t)}var zk=un((function e(){an(this,e),this._=void 0}));function qk(e,t,n){return e instanceof Wk?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Hk?Qk(e,t):e instanceof Yk?Xk(e,t):function(e,t){var n=Gk(e,t),r=Jk(n)+Jk(e.k);return Ag(n)&&Ag(e.k)?Vk(r):jk(e.M,r)}(e,t)}function Kk(e,t,n){return e instanceof Hk?Qk(e,t):e instanceof Yk?Xk(e,t):n}function Gk(e,t){return e instanceof $k?Ag(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Wk=function(e){ln(n,e);var t=vn(n);function n(){return an(this,n),t.apply(this,arguments)}return un(n)}(zk),Hk=function(e){ln(n,e);var t=vn(n);function n(e){var r;return an(this,n),(r=t.call(this)).elements=e,r}return un(n)}(zk);function Qk(e,t){var n,r=Zk(t),i=sn(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return _g(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Yk=function(e){ln(n,e);var t=vn(n);function n(e){var r;return an(this,n),(r=t.call(this)).elements=e,r}return un(n)}(zk);function Xk(e,t){var n,r=Zk(t),i=sn(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!_g(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var $k=function(e){ln(n,e);var t=vn(n);function n(e,r){var i;return an(this,n),(i=t.call(this)).M=e,i.k=r,i}return un(n)}(zk);function Jk(e){return cg(e.integerValue||e.doubleValue)}function Zk(e){return Rg(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var eb=un((function e(t,n){an(this,e),this.field=t,this.transform=n}));var tb=un((function e(t,n){an(this,e),this.version=t,this.transformResults=n})),nb=function(){function e(t,n){an(this,e),this.updateTime=t,this.exists=n}return un(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function rb(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var ib=un((function e(){an(this,e)}));function ab(e,t,n){e instanceof lb?function(e,t,n){var r=e.value.clone(),i=db(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof fb?function(e,t,n){if(rb(e.precondition,t)){var r=db(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(hb(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ob(e,t,n){e instanceof lb?function(e,t,n){if(rb(e.precondition,t)){var r=e.value.clone(),i=pb(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(cb(t),r).setHasLocalMutations()}}(e,t,n):e instanceof fb?function(e,t,n){if(rb(e.precondition,t)){var r=pb(e.fieldTransforms,n,t),i=t.data;i.setAll(hb(e)),i.setAll(r),t.convertToFoundDocument(cb(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){rb(e.precondition,t)&&t.convertToNoDocument($y.min())}(e,t)}function ub(e,t){var n,r=null,i=sn(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Gk(a.transform,o||null);null!=u&&(null==r&&(r=Bg.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function sb(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Qy(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Hk&&t instanceof Hk||e instanceof Yk&&t instanceof Yk?Qy(e.elements,t.elements,_g):e instanceof $k&&t instanceof $k?_g(e.k,t.k):e instanceof Wk&&t instanceof Wk}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function cb(e){return e.isFoundDocument()?e.version:$y.min()}var lb=function(e){ln(n,e);var t=vn(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return an(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return un(n)}(ib),fb=function(e){ln(n,e);var t=vn(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return an(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return un(n)}(ib);function hb(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function db(e,t,n){var r=new Map;Ry(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Kk(o,u,n[i]))}return r}function pb(e,t,n){var r,i=new Map,a=sn(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,qk(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var vb,mb,yb=function(e){ln(n,e);var t=vn(n);function n(e,r){var i;return an(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return un(n)}(ib),gb=function(e){ln(n,e);var t=vn(n);function n(e,r){var i;return an(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return un(n)}(ib),kb=un((function e(t){an(this,e),this.count=t}));function bb(e){switch(e){default:return Ay();case Dy.CANCELLED:case Dy.UNKNOWN:case Dy.DEADLINE_EXCEEDED:case Dy.RESOURCE_EXHAUSTED:case Dy.INTERNAL:case Dy.UNAVAILABLE:case Dy.UNAUTHENTICATED:return!1;case Dy.INVALID_ARGUMENT:case Dy.NOT_FOUND:case Dy.ALREADY_EXISTS:case Dy.PERMISSION_DENIED:case Dy.FAILED_PRECONDITION:case Dy.ABORTED:case Dy.OUT_OF_RANGE:case Dy.UNIMPLEMENTED:case Dy.DATA_LOSS:return!0}}function wb(e){if(void 0===e)return Ty("GRPC error has no .code"),Dy.UNKNOWN;switch(e){case vb.OK:return Dy.OK;case vb.CANCELLED:return Dy.CANCELLED;case vb.UNKNOWN:return Dy.UNKNOWN;case vb.DEADLINE_EXCEEDED:return Dy.DEADLINE_EXCEEDED;case vb.RESOURCE_EXHAUSTED:return Dy.RESOURCE_EXHAUSTED;case vb.INTERNAL:return Dy.INTERNAL;case vb.UNAVAILABLE:return Dy.UNAVAILABLE;case vb.UNAUTHENTICATED:return Dy.UNAUTHENTICATED;case vb.INVALID_ARGUMENT:return Dy.INVALID_ARGUMENT;case vb.NOT_FOUND:return Dy.NOT_FOUND;case vb.ALREADY_EXISTS:return Dy.ALREADY_EXISTS;case vb.PERMISSION_DENIED:return Dy.PERMISSION_DENIED;case vb.FAILED_PRECONDITION:return Dy.FAILED_PRECONDITION;case vb.ABORTED:return Dy.ABORTED;case vb.OUT_OF_RANGE:return Dy.OUT_OF_RANGE;case vb.UNIMPLEMENTED:return Dy.UNIMPLEMENTED;case vb.DATA_LOSS:return Dy.DATA_LOSS;default:return Ay()}}(mb=vb||(vb={}))[mb.OK=0]="OK",mb[mb.CANCELLED=1]="CANCELLED",mb[mb.UNKNOWN=2]="UNKNOWN",mb[mb.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mb[mb.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mb[mb.NOT_FOUND=5]="NOT_FOUND",mb[mb.ALREADY_EXISTS=6]="ALREADY_EXISTS",mb[mb.PERMISSION_DENIED=7]="PERMISSION_DENIED",mb[mb.UNAUTHENTICATED=16]="UNAUTHENTICATED",mb[mb.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mb[mb.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mb[mb.ABORTED=10]="ABORTED",mb[mb.OUT_OF_RANGE=11]="OUT_OF_RANGE",mb[mb.UNIMPLEMENTED=12]="UNIMPLEMENTED",mb[mb.INTERNAL=13]="INTERNAL",mb[mb.UNAVAILABLE=14]="UNAVAILABLE",mb[mb.DATA_LOSS=15]="DATA_LOSS";var xb=function(){function e(t,n){an(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return un(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=sn(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Zy(this.inner,(function(t,n){var r,i=sn(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return eg(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),_b=function(){function e(t,n){an(this,e),this.comparator=t,this.root=n||Eb.EMPTY}return un(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Eb.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Eb.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Ib(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Ib(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Ib(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Ib(this.root,e,this.comparator,!0)}}]),e}(),Ib=function(){function e(t,n,r,i){an(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return un(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Eb=function(){function e(t,n,r,i,a){an(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return un(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ay();if(this.right.isRed())throw Ay();var e=this.left.check();if(e!==this.right.check())throw Ay();return e+(this.isRed()?0:1)}}]),e}();Eb.EMPTY=null,Eb.RED=!0,Eb.BLACK=!1,Eb.EMPTY=new(function(){function e(){an(this,e),this.size=0}return un(e,[{key:"key",get:function(){throw Ay()}},{key:"value",get:function(){throw Ay()}},{key:"color",get:function(){throw Ay()}},{key:"left",get:function(){throw Ay()}},{key:"right",get:function(){throw Ay()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Eb(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Sb=function(){function e(t){an(this,e),this.comparator=t,this.data=new _b(this.comparator)}return un(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Tb(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Tb(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Tb=function(){function e(t){an(this,e),this.iter=t}return un(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Cb(e){return e.hasNext()?e.getNext():void 0}var Nb=new _b(kg.comparator);function Ab(){return Nb}var Rb=new _b(kg.comparator);function Pb(){return Rb}function Db(){return new xb((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Ob=new _b(kg.comparator),Lb=new Sb(kg.comparator);function Mb(){for(var e=Lb,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Fb=new Sb(Hy);function Ub(){return Fb}var jb=function(){function e(t,n,r,i,a){an(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return un(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Vb.createSynthesizedTargetChangeForCurrentChange(t,n)),new e($y.min(),r,Ub(),Ab(),Mb())}}]),e}(),Vb=function(){function e(t,n,r,i,a){an(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return un(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(og.EMPTY_BYTE_STRING,n,Mb(),Mb(),Mb())}}]),e}(),Bb=un((function e(t,n,r,i){an(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),zb=un((function e(t,n){an(this,e),this.targetId=t,this.$=n})),qb=un((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:og.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;an(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Kb=function(){function e(){an(this,e),this.B=0,this.L=Hb(),this.U=og.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return un(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=Mb(),t=Mb(),n=Mb();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ay()}})),new Vb(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=Hb()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),Gb=function(){function e(t){an(this,e),this.nt=t,this.st=new Map,this.it=Ab(),this.rt=Wb(),this.ot=new Sb(Hy)}return un(e,[{key:"ut",value:function(e){var t,n=sn(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=sn(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:Ay()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(rk(i))if(0===n){var a=new kg(i.path);this.ct(t,a,qg.newNoDocument(a,$y.min()))}else Ry(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&rk(a.target)){var o=new kg(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,qg.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=Mb();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new jb(e,n,this.ot,this.it,r);return this.it=Ab(),this.rt=Wb(),this.ot=new Sb(Hy),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new Kb,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new Sb(Hy),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||Sy("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new Kb),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Wb(){return new _b(kg.comparator)}function Hb(){return new _b(kg.comparator)}var Qb={asc:"ASCENDING",desc:"DESCENDING"},Yb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Xb=un((function e(t,n){an(this,e),this.databaseId=t,this.N=n}));function $b(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Jb(e,t){return e.N?t.toBase64():t.toUint8Array()}function Zb(e,t){return $b(e,t.toTimestamp())}function ew(e){return Ry(!!e),$y.fromTimestamp(function(e){var t=sg(e);return new Xy(t.seconds,t.nanos)}(e))}function tw(e,t){return function(e){return new ng(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function nw(e){var t=ng.fromString(e);return Ry(Ew(t)),t}function rw(e,t){return tw(e.databaseId,t.path)}function iw(e,t){var n=nw(t);if(n.get(1)!==e.databaseId.projectId)throw new Oy(Dy.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Oy(Dy.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new kg(sw(n))}function aw(e,t){return tw(e.databaseId,t)}function ow(e){var t=nw(e);return 4===t.length?ng.emptyPath():sw(t)}function uw(e){return new ng(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function sw(e){return Ry(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function cw(e,t,n){return{name:rw(e,t),fields:n.value.mapValue.fields}}function lw(e,t,n){var r=iw(e,t.name),i=ew(t.updateTime),a=new Bg({mapValue:{fields:t.fields}}),o=qg.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function fw(e,t){return"found"in t?function(e,t){Ry(!!t.found),t.found.name,t.found.updateTime;var n=iw(e,t.found.name),r=ew(t.found.updateTime),i=new Bg({mapValue:{fields:t.found.fields}});return qg.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Ry(!!t.missing),Ry(!!t.readTime);var n=iw(e,t.missing),r=ew(t.readTime);return qg.newNoDocument(n,r)}(e,t):Ay()}function hw(e,t){var n;if(t instanceof lb)n={update:cw(e,t.key,t.value)};else if(t instanceof yb)n={delete:rw(e,t.key)};else if(t instanceof fb)n={update:cw(e,t.key,t.data),updateMask:Iw(t.fieldMask)};else{if(!(t instanceof gb))return Ay();n={verify:rw(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Wk)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Hk)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Yk)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof $k)return{fieldPath:t.field.canonicalString(),increment:n.k};throw Ay()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Zb(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ay()}(e,t.precondition)),n}function dw(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?nb.updateTime(ew(e.updateTime)):void 0!==e.exists?nb.exists(e.exists):nb.none()}(t.currentDocument):nb.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Ry("REQUEST_TIME"===t.setToServerValue),n=new Wk;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Hk(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Yk(i)}else"increment"in t?n=new $k(e,t.increment):Ay();var a=ig.fromServerFormat(t.fieldPath);return new eb(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=iw(e,t.update.name),a=new Bg({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new ag(t.map((function(e){return ig.fromServerFormat(e)})))}(t.updateMask);return new fb(i,a,o,n,r)}return new lb(i,a,n,r)}if(t.delete){var u=iw(e,t.delete);return new yb(u,n)}if(t.verify){var s=iw(e,t.verify);return new gb(s,n)}return Ay()}function pw(e,t){return{documents:[aw(e,t.path)]}}function vw(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=aw(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=aw(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Dg(e.value))return{unaryFilter:{field:bw(e.field),op:"IS_NAN"}};if(Pg(e.value))return{unaryFilter:{field:bw(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Dg(e.value))return{unaryFilter:{field:bw(e.field),op:"IS_NOT_NAN"}};if(Pg(e.value))return{unaryFilter:{field:bw(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bw(e.field),op:kw(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:bw(e.field),direction:gw(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||mg(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function mw(e){var t=ow(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ry(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=yw(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new yk(ww(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return mg(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new mk(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new mk(n,t)}(n.endAt)),xk(t,i,u,o,s,"F",c,l)}function yw(e){return e?void 0!==e.unaryFilter?[_w(e)]:void 0!==e.fieldFilter?[xw(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return yw(e)})).reduce((function(e,t){return e.concat(t)})):Ay():[]}function gw(e){return Qb[e]}function kw(e){return Yb[e]}function bw(e){return{fieldPath:e.canonicalString()}}function ww(e){return ig.fromServerFormat(e.fieldPath)}function xw(e){return uk.create(ww(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ay()}}(e.fieldFilter.op),e.fieldFilter.value)}function _w(e){switch(e.unaryFilter.op){case"IS_NAN":var t=ww(e.unaryFilter.field);return uk.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=ww(e.unaryFilter.field);return uk.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ww(e.unaryFilter.field);return uk.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ww(e.unaryFilter.field);return uk.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ay()}}function Iw(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Ew(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Sw(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Cw(t)),t=Tw(e.get(n),t);return Cw(t)}function Tw(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Cw(e){return e+"\x01\x01"}function Nw(e){var t=e.length;if(Ry(t>=2),2===t)return Ry("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ng.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Ay(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Ay()}a=o+2}return new ng(r)}var Aw=["userId","batchId"];function Rw(e,t){return[e,Sw(t)]}function Pw(e,t,n){return[e,Sw(t),n]}var Dw={},Ow=["prefixPath","collectionGroup","readTime","documentId"],Lw=["prefixPath","collectionGroup","documentId"],Mw=["collectionGroup","readTime","prefixPath","documentId"],Fw=["canonicalId","targetId"],Uw=["targetId","path"],jw=["path","targetId"],Vw=["collectionId","parent"],Bw=["indexId","uid"],zw=["uid","sequenceNumber"],qw=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Kw=["indexId","uid","orderedDocumentKey"],Gw=["userId","collectionPath","documentId"],Ww=["userId","collectionPath","largestBatchId"],Hw=["userId","collectionGroup","largestBatchId"],Qw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Yw=[].concat(Jn(Qw),["documentOverlays"]),Xw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$w=[].concat(Xw,["indexConfiguration","indexState","indexEntries"]),Jw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Zw=function(){function e(){an(this,e),this.onCommittedListeners=[]}return un(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),ex=function(){function e(t){var n=this;an(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return un(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Ay(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=sn(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),tx=function(){function e(t,n){var r=this;an(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new Ly,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new ix(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=cx(e.target.error);r.At.reject(new ix(t,n))}}return un(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(Sy("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"Pt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new ox(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new ix(n,t)}}}]),e}(),nx=function(){function e(t,n,r){an(this,e),this.name=t,this.version=n,this.bt=r,12.2===e.Vt(En())&&Ty("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return un(e,[{key:"Nt",value:function(){var e=a(h().mark((function e(t){var n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Sy("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ix(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Oy(Dy.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Oy(Dy.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new ix(t,n))},i.onupgradeneeded=function(e){Sy("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.bt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){Sy("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=a(h().mark((function e(t,n,r,i){var a,o,u,s,c=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(h().mark((function e(){var n,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=tx.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.Pt(),e})).catch((function(e){return n.abort(e),ex.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,Sy("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Sy("SimpleDb","Removing database:",e),ux(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!Rn())return!1;if(e.St())return!0;var t=En(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyCDSWz5o-Exx8iDrAXRaEpSfJB9hRlN7iM",REACT_APP_FIREBASE_APP_ID:"1:1084600070768:web:317f09c7afebaaa1be3ab5",REACT_APP_FIREBASE_BUCKET:"barter-944e6.appspot.com",REACT_APP_FIREBASE_DOMAIN:"barter-944e6.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"barter-944e6",REACT_APP_FIREBASE_SENDER_ID:"1084600070768",REACT_APP_MEASURE_ID:"G-XE65RTYSPM"})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),rx=function(){function e(t){an(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return un(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return ux(this.Ft.delete())}}]),e}(),ix=function(e){ln(n,e);var t=vn(n);function n(e,r){var i;return an(this,n),(i=t.call(this,Dy.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return un(n)}(Oy);function ax(e){return"IndexedDbTransactionError"===e.name}var ox=function(){function e(t){an(this,e),this.store=t}return un(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Sy("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Sy("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ux(n)}},{key:"add",value:function(e){return Sy("SimpleDb","ADD",this.store.name,e,e),ux(this.store.add(e))}},{key:"get",value:function(e){var t=this;return ux(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Sy("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Sy("SimpleDb","DELETE",this.store.name,e),ux(this.store.delete(e))}},{key:"count",value:function(){return Sy("SimpleDb","COUNT",this.store.name),ux(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new ex((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new ex((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){Sy("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new ex((function(n,r){t.onerror=function(e){var t=cx(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new ex((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new rx(i),o=t(i.primaryKey,i.value,a);if(o instanceof ex){var u=o.catch((function(e){return a.done(),ex.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return ex.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function ux(e){return new ex((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=cx(e.target.error);n(t)}}))}var sx=!1;function cx(e){var t=nx.Vt(En());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Oy("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return sx||(sx=!0,setTimeout((function(){throw r}),0)),r}}return e}var lx=function(e){ln(n,e);var t=vn(n);function n(e,r){var i;return an(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return un(n)}(Zw);function fx(e,t){var n=Py(e);return nx.xt(n.Ht,t)}var hx=function(){function e(t,n,r,i){an(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return un(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&ab(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=sn(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&ob(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=sn(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&ob(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument($y.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Mb())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Qy(this.mutations,e.mutations,(function(e,t){return sb(e,t)}))&&Qy(this.baseMutations,e.baseMutations,(function(e,t){return sb(e,t)}))}}]),e}(),dx=function(){function e(t,n,r,i){an(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return un(e,null,[{key:"from",value:function(t,n,r){Ry(t.mutations.length===r.length);for(var i=Ob,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),px=function(){function e(t,n){an(this,e),this.largestBatchId=t,this.mutation=n}return un(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),vx=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$y.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:$y.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:og.EMPTY_BYTE_STRING;an(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return un(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),mx=un((function e(t){an(this,e),this.Jt=t}));function yx(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:gx(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:rw(e,t.key),fields:t.data.value.mapValue.fields,updateTime:$b(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:kx(t.version)};else{if(!t.isUnknownDocument())return Ay();r.unknownDocument={path:n.path.toArray(),version:kx(t.version)}}return r}function gx(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function kx(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function bx(e){var t=new Xy(e.seconds,e.nanoseconds);return $y.fromTimestamp(t)}function wx(e,t){for(var n=(t.baseMutations||[]).map((function(t){return dw(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return dw(e.Jt,t)})),u=Xy.fromMillis(t.localWriteTimeMs);return new hx(t.batchId,u,n,o)}function xx(e){var t,n,r=bx(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?bx(e.lastLimboFreeSnapshotVersion):$y.min();return void 0!==e.query.documents?(Ry(1===(n=e.query).documents.length),t=Ak(_k(ow(n.documents[0])))):t=function(e){return Ak(mw(e))}(e.query),new vx(t,e.targetId,0,e.lastListenSequenceNumber,r,i,og.fromBase64String(e.resumeToken))}function _x(e,t){var n,r=kx(t.snapshotVersion),i=kx(t.lastLimboFreeSnapshotVersion);n=rk(t.target)?pw(e.Jt,t.target):vw(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:tk(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Ix(e){var t=mw({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Rk(t,t.limit,"L"):t}function Ex(e,t){return new px(t.largestBatchId,dw(e.Jt,t.overlayMutation))}function Sx(e,t){var n=t.path.lastSegment();return[e,Sw(t.path.popLast()),n]}var Tx=function(){function e(){an(this,e)}return un(e,[{key:"getBundleMetadata",value:function(e,t){return Cx(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:bx(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Cx(e).put({bundleId:(n=t).id,createTime:kx(ew(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Nx(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Ix(t.bundledQuery),readTime:bx(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Nx(e).put(function(e){return{name:e.name,readTime:kx(ew(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Cx(e){return fx(e,"bundles")}function Nx(e){return fx(e,"namedQueries")}var Ax=function(){function e(t,n){an(this,e),this.M=t,this.userId=n}return un(e,[{key:"getOverlay",value:function(e,t){var n=this;return Rx(e).get(Sx(this.userId,t)).next((function(e){return e?Ex(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new px(t,a);i.push(r.Xt(e,o))})),ex.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Sw(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Rx(e).Qt("collectionPathOverlayIndex",i))})),ex.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Db(),a=Sw(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Rx(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=sn(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Ex(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Db(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Rx(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Ex(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return Rx(e).put(function(e,t,n){var r=l(Sx(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:hw(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Rx(e){return fx(e,"documentOverlays")}var Px=function(){function e(){an(this,e)}return un(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(cg(e.integerValue));else if("doubleValue"in e){var n=cg(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),yg(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(lg(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?Mg(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Ay()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=sn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),kg.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function Dx(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Ox(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Dx(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Px.fe=new Px;var Lx=function(){function e(){an(this,e),this.buffer=new Uint8Array(1024),this.position=0}return un(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=sn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=sn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=Ox(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=Ox(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Pe",value:function(){this.be(255),this.be(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.be(0),this.be(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"be",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Mx=function(){function e(t){an(this,e),this.De=t}return un(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.Pe()}}]),e}(),Fx=function(){function e(t){an(this,e),this.De=t}return un(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),Ux=function(){function e(){an(this,e),this.De=new Lx,this.Ce=new Mx(this.De),this.xe=new Fx(this.De)}return un(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),jx=function(){function e(t,n,r,i){an(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return un(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Vx(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Bx(e.arrayValue,t.arrayValue))?n:0!==(n=Bx(e.directionalValue,t.directionalValue))?n:kg.comparator(e.documentKey,t.documentKey)}function Bx(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var zx=function(){function e(t){an(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=sn(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return un(e,[{key:"$e",value:function(e){var t=Gg(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=Wg(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=sn(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),qx=function(){function e(){an(this,e),this.qe=new Kx}return un(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),ex.resolve()}},{key:"getCollectionParents",value:function(e,t){return ex.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return ex.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return ex.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return ex.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return ex.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return ex.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return ex.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return ex.resolve()}},{key:"updateIndexEntries",value:function(e,t){return ex.resolve()}}]),e}(),Kx=function(){function e(){an(this,e),this.index={}}return un(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Sb(ng.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Sb(ng.comparator)).toArray()}}]),e}(),Gx=new Uint8Array(0),Wx=function(){function e(t,n){an(this,e),this.user=t,this.databaseId=n,this.Ke=new Kx,this.Ge=new xb((function(e){return tk(e)}),(function(e,t){return nk(e,t)})),this.uid=t.uid||""}return un(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:Sw(i)};return Hx(e).put(a)}return ex.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Yy(t),""],!1,!0);return Hx(e).qt(r).next((function(e){var r,i=sn(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Nw(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=Yx(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Yx(e),r=Xx(e),i=Qx(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Qx(e),i=!0,a=new Map;return ex.forEach(this.Qe(t),(function(t){return n.getFieldIndex(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Mb(),o=[];return ex.forEach(a,(function(i,a){var u;Sy("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(tk(t)));var s=function(e,t){var n=Gg(t);if(void 0===n)return null;var r,i=sn(ik(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=sn(Wg(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=sn(ik(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=sn(Wg(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ak(e,o.fieldPath,e.startAt):ok(e,o.fieldPath,e.startAt);if(!u.value)return null;r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new mk(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=sn(Wg(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ok(e,o.fieldPath,e.endAt):ak(e,o.fieldPath,e.endAt);if(!u.value)return null;r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new mk(r,i)}(a,i),h=n.je(i,a,l),d=n.je(i,a,f),p=n.We(i,a,c),v=n.ze(i.indexId,s,h,!!l&&l.inclusive,d,!!f&&f.inclusive,p);return ex.forEach(v,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=kg.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return ex.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.He(t[s/c]):Gx,h=n?u.Je(e,f,n[s%c],r):u.Ye(e),d=i?u.Xe(e,f,i[s%c],a):u.Ye(e+1);l.push.apply(l,Jn(u.createRange(h,d,o.map((function(t){return u.Je(e,f,t,!0)})))))},h=0;h<s;++h)f(h);return l}},{key:"Je",value:function(e,t,n,r){var i=new jx(e,kg.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new jx(e,kg.empty(),t,n);return r?i.ke():i}},{key:"Ye",value:function(e){return new jx(e,kg.empty(),Gx,Gx)}},{key:"getFieldIndex",value:function(e,t){var n=new zx(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=e.filter((function(e){return n.$e(e)}));return t.sort((function(e,t){return t.fields.length-e.fields.length})),t.length>0?t[0]:null}))}},{key:"Ze",value:function(e,t){var n,r=new Ux,i=sn(Wg(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);Px.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"He",value:function(e){var t=new Ux;return Px.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new Ux;return Px.fe.Zt(Ng(this.databaseId,t),n.Ne(function(e){var t=Wg(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Ux);var i,a=0,o=sn(Wg(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=sn(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.en(t,s.fieldPath)&&Rg(c))r=this.nn(r,s,c);else{var h=f.Ne(s.kind);Px.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=Jn(e),a=[],o=sn(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=sn(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Ux;f.seed(l.Se()),Px.fe.Zt(s,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof uk&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Yx(e),i=Xx(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return ex.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Qg(t.sequenceNumber,new $g(bx(t.readTime),new kg(Nw(t.documentKey)),t.largestBatchId)):Qg.empty(),r=e.fields.map((function(e){var t=l(e,2),n=t[0],r=t[1];return new Hg(ig.fromServerFormat(n),r)}));return new Kg(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Hy(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Yx(e),a=Xx(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return ex.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:kx(r.readTime),documentKey:Sw(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return ex.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?ex.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),ex.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?ex.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return Qx(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return Qx(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=Qx(e),i=new Sb(Vx);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new jx(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new Sb(Vx),r=this.Ze(t,e);if(null==r)return n;var i=Gg(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Rg(a)){var o,u=sn(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new jx(t.indexId,e.key,this.He(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new jx(t.indexId,e.key,Gx,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;Sy("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Cb(a),s=Cb(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Cb(o)):l?(i(u),u=Cb(a)):(u=Cb(a),s=Cb(o))}}(r,i,Vx,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),ex.waitFor(o)}},{key:"rn",value:function(e){var t=1;return Xx(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Vx(e,t)})).filter((function(e,t,n){return!t||0!==Vx(e,n[t-1])}));var r=[];r.push(e);var i,a=sn(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Vx(o,e),s=Vx(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Gx,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Gx,[]]));return c}}]),e}();function Hx(e){return fx(e,"collectionParents")}function Qx(e){return fx(e,"indexEntries")}function Yx(e){return fx(e,"indexConfiguration")}function Xx(e){return fx(e,"indexState")}var $x={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Jx=function(){function e(t,n,r){an(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return un(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Zx(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Ry(1===u)})));var c,l=[],f=sn(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Pw(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return ex.waitFor(a).next((function(){return l}))}function e_(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ay();t=e.noDocument}return JSON.stringify(t).length}Jx.DEFAULT_COLLECTION_PERCENTILE=10,Jx.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jx.DEFAULT=new Jx(41943040,Jx.DEFAULT_COLLECTION_PERCENTILE,Jx.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jx.DISABLED=new Jx(-1,0,0);var t_=function(){function e(t,n,r,i){an(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return un(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return r_(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=i_(e),o=r_(e);return o.add({}).next((function(u){Ry("number"==typeof u);var s,c=new hx(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return hw(e.Jt,t)})),i=n.mutations.map((function(t){return hw(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new Sb((function(e,t){return Hy(e.canonicalString(),t.canonicalString())})),d=sn(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Pw(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Dw))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[u]=c.keys()})),ex.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return r_(e).get(t).next((function(e){return e?(Ry(e.userId===n.userId),wx(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?ex.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return r_(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Ry(t.batchId>=r),a=wx(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return r_(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return r_(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return wx(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Rw(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return i_(e).Wt({range:i},(function(r,i,o){var u=l(r,3),s=u[0],c=u[1],f=u[2],h=Nw(c);if(s===n.userId&&t.path.isEqual(h))return r_(e).get(f).next((function(e){if(!e)throw Ay();Ry(e.userId===n.userId),a.push(wx(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Sb(Hy),i=[];return t.forEach((function(t){var a=Rw(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=i_(e).Wt({range:o},(function(e,i,a){var o=l(e,3),u=o[0],s=o[1],c=o[2],f=Nw(s);u===n.userId&&t.path.isEqual(f)?r=r.add(c):a.done()}));i.push(u)})),ex.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Rw(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Sb(Hy);return i_(e).Wt({range:o},(function(e,t,a){var o=l(e,3),s=o[0],c=o[1],f=o[2],h=Nw(c);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.dn(e,u)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(r_(e).get(t).next((function(e){if(null===e)throw Ay();Ry(e.userId===n.userId),r.push(wx(n.M,e))})))})),ex.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Zx(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),ex.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return ex.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return i_(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Nw(e[1]);i.push(a)}else r.done()})).next((function(){Ry(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return n_(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return a_(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return Ry(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function n_(e,t,n){var r=Rw(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return i_(e).Wt({range:a,jt:!0},(function(e,n,r){var a=l(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function r_(e){return fx(e,"mutations")}function i_(e){return fx(e,"documentMutations")}function a_(e){return fx(e,"mutationQueues")}var o_=function(){function e(t){an(this,e),this.mn=t}return un(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),u_=function(){function e(t,n){an(this,e),this.referenceDelegate=t,this.M=n}return un(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new o_(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return $y.fromTimestamp(new Xy(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return s_(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return Ry(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return s_(e).Wt((function(o,u){var s=xx(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return ex.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return s_(e).Wt((function(e,n){var r=xx(n);t(r)}))}},{key:"pn",value:function(e){return c_(e).get("targetGlobalKey").next((function(e){return Ry(null!==e),e}))}},{key:"In",value:function(e,t){return c_(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return s_(e).put(_x(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=tk(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return s_(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=xx(n);nk(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=l_(e);return t.forEach((function(t){var o=Sw(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),ex.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=l_(e);return ex.forEach(t,(function(t){var a=Sw(t.path);return ex.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=l_(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=l_(e),i=Mb();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=Nw(e[1]),a=new kg(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Sw(t.path),r=IDBKeyRange.bound([n],[Yy(n)],!1,!0),i=0;return l_(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=l(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return s_(e).get(t).next((function(e){return e?xx(e):null}))}}]),e}();function s_(e){return fx(e,"targets")}function c_(e){return fx(e,"targetGlobal")}function l_(e){return fx(e,"targetDocuments")}function f_(e){return h_.apply(this,arguments)}function h_(){return h_=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Dy.FAILED_PRECONDITION&&t.message===Jw){e.next=2;break}throw t;case 2:Sy("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),h_.apply(this,arguments)}function d_(e,t){var n=l(e,2),r=n[0],i=n[1],a=l(t,2),o=a[0],u=a[1],s=Hy(r,o);return 0===s?Hy(i,u):s}var p_=function(){function e(t){an(this,e),this.An=t,this.buffer=new Sb(d_),this.Rn=0}return un(e,[{key:"Pn",value:function(){return++this.Rn}},{key:"bn",value:function(e){var t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();d_(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),v_=function(){function e(t,n){an(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return un(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;Sy("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,a(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!ax(n.t0)){n.next=12;break}Sy("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,f_(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),m_=function(){function e(t,n){an(this,e),this.Dn=t,this.params=n}return un(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return ex.resolve(Ky.A);var r=new p_(t);return this.Dn.forEachTarget(e,(function(e){return r.bn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.bn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Sy("LruGarbageCollector","Garbage collection skipped; disabled"),ex.resolve($x)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Sy("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),$x):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Sy("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Ey()<=rr.DEBUG&&Sy("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),ex.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),y_=function(){function e(t,n){an(this,e),this.db=t,this.garbageCollector=function(e,t){return new m_(e,t)}(this,n)}return un(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return g_(e,n)}},{key:"removeReference",value:function(e,t,n){return g_(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return g_(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return a_(e).zt((function(r){return n_(e,r,t).next((function(e){return e&&(n=!0),ex.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,u){if(u<=t){var s=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,$y.min()),l_(e).delete([0,Sw(o.path)])}))}));i.push(s)}})).next((function(){return ex.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return g_(e,t)}},{key:"Mn",value:function(e,t){var n,r=l_(e),i=Ky.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=l(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Ky.A&&t(new kg(Nw(n)),i),i=s,n=u):i=Ky.A})).next((function(){i!==Ky.A&&t(new kg(Nw(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function g_(e,t){return l_(e).put(function(e,t){return{targetId:0,path:Sw(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var k_=function(){function e(){an(this,e),this.changes=new xb((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return un(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,qg.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?ex.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),b_=function(){function e(t){an(this,e),this.M=t}return un(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return __(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return __(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],gx(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=qg.newInvalidDocument(t);return __(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(I_(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:qg.newInvalidDocument(t)};return __(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(I_(t))},(function(e,i){r={document:n.$n(t,i),size:e_(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Ab();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=Ab(),i=new _b(kg.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,e_(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return ex.resolve();var r=new Sb(S_);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(I_(r.first()),I_(r.last())),a=r.getIterator(),o=a.getNext();return __(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=kg.fromSegments([].concat(Jn(t.prefixPath),[t.collectionGroup,t.documentId]));o&&S_(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(I_(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),gx(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return __(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Ab(),i=sn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(kg.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Ab(),o=E_(t,n),u=E_(t,$g.max());return __(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.$n(kg.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new w_(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return x_(e).get("remoteDocumentGlobalKey").next((function(e){return Ry(!!e),e}))}},{key:"Fn",value:function(e,t){return x_(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=lw(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=kg.fromSegments(t.noDocument.path),i=bx(t.noDocument.readTime);n=qg.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ay();var a=kg.fromSegments(t.unknownDocument.path),o=bx(t.unknownDocument.version);n=qg.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Xy(e[0],e[1]);return $y.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual($y.min()))return n}return qg.newInvalidDocument(e)}}]),e}(),w_=function(e){ln(n,e);var t=vn(n);function n(e,r){var i;return an(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new xb((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return un(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Sb((function(e,t){return Hy(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=yx(t.Kn.M,o);i=i.add(a.path.popLast());var c=e_(s);r+=c-u.size,n.push(t.Kn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=yx(t.Kn.M,o.convertToNoDocument($y.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),ex.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(k_);function x_(e){return fx(e,"remoteDocumentGlobal")}function __(e){return fx(e,"remoteDocumentsV14")}function I_(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function E_(e,t){var n=t.documentKey.path.toArray();return[e,gx(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function S_(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Hy(n[a],r[a]))return i;return(i=Hy(n.length,r.length))||((i=Hy(n[n.length-2],r[r.length-2]))||Hy(n[n.length-1],r[r.length-1]))}var T_=function(){function e(t){an(this,e),this.M=t}return un(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new tx("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Aw,{unique:!0}),e.createObjectStore("documentMutations")}(e),C_(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=ex.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),C_(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$y.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Aw,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return ex.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Gw});t.createIndex("collectionPathOverlayIndex",Ww,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Hw,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Ow});t.createIndex("documentKeyIndex",Lw),t.createIndex("collectionGroupIndex",Mw)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Bw}).createIndex("sequenceNumberIndex",zw,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:qw}).createIndex("documentKeyIndex",Kw,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=e_(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return ex.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return ex.forEach(r,(function(r){Ry(r.userId===n.userId);var i=wx(t.M,r);return Zx(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new ng(n),o=function(e){return[0,Sw(e)]}(a);r.push(t.get(o).next((function(n){return n?ex.resolve():function(n){return t.put({targetId:0,path:Sw(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return ex.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Vw});var n=t.store("collectionParents"),r=new Kx,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Sw(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new ng(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),a=(n[2],Nw(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=xx(r),a=_x(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new kg(ng.fromString(i.document.name).popFirst(5)):i.noDocument?kg.fromSegments(i.noDocument.path):i.unknownDocument?kg.fromSegments(i.unknownDocument.path):Ay()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return ex.waitFor(r)}))}}]),e}();function C_(e){e.createObjectStore("targetDocuments",{keyPath:Uw}).createIndex("documentTargetsIndex",jw,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Fw,{unique:!0}),e.createObjectStore("targetGlobal")}var N_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",A_=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(an(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=u,this.Xn=c,this.Zn=l,this.ts=f,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new Oy(Dy.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new y_(this,i),this.hs=n+"main",this.M=new mx(s),this.ls=new nx(this.hs,this.ts,new T_(this.M)),this.fs=new u_(this.referenceDelegate,this.M),this.ds=function(e){return new b_(e)}(this.M),this._s=new Tx,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&Ty("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return un(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Oy(Dy.FAILED_PRECONDITION,N_);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new Ky(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=a(h().mark((function n(r){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=a(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return P_(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.Ps(t).next((function(){return!0}))}))})).catch((function(t){if(ax(t))return Sy("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Sy("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return R_(e).get("owner").next((function(e){return ex.resolve(t.bs(e))}))}},{key:"Vs",value:function(e){return P_(e).delete(this.clientId)}},{key:"vs",value:function(){var e=a(h().mark((function e(){var t,n,r,i,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=fx(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return ex.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=sn(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"bs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?ex.resolve(!0):R_(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.bs(n)&&t.networkEnabled)return!0;if(!t.bs(n)){if(!n.allowTabSynchronization)throw new Oy(Dy.FAILED_PRECONDITION,N_);return!1}}return!(!t.networkEnabled||!t.inForeground)||P_(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Sy("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=a(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new lx(e,Ky.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return P_(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return t_.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new Wx(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Ax.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;Sy("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.ts)?$w:13===i?Xw:12===i?Yw:11===i?Qw:void Ay();return this.ls.runTransaction(e,o,u,(function(i){return a=new lx(i,r.es?r.es.next():Ky.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw Ty("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new Oy(Dy.FAILED_PRECONDITION,Jw);return n(a)})).next((function(e){return r.Ps(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return R_(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.bs(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Oy(Dy.FAILED_PRECONDITION,N_)}))}},{key:"Ps",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return R_(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=R_(e);return n.get("owner").next((function(e){return t.bs(e)?(Sy("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):ex.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Ty("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!Tn()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Sy("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ty("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(xd){Ty("Failed to set zombie client id.",xd)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(xd){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return nx.vt()}}]),e}();function R_(e){return fx(e,"owner")}function P_(e){return fx(e,"clientMetadata")}function D_(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var O_=function(){function e(t,n,r){an(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return un(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=sn(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=sn(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return kg.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):Ck(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new kg(t)).next((function(e){var t=Pb();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Pb();return this.indexManager.getCollectionParents(e,i).next((function(o){return ex.forEach(o,(function(o){var u=function(e,t){return new wk(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=sn(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=sn(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=qg.newInvalidDocument(s),r=r.insert(s,c)),ob(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){Lk(t,n)||(r=r.remove(e))})),r}))}}]),e}(),L_=function(){function e(t,n,r,i){an(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return un(e,null,[{key:"Ys",value:function(t,n){var r,i=Mb(),a=Mb(),o=sn(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),M_=function(){function e(){an(this,e)}return un(e,[{key:"Xs",value:function(e){this.Zs=e}},{key:"Qs",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual($y.min())?this.ti(e,t):this.Zs.Ks(e,r).next((function(a){var o=i.ei(t,a);return(Ik(t)||Ek(t))&&i.ni(t.limitType,o,r,n)?i.ti(e,t):(Ey()<=rr.DEBUG&&Sy("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ok(t)),i.Zs.Qs(e,t,Yg(n,-1)).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ei",value:function(e,t){var n=new Sb(Fk(e));return t.forEach((function(t,r){Lk(e,r)&&(n=n.add(r))})),n}},{key:"ni",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ti",value:function(e,t){return Ey()<=rr.DEBUG&&Sy("QueryEngine","Using full collection scan to execute query:",Ok(t)),this.Zs.Qs(e,t,$g.min())}}]),e}(),F_=function(){function e(t,n,r,i){an(this,e),this.persistence=t,this.si=n,this.M=i,this.ii=new _b(Hy),this.ri=new xb((function(e){return tk(e)}),nk),this.oi=new Map,this.ui=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.ai(r)}return un(e,[{key:"ai",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new O_(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ii)}))}}]),e}();function U_(e,t,n,r){return new F_(e,t,n,r)}function j_(e,t){return V_.apply(this,arguments)}function V_(){return V_=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Py(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.ai(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Mb(),s=sn(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=sn(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=sn(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=sn(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.ci.Ks(e,u).next((function(e){return{hi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),V_.apply(this,arguments)}function B_(e,t){var n=Py(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=ex.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Ry(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.ci.Ks(e,r)}))}))}function z_(e){var t=Py(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function q_(e,t){var n=Py(e),r=t.snapshotVersion,i=n.ii;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ui.newChangeBuffer({trackRemovals:!0});i=n.ii;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(og.EMPTY_BYTE_STRING,$y.min()).withLastLimboFreeSnapshotVersion($y.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var u=Ab();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(K_(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual($y.min())){var s=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return ex.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.ci.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.ii=i,e}))}function K_(e,t,n){var r=Mb();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Ab();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual($y.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Sy("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function G_(e,t){var n=Py(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function W_(e,t){var n=Py(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,ex.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new vx(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ii.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ii=n.ii.insert(e.targetId,e),n.ri.set(t,e.targetId)),e}))}function H_(e,t,n){return Q_.apply(this,arguments)}function Q_(){return Q_=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Py(t),a=i.ii.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),ax(e.t1)){e.next=12;break}throw e.t1;case 12:Sy("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ii=i.ii.remove(n),i.ri.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Q_.apply(this,arguments)}function Y_(e,t,n){var r=Py(e),i=$y.min(),a=Mb();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Py(e),i=r.ri.get(n);return void 0!==i?ex.resolve(r.ii.get(i)):r.fs.getTargetData(t,n)}(r,e,Ak(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.si.Qs(e,t,n?i:$y.min(),n?a:Mb())})).next((function(e){return J_(r,Mk(t),e),{documents:e,li:a}}))}))}function X_(e,t){var n=Py(e),r=Py(n.fs),i=n.ii.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function $_(e,t){var n=Py(e),r=n.oi.get(t)||$y.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.ui.getAllFromCollectionGroup(e,t,Yg(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return J_(n,t,e),e}))}function J_(e,t,n){var r=$y.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.oi.set(t,r)}function Z_(e,t,n,r){return eI.apply(this,arguments)}function eI(){return eI=a(h().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,d,p,v;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Py(t),o=Mb(),u=Ab(),s=sn(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.fi(l.metadata.name),l.document&&(o=o.add(f)),(d=n.di(l)).setReadTime(n._i(l.metadata.readTime)),u=u.insert(f,d)}catch(h){s.e(h)}finally{s.f()}return p=a.ui.newChangeBuffer({trackRemovals:!0}),e.next=7,W_(a,function(e){return Ak(_k(ng.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return K_(e,p,u).next((function(t){return p.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.fs.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.ci.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),eI.apply(this,arguments)}function tI(e,t){return nI.apply(this,arguments)}function nI(){return nI=a(h().mark((function e(t,n){var r,i,a,o=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Mb(),e.next=3,W_(t,Ak(Ix(n.bundledQuery)));case 3:return i=e.sent,a=Py(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=ew(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(og.EMPTY_BYTE_STRING,t);return a.ii=a.ii.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),nI.apply(this,arguments)}var rI=function(){function e(t){an(this,e),this.M=t,this.wi=new Map,this.mi=new Map}return un(e,[{key:"getBundleMetadata",value:function(e,t){return ex.resolve(this.wi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.wi.set(t.id,{id:(n=t).id,version:n.version,createTime:ew(n.createTime)}),ex.resolve()}},{key:"getNamedQuery",value:function(e,t){return ex.resolve(this.mi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.mi.set(t.name,function(e){return{name:e.name,query:Ix(e.bundledQuery),readTime:ew(e.readTime)}}(t)),ex.resolve()}}]),e}(),iI=function(){function e(){an(this,e),this.overlays=new _b(kg.comparator),this.gi=new Map}return un(e,[{key:"getOverlay",value:function(e,t){return ex.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),ex.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.gi.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.gi.delete(n)),ex.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Db(),i=t.length+1,a=new kg(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return ex.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new _b((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Db(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Db(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return ex.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.gi.get(r.largestBatchId).delete(n.key);this.gi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new px(t,n));var a=this.gi.get(t);void 0===a&&(a=Mb(),this.gi.set(t,a)),this.gi.set(t,a.add(n.key))}}}]),e}(),aI=function(){function e(){an(this,e),this.yi=new Sb(oI.pi),this.Ii=new Sb(oI.Ti)}return un(e,[{key:"isEmpty",value:function(){return this.yi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new oI(e,t);this.yi=this.yi.add(n),this.Ii=this.Ii.add(n)}},{key:"Ei",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ai(new oI(e,t))}},{key:"Ri",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Pi",value:function(e){var t=this,n=new kg(new ng([])),r=new oI(n,e),i=new oI(n,e+1),a=[];return this.Ii.forEachInRange([r,i],(function(e){t.Ai(e),a.push(e.key)})),a}},{key:"bi",value:function(){var e=this;this.yi.forEach((function(t){return e.Ai(t)}))}},{key:"Ai",value:function(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}},{key:"Vi",value:function(e){var t=new kg(new ng([])),n=new oI(t,e),r=new oI(t,e+1),i=Mb();return this.Ii.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new oI(e,0),n=this.yi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),oI=function(){function e(t,n){an(this,e),this.key=t,this.vi=n}return un(e,null,[{key:"pi",value:function(e,t){return kg.comparator(e.key,t.key)||Hy(e.vi,t.vi)}},{key:"Ti",value:function(e,t){return Hy(e.vi,t.vi)||kg.comparator(e.key,t.key)}}]),e}(),uI=function(){function e(t,n){an(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.Si=1,this.Di=new Sb(oI.pi)}return un(e,[{key:"checkEmpty",value:function(e){return ex.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.Si;this.Si++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new hx(i,t,n,r);this.Bs.push(a);var o,u=sn(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Di=this.Di.add(new oI(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return ex.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return ex.resolve(this.Ci(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.xi(n),i=r<0?0:r;return ex.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return ex.resolve(0===this.Bs.length?-1:this.Si-1)}},{key:"getAllMutationBatches",value:function(e){return ex.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new oI(t,0),i=new oI(t,Number.POSITIVE_INFINITY),a=[];return this.Di.forEachInRange([r,i],(function(e){var t=n.Ci(e.vi);a.push(t)})),ex.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Sb(Hy);return t.forEach((function(e){var t=new oI(e,0),i=new oI(e,Number.POSITIVE_INFINITY);n.Di.forEachInRange([t,i],(function(e){r=r.add(e.vi)}))})),ex.resolve(this.Ni(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;kg.isDocumentKey(i)||(i=i.child(""));var a=new oI(new kg(i),0),o=new Sb(Hy);return this.Di.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.vi)),!0)}),a),ex.resolve(this.Ni(o))}},{key:"Ni",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ci(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Ry(0===this.ki(t.batchId,"removed")),this.Bs.shift();var r=this.Di;return ex.forEach(t.mutations,(function(i){var a=new oI(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Di=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new oI(t,0),r=this.Di.firstAfterOrEqual(n);return ex.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,ex.resolve()}},{key:"ki",value:function(e,t){return this.xi(e)}},{key:"xi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"Ci",value:function(e){var t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),sI=function(){function e(t){an(this,e),this.Mi=t,this.docs=new _b(kg.comparator),this.size=0}return un(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Mi(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return ex.resolve(n?n.document.mutableCopy():qg.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Ab();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():qg.newInvalidDocument(e))})),ex.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Ab(),i=new kg(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Jg(Xg(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return ex.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Ay()}},{key:"Oi",value:function(e,t){return ex.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new cI(this)}},{key:"getSize",value:function(e){return ex.resolve(this.size)}}]),e}(),cI=function(e){ln(n,e);var t=vn(n);function n(e){var r;return an(this,n),(r=t.call(this)).Kn=e,r}return un(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),ex.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(k_),lI=function(){function e(t){an(this,e),this.persistence=t,this.Fi=new xb((function(e){return tk(e)}),nk),this.lastRemoteSnapshotVersion=$y.min(),this.highestTargetId=0,this.$i=0,this.Bi=new aI,this.targetCount=0,this.Li=o_.gn()}return un(e,[{key:"forEachTarget",value:function(e,t){return this.Fi.forEach((function(e,n){return t(n)})),ex.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return ex.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return ex.resolve(this.$i)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Li.next(),ex.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$i&&(this.$i=t),ex.resolve()}},{key:"Tn",value:function(e){this.Fi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Li=new o_(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,ex.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),ex.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,ex.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Fi.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Fi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),ex.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return ex.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Fi.get(t)||null;return ex.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Bi.Ei(t,n),ex.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Bi.Ri(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),ex.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Bi.Pi(t),ex.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Bi.Vi(t);return ex.resolve(n)}},{key:"containsKey",value:function(e,t){return ex.resolve(this.Bi.containsKey(t))}}]),e}(),fI=function(){function e(t,n){var r=this;an(this,e),this.Ui={},this.overlays={},this.es=new Ky(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new lI(this),this.indexManager=new qx,this.ds=new sI((function(e){return r.referenceDelegate.qi(e)})),this.M=new mx(n),this._s=new rI(this.M)}return un(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new iI,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ui[e.toKey()];return n||(n=new uI(t,this.referenceDelegate),this.Ui[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;Sy("MemoryPersistence","Starting transaction:",e);var i=new hI(this.es.next());return this.referenceDelegate.Ki(),n(i).next((function(e){return r.referenceDelegate.Gi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Qi",value:function(e,t){return ex.or(Object.values(this.Ui).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),hI=function(e){ln(n,e);var t=vn(n);function n(e){var r;return an(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return un(n)}(Zw),dI=function(){function e(t){an(this,e),this.persistence=t,this.ji=new aI,this.Wi=null}return un(e,[{key:"Hi",get:function(){if(this.Wi)return this.Wi;throw Ay()}},{key:"addReference",value:function(e,t,n){return this.ji.addReference(n,t),this.Hi.delete(n.toString()),ex.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ji.removeReference(n,t),this.Hi.add(n.toString()),ex.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Hi.add(t.toString()),ex.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ji.Pi(t.targetId).forEach((function(e){return n.Hi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Hi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ki",value:function(){this.Wi=new Set}},{key:"Gi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ex.forEach(this.Hi,(function(r){var i=kg.fromPath(r);return t.Ji(e,i).next((function(e){e||n.removeEntry(i,$y.min())}))})).next((function(){return t.Wi=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ji(e,t).next((function(e){e?n.Hi.delete(t.toString()):n.Hi.add(t.toString())}))}},{key:"qi",value:function(e){return 0}},{key:"Ji",value:function(e,t){var n=this;return ex.or([function(){return ex.resolve(n.ji.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Qi(e,t)}])}}],[{key:"zi",value:function(t){return new e(t)}}]),e}();function pI(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function vI(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function mI(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var yI=function(){function e(t,n,r,i){an(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return un(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Yi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Oy(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Ty("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),gI=function(){function e(t,n,r){an(this,e),this.targetId=t,this.state=n,this.error=r}return un(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Yi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Oy(i.error.code,i.error.message))),a?new e(t,i.state,r):(Ty("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),kI=function(){function e(t,n){an(this,e),this.clientId=t,this.activeTargetIds=n}return un(e,null,[{key:"Yi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Ub(),o=0;i&&o<r.activeTargetIds.length;++o)i=gg(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Ty("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),bI=function(){function e(t,n){an(this,e),this.clientId=t,this.onlineState=n}return un(e,null,[{key:"Yi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Ty("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),wI=function(){function e(){an(this,e),this.activeTargetIds=Ub()}return un(e,[{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),xI=function(){function e(t,n,r,i,a){an(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new _b(Hy),this.started=!1,this.rr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ur=pI(this.persistenceKey,this.er),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ir=this.ir.insert(this.er,new wI),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.hr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.lr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.dr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._r=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}return un(e,[{key:"start",value:function(){var e=a(h().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,d=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=sn(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.er){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(pI(this.persistenceKey,i)))&&(o=kI.Yi(i,a))&&(this.ir=this.ir.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.wr(),(u=this.storage.getItem(this.dr))&&(s=this.mr(u))&&this.gr(s),c=sn(this.rr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.sr(f)}catch(h){c.e(h)}finally{c.f()}this.rr=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.yr(this.ir)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ir.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.pr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.pr(e,t,n),this.Ir(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(mI(this.persistenceKey,e));if(n){var r=gI.Yi(e,n);r&&(t=r.state)}}return this.Tr.Zi(e),this.wr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Tr.tr(e),this.wr()}},{key:"isLocalQueryTarget",value:function(e){return this.Tr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(mI(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Er(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ir(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Ar(e)}},{key:"notifyBundleLoaded",value:function(e){this.Rr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Sy("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Sy("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Sy("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"sr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Sy("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ur)return void Ty("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(a(h().mark((function e(){var r,i,a,o,u,s,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Pr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Vr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.hr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Sr(a));case 16:e.next=41;break;case 18:if(!t.lr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Dr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Cr(o));case 23:e.next=41;break;case 25:if(n.key!==t.dr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.mr(n.newValue))){e.next=30;break}return e.abrupt("return",t.gr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ar){e.next=37;break}s=function(e){var t=Ky.A;if(null!=e)try{var n=JSON.parse(e);Ry("number"==typeof n),t=n}catch(e){Ty("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Ky.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t._r){e.next=41;break}return c=t.Nr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.kr(e)})));case 41:e.next=44;break;case 43:t.rr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Tr",get:function(){return this.ir.get(this.er)}},{key:"wr",value:function(){this.setItem(this.ur,this.Tr.Xi())}},{key:"pr",value:function(e,t,n){var r=new yI(this.currentUser,e,t,n),i=vI(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Xi())}},{key:"Ir",value:function(e){var t=vI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Ar",value:function(e){var t={clientId:this.er,onlineState:e};this.storage.setItem(this.dr,JSON.stringify(t))}},{key:"Er",value:function(e,t,n){var r=mI(this.persistenceKey,e),i=new gI(e,t,n);this.setItem(r,i.Xi())}},{key:"Rr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}},{key:"Pr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Vr",value:function(e,t){var n=this.Pr(e);return kI.Yi(n,t)}},{key:"vr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return yI.Yi(new xy(i),r,t)}},{key:"Dr",value:function(e,t){var n=this.lr.exec(e),r=Number(n[1]);return gI.Yi(r,t)}},{key:"mr",value:function(e){return bI.Yi(e)}},{key:"Nr",value:function(e){return JSON.parse(e)}},{key:"Sr",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Mr(t.batchId,t.state,t.error));case 2:Sy("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Cr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.ir.insert(e,t):this.ir.remove(e),i=this.yr(this.ir),a=this.yr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Fr(o,u).then((function(){n.ir=r}))}},{key:"gr",value:function(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"yr",value:function(e){var t=Ub();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),_I=function(){function e(){an(this,e),this.$r=new wI,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return un(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.$r.Zi(e),this.Br[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Br[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.$r.tr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.$r.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Br[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.$r.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.$r.activeTargetIds.has(e)}},{key:"start",value:function(){return this.$r=new wI,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),II=function(){function e(){an(this,e)}return un(e,[{key:"Lr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),EI=function(){function e(){var t=this;an(this,e),this.Ur=function(){return t.qr()},this.Kr=function(){return t.Gr()},this.Qr=[],this.jr()}return un(e,[{key:"Lr",value:function(e){this.Qr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}},{key:"qr",value:function(){Sy("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=sn(this.Qr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Gr",value:function(){Sy("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=sn(this.Qr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),SI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},TI=function(){function e(t){an(this,e),this.Wr=t.Wr,this.zr=t.zr}return un(e,[{key:"Hr",value:function(e){this.Jr=e}},{key:"Yr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.Zr=e}},{key:"close",value:function(){this.zr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"eo",value:function(){this.Jr()}},{key:"no",value:function(e){this.Xr(e)}},{key:"so",value:function(e){this.Zr(e)}}]),e}(),CI=function(e){ln(n,e);var t=vn(n);function n(e){var r;return an(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return un(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new by;o.listenOnce(vy.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case py.NO_ERROR:var t=o.getResponseJson();Sy("Connection","XHR received:",JSON.stringify(t)),i(t);break;case py.TIMEOUT:Sy("Connection",'RPC "'+e+'" timed out'),a(new Oy(Dy.DEADLINE_EXCEEDED,"Request time out"));break;case py.HTTP_ERROR:var n=o.getStatus();if(Sy("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Dy).indexOf(t)>=0?t:Dy.UNKNOWN}(r.status);a(new Oy(u,r.message))}else a(new Oy(Dy.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Oy(Dy.UNAVAILABLE,"Connection failed."));break;default:Ay()}}finally{Sy("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"lo",value:function(e,t,n){var r=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=hy(),a=dy(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new gy({})),this.ao(o.initMessageHeaders,t,n),Sn()||Nn()||En().indexOf("Electron/")>=0||An()||En().indexOf("MSAppHost/")>=0||Cn()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Sy("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new TI({Wr:function(e){l?Sy("Connection","Not sending because WebChannel is closed:",e):(c||(Sy("Connection","Opening WebChannel transport."),s.open(),c=!0),Sy("Connection","WebChannel sending:",e),s.send(e))},zr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,ky.EventType.OPEN,(function(){l||Sy("Connection","WebChannel transport opened.")})),h(s,ky.EventType.CLOSE,(function(){l||(l=!0,Sy("Connection","WebChannel transport closed"),f.no())})),h(s,ky.EventType.ERROR,(function(e){l||(l=!0,Cy("Connection","WebChannel transport errored:",e),f.no(new Oy(Dy.UNAVAILABLE,"The operation could not be completed")))})),h(s,ky.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Ry(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Sy("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=vb[e];if(void 0!==t)return wb(t)}(a),u=i.message;void 0===o&&(o=Dy.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.no(new Oy(o,u)),s.close()}else Sy("Connection","WebChannel received:",n),f.so(n)}})),h(a,my.STAT_EVENT,(function(e){e.stat===yy.PROXY?Sy("Connection","Detected buffering proxy"):e.stat===yy.NOPROXY&&Sy("Connection","Detected no buffering proxy")})),setTimeout((function(){f.eo()}),0),f}}]),n}(function(){function e(t){an(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.io=n+"://"+t.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return un(e,[{key:"oo",value:function(e,t,n,r,i){var a=this.uo(e,t);Sy("RestConnection","Sending: ",a,n);var o={};return this.ao(o,r,i),this.co(e,a,o,n).then((function(e){return Sy("RestConnection","Received: ",e),e}),(function(t){throw Cy("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ho",value:function(e,t,n,r,i){return this.oo(e,t,n,r,i)}},{key:"ao",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+_y,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"uo",value:function(e,t){var n=SI[e];return"".concat(this.io,"/v1/").concat(t,":").concat(n)}}]),e}());function NI(){return"undefined"!=typeof window?window:null}function AI(){return"undefined"!=typeof document?document:null}function RI(e){return new Xb(e,!0)}var PI=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;an(this,e),this.Yn=t,this.timerId=n,this.fo=r,this._o=i,this.wo=a,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}return un(e,[{key:"reset",value:function(){this.mo=0}},{key:"Io",value:function(){this.mo=this.wo}},{key:"To",value:function(e){var t=this;this.cancel();var n=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,n-r);i>0&&Sy("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.mo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.po=Date.now(),e()})),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}},{key:"Ao",value:function(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}},{key:"cancel",value:function(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}},{key:"Eo",value:function(){return(Math.random()-.5)*this.mo}}]),e}(),DI=function(){function e(t,n,r,i,a,o,u,s){an(this,e),this.Yn=t,this.Ro=r,this.Po=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new PI(t,n)}return un(e,[{key:"Co",value:function(){return 1===this.state||5===this.state||this.xo()}},{key:"xo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.No()}},{key:"stop",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Co(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ko",value:function(){this.state=0,this.Do.reset()}},{key:"Mo",value:function(){var e=this;this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,(function(){return e.Oo()})))}},{key:"Fo",value:function(e){this.$o(),this.stream.send(e)}},{key:"Oo",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.xo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$o",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"close",value:function(){var e=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$o(),this.Bo(),this.Do.cancel(),this.Vo++,4!==t?this.Do.reset():n&&n.code===Dy.RESOURCE_EXHAUSTED?(Ty(n.toString()),Ty("Using maximum backoff delay to prevent overloading the backend."),this.Do.Io()):n&&n.code===Dy.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Lo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Yr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.Vo===n&&e.qo(i,a)}),(function(n){t((function(){var t=new Oy(Dy.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ko(t)}))}))}},{key:"qo",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr((function(){r((function(){return n.state=2,n.So=n.Yn.enqueueAfterDelay(n.Po,1e4,(function(){return n.xo()&&(n.state=3),Promise.resolve()})),n.listener.Hr()}))})),this.stream.Yr((function(e){r((function(){return n.Ko(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"No",value:function(){var e=this;this.state=5,this.Do.To(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Ko",value:function(e){return Sy("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Vo===e?n():(Sy("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),OI=function(e){ln(n,e);var t=vn(n);function n(e,r,i,a,o,u){var s;return an(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return un(n,[{key:"Go",value:function(e,t){return this.bo.lo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Do.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ay()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(Ry(void 0===t||"string"==typeof t),og.fromBase64String(t||"")):(Ry(void 0===t||t instanceof Uint8Array),og.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Dy.UNKNOWN:wb(e.code);return new Oy(t,e.message||"")}(o);n=new qb(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=iw(e,s.document.name),l=ew(s.document.updateTime),f=new Bg({mapValue:{fields:s.document.fields}}),h=qg.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Bb(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=iw(e,v.document),y=v.readTime?ew(v.readTime):$y.min(),g=qg.newNoDocument(m,y),k=v.removedTargetIds||[];n=new Bb([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=iw(e,b.document),x=b.removedTargetIds||[];n=new Bb([],x,w,null)}else{if(!("filter"in t))return Ay();t.filter;var _=t.filter;_.targetId;var I=_.count||0,E=new kb(I),S=_.targetId;n=new zb(S,E)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return $y.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?$y.min():t.readTime?ew(t.readTime):$y.min()}(e);return this.listener.Qo(t,n)}},{key:"jo",value:function(e){var t={};t.database=uw(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=rk(r)?{documents:pw(e,r)}:{query:vw(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Jb(e,t.resumeToken):t.snapshotVersion.compareTo($y.min())>0&&(n.readTime=$b(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ay()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=uw(this.M),t.removeTarget=e,this.Fo(t)}}]),n}(DI),LI=function(e){ln(n,e);var t=vn(n);function n(e,r,i,a,o,u){var s;return an(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.zo=!1,s}return un(n,[{key:"Ho",get:function(){return this.zo}},{key:"start",value:function(){this.zo=!1,this.lastStreamToken=void 0,Ha(fn(n.prototype),"start",this).call(this)}},{key:"Lo",value:function(){this.zo&&this.Jo([])}},{key:"Go",value:function(e,t){return this.bo.lo("Write",e,t)}},{key:"onMessage",value:function(e){if(Ry(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();var t=function(e,t){return e&&e.length>0?(Ry(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?ew(e.updateTime):ew(t);return n.isEqual($y.min())&&(n=ew(t)),new tb(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=ew(e.commitTime);return this.listener.Yo(n,t)}return Ry(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}},{key:"Zo",value:function(){var e={};e.database=uw(this.M),this.Fo(e)}},{key:"Jo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return hw(t.M,e)}))};this.Fo(n)}}]),n}(DI),MI=function(e){ln(n,e);var t=vn(n);function n(e,r,i,a){var o;return an(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.M=a,o.tu=!1,o}return un(n,[{key:"eu",value:function(){if(this.tu)throw new Oy(Dy.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"oo",value:function(e,t,n){var r=this;return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],u=a[1];return r.bo.oo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Dy.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Oy(Dy.UNKNOWN,e.toString())}))}},{key:"ho",value:function(e,t,n){var r=this;return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],u=a[1];return r.bo.ho(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Dy.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Oy(Dy.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.tu=!0}}]),n}(function(){return un((function e(){an(this,e)}))}()),FI=function(){function e(t,n){an(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}return un(e,[{key:"ru",value:function(){var e=this;0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.su=null,e.uu("Backend didn't respond within 10 seconds."),e.ou("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ou("Offline")))}},{key:"set",value:function(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}},{key:"ou",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"uu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.iu?(Ty(t),this.iu=!1):Sy("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.su&&(this.su.cancel(),this.su=null)}}]),e}(),UI=un((function e(t,n,r,i,o){var u=this;an(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=o,this._u.Lr((function(e){r.enqueueAndForget(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=YI(u),!e.t0){e.next=5;break}return Sy("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Py(t)).fu.add(4),e.next=4,BI(n);case 4:return n.wu.set("Unknown"),n.fu.delete(4),e.next=8,jI(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(u);case 5:case"end":return e.stop()}}),e)}))))})),this.wu=new FI(r,i)}));function jI(e){return VI.apply(this,arguments)}function VI(){return VI=a(h().mark((function e(t){var n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!YI(t)){e.next=18;break}n=sn(t.du),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),VI.apply(this,arguments)}function BI(e){return zI.apply(this,arguments)}function zI(){return zI=a(h().mark((function e(t){var n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=sn(t.du),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),zI.apply(this,arguments)}function qI(e,t){var n=Py(e);n.lu.has(t.targetId)||(n.lu.set(t.targetId,t),QI(n)?HI(n):IE(n).xo()&&GI(n,t))}function KI(e,t){var n=Py(e),r=IE(n);n.lu.delete(t),r.xo()&&WI(n,t),0===n.lu.size&&(r.xo()?r.Mo():YI(n)&&n.wu.set("Unknown"))}function GI(e,t){e.mu.Z(t.targetId),IE(e).jo(t)}function WI(e,t){e.mu.Z(t),IE(e).Wo(t)}function HI(e){e.mu=new Gb({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.lu.get(t)||null}}),IE(e).start(),e.wu.ru()}function QI(e){return YI(e)&&!IE(e).Co()&&e.lu.size>0}function YI(e){return 0===Py(e).fu.size}function XI(e){e.mu=void 0}function $I(e){return JI.apply(this,arguments)}function JI(){return JI=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.lu.forEach((function(e,n){GI(t,e)}));case 1:case"end":return e.stop()}}),e)}))),JI.apply(this,arguments)}function ZI(e,t){return eE.apply(this,arguments)}function eE(){return eE=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:XI(t),QI(t)?(t.wu.au(n),HI(t)):t.wu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),eE.apply(this,arguments)}function tE(e,t,n){return nE.apply(this,arguments)}function nE(){return nE=a(h().mark((function e(t,n,r){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.wu.set("Online"),!(n instanceof qb&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=sn(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.lu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.lu.delete(o),t.mu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Sy("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,rE(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Bb?t.mu.ut(n):n instanceof zb?t.mu._t(n):t.mu.ht(n),r.isEqual($y.min())){e.next=29;break}return e.prev=14,e.next=17,z_(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.mu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.lu.get(r);i&&e.lu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.lu.get(t);if(n){e.lu.set(t,n.withResumeToken(og.EMPTY_BYTE_STRING,n.snapshotVersion)),WI(e,t);var r=new vx(n.target,t,1,n.sequenceNumber);GI(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Sy("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,rE(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),nE.apply(this,arguments)}function rE(e,t,n){return iE.apply(this,arguments)}function iE(){return iE=a(h().mark((function e(t,n,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ax(n)){e.next=2;break}throw n;case 2:return t.fu.add(1),e.next=5,BI(t);case 5:t.wu.set("Offline"),r||(r=function(){return z_(t.localStore)}),t.asyncQueue.enqueueRetryable(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sy("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.fu.delete(1),e.next=6,jI(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),iE.apply(this,arguments)}function aE(e,t){return t().catch((function(n){return rE(e,n,t)}))}function oE(e){return uE.apply(this,arguments)}function uE(){return uE=a(h().mark((function e(t){var n,r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Py(t),r=EE(n),i=n.hu.length>0?n.hu[n.hu.length-1].batchId:-1;case 2:if(!sE(n)){e.next=19;break}return e.prev=3,e.next=6,G_(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.hu.length&&r.Mo(),e.abrupt("break",19);case 10:i=a.batchId,cE(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,rE(n,e.t0);case 17:e.next=2;break;case 19:lE(n)&&fE(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),uE.apply(this,arguments)}function sE(e){return YI(e)&&e.hu.length<10}function cE(e,t){e.hu.push(t);var n=EE(e);n.xo()&&n.Ho&&n.Jo(t.mutations)}function lE(e){return YI(e)&&!EE(e).Co()&&e.hu.length>0}function fE(e){EE(e).start()}function hE(e){return dE.apply(this,arguments)}function dE(){return dE=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:EE(t).Zo();case 1:case"end":return e.stop()}}),e)}))),dE.apply(this,arguments)}function pE(e){return vE.apply(this,arguments)}function vE(){return vE=a(h().mark((function e(t){var n,r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=EE(t),r=sn(t.hu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Jo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),vE.apply(this,arguments)}function mE(e,t,n){return yE.apply(this,arguments)}function yE(){return yE=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.hu.shift(),a=dx.from(i,n,r),e.next=3,aE(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,oE(t);case 5:case"end":return e.stop()}}),e)}))),yE.apply(this,arguments)}function gE(e,t){return kE.apply(this,arguments)}function kE(){return kE=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&EE(t).Ho,!e.t0){e.next=4;break}return e.next=4,function(){var e=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!bb(i=n.code)||i===Dy.ABORTED){e.next=7;break}return r=t.hu.shift(),EE(t).ko(),e.next=5,aE(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,oE(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:lE(t)&&fE(t);case 5:case"end":return e.stop()}}),e)}))),kE.apply(this,arguments)}function bE(e,t){return wE.apply(this,arguments)}function wE(){return wE=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Py(t)).asyncQueue.verifyOperationInProgress(),Sy("RemoteStore","RemoteStore received new credentials"),i=YI(r),r.fu.add(3),e.next=6,BI(r);case 6:return i&&r.wu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.fu.delete(3),e.next=12,jI(r);case 12:case"end":return e.stop()}}),e)}))),wE.apply(this,arguments)}function xE(e,t){return _E.apply(this,arguments)}function _E(){return _E=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Py(t),!n){e.next=7;break}return r.fu.delete(2),e.next=5,jI(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.fu.add(2),e.next=12,BI(r);case 12:r.wu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),_E.apply(this,arguments)}function IE(e){return e.gu||(e.gu=function(e,t,n){var r=Py(e);return r.eu(),new OI(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:$I.bind(null,e),Yr:ZI.bind(null,e),Qo:tE.bind(null,e)}),e.du.push(function(){var t=a(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.gu.ko(),QI(e)?HI(e):e.wu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.gu.stop();case 6:XI(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}function EE(e){return e.yu||(e.yu=function(e,t,n){var r=Py(e);return r.eu(),new LI(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:hE.bind(null,e),Yr:gE.bind(null,e),Xo:pE.bind(null,e),Yo:mE.bind(null,e)}),e.du.push(function(){var t=a(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.yu.ko(),t.next=4,oE(e);case 4:t.next=9;break;case 6:return t.next=8,e.yu.stop();case 8:e.hu.length>0&&(Sy("RemoteStore","Stopping write stream with ".concat(e.hu.length," pending writes")),e.hu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}var SE=function(){function e(t,n,r,i,a){an(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ly,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return un(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oy(Dy.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function TE(e,t){if(Ty("AsyncQueue","".concat(t,": ").concat(e)),ax(e))return new Oy(Dy.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var CE=function(){function e(t){an(this,e),this.comparator=t?function(e,n){return t(e,n)||kg.comparator(e.key,n.key)}:function(e,t){return kg.comparator(e.key,t.key)},this.keyedMap=Pb(),this.sortedSet=new _b(this.comparator)}return un(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),NE=function(){function e(){an(this,e),this.pu=new _b(kg.comparator)}return un(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.pu.get(t);n?0!==e.type&&3===n.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==n.type?this.pu=this.pu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.pu=this.pu.remove(t):1===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):Ay():this.pu=this.pu.insert(t,e)}},{key:"Iu",value:function(){var e=[];return this.pu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),AE=function(){function e(t,n,r,i,a,o,u,s){an(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return un(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pk(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,CE.emptySet(n),a,r,i,!0,!1)}}]),e}(),RE=un((function e(){an(this,e),this.Tu=void 0,this.listeners=[]})),PE=un((function e(){an(this,e),this.queries=new xb((function(e){return Dk(e)}),Pk),this.onlineState="Unknown",this.Eu=new Set}));function DE(e,t){return OE.apply(this,arguments)}function OE(){return OE=a(h().mark((function e(t,n){var r,i,a,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Py(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new RE),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Tu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=TE(e.t0,"Initialization of query '".concat(Ok(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Au(r.onlineState),o.Tu&&n.Ru(o.Tu)&&jE(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),OE.apply(this,arguments)}function LE(e,t){return ME.apply(this,arguments)}function ME(){return ME=a(h().mark((function e(t,n){var r,i,a,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Py(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),ME.apply(this,arguments)}function FE(e,t){var n,r=Py(e),i=!1,a=sn(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=sn(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Ru(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Tu=o}}}catch(f){a.e(f)}finally{a.f()}i&&jE(r)}function UE(e,t,n){var r=Py(e),i=r.queries.get(t);if(i){var a,o=sn(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function jE(e){e.Eu.forEach((function(e){e.next()}))}var VE=function(){function e(t,n,r){an(this,e),this.query=t,this.Pu=n,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return un(e,[{key:"Ru",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=sn(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new AE(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),a=!0):this.Su(e,this.onlineState)&&(this.Du(e),a=!0),this.Vu=e,a}},{key:"onError",value:function(e){this.Pu.error(e)}},{key:"Au",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}},{key:"Su",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Cu||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Du",value:function(e){e=AE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}]),e}(),BE=function(){function e(t,n){an(this,e),this.payload=t,this.byteLength=n}return un(e,[{key:"xu",value:function(){return"metadata"in this.payload}}]),e}(),zE=function(){function e(t){an(this,e),this.M=t}return un(e,[{key:"fi",value:function(e){return iw(this.M,e)}},{key:"di",value:function(e){return e.metadata.exists?lw(this.M,e.document,!1):qg.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}},{key:"_i",value:function(e){return ew(e)}}]),e}(),qE=function(){function e(t,n,r){an(this,e),this.Nu=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=KE(t)}return un(e,[{key:"ku",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=ng.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Mu",value:function(e){var t,n=new Map,r=new zE(this.M),i=sn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.fi(a.metadata.name),s=sn(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Mb()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=a(h().mark((function e(){var t,n,r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z_(this.localStore,new zE(this.M),this.documents,this.Nu.id);case 2:t=e.sent,n=this.Mu(this.documents),r=sn(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,tI(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Fu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function KE(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var GE=un((function e(t){an(this,e),this.key=t})),WE=un((function e(t){an(this,e),this.key=t})),HE=function(){function e(t,n){an(this,e),this.query=t,this.$u=n,this.Bu=null,this.current=!1,this.Lu=Mb(),this.mutatedKeys=Mb(),this.Uu=Fk(t),this.qu=new CE(this.Uu)}return un(e,[{key:"Ku",get:function(){return this.$u}},{key:"Gu",value:function(e,t){var n=this,r=t?t.Qu:new NE,i=t?t.qu:this.qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=Ik(this.query)&&i.size===this.query.limit?i.last():null,c=Ek(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Lk(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.ju(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Uu(f,s)>0||c&&n.Uu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),Ik(this.query)||Ek(this.query))for(;o.size>this.query.limit;){var l=Ik(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{qu:o,Qu:r,ni:u,mutatedKeys:a}}},{key:"ju",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;var a=e.Qu.Iu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ay()}};return n(e)-n(t)}(e.type,t.type)||r.Uu(e.doc,t.doc)})),this.Wu(n);var o=t?this.zu():[],u=0===this.Lu.size&&this.current?1:0,s=u!==this.Bu;return this.Bu=u,0!==a.length||s?{snapshot:new AE(this.query,e.qu,i,a,e.mutatedKeys,0===u,s,!1),Hu:o}:{Hu:o}}},{key:"Au",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new NE,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}},{key:"Ju",value:function(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}},{key:"Wu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.$u=t.$u.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.$u=t.$u.delete(e)})),this.current=e.current)}},{key:"zu",value:function(){var e=this;if(!this.current)return[];var t=this.Lu;this.Lu=Mb(),this.qu.forEach((function(t){e.Ju(t.key)&&(e.Lu=e.Lu.add(t.key))}));var n=[];return t.forEach((function(t){e.Lu.has(t)||n.push(new WE(t))})),this.Lu.forEach((function(e){t.has(e)||n.push(new GE(e))})),n}},{key:"Yu",value:function(e){this.$u=e.li,this.Lu=Mb();var t=this.Gu(e.documents);return this.applyChanges(t,!0)}},{key:"Xu",value:function(){return AE.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}]),e}(),QE=un((function e(t,n,r){an(this,e),this.query=t,this.targetId=n,this.view=r})),YE=un((function e(t){an(this,e),this.key=t,this.Zu=!1})),XE=function(){function e(t,n,r,i,a,o){an(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.ta={},this.ea=new xb((function(e){return Dk(e)}),Pk),this.na=new Map,this.sa=new Set,this.ia=new _b(kg.comparator),this.ra=new Map,this.oa=new aI,this.ua={},this.aa=new Map,this.ca=o_.yn(),this.onlineState="Unknown",this.ha=void 0}return un(e,[{key:"isPrimaryClient",get:function(){return!0===this.ha}}]),e}();function $E(e,t){return JE.apply(this,arguments)}function JE(){return JE=a(h().mark((function e(t,n){var r,i,a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=KS(t),!(o=r.ea.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Xu(),e.next=15;break;case 6:return e.next=8,W_(r.localStore,Ak(n));case 8:return u=e.sent,r.isPrimaryClient&&qI(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,ZE(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),JE.apply(this,arguments)}function ZE(e,t,n,r){return eS.apply(this,arguments)}function eS(){return eS=a(h().mark((function e(t,n,r,i){var o,u,s,c,l,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.la=function(e,n,r){return function(){var e=a(h().mark((function e(t,n,r,i){var a,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Gu(r),e.t0=a.ni,!e.t0){e.next=6;break}return e.next=5,Y_(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Gu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(bS(t,n.targetId,u.Hu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Y_(t.localStore,n,!0);case 3:return o=e.sent,u=new HE(n,o.li),s=u.Gu(o.documents),c=Vb.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),l=u.applyChanges(s,t.isPrimaryClient,c),bS(t,r,l.Hu),f=new QE(n,r,u),e.abrupt("return",(t.ea.set(n,f),t.na.has(r)?t.na.get(r).push(n):t.na.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),eS.apply(this,arguments)}function tS(e,t){return nS.apply(this,arguments)}function nS(){return nS=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Py(t),i=r.ea.get(n),!((a=r.na.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.na.set(i.targetId,a.filter((function(e){return!Pk(e,n)}))),void r.ea.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,H_(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),KI(r.remoteStore,i.targetId),gS(r,i.targetId)})).catch(f_);case 9:e.next=14;break;case 11:return gS(r,i.targetId),e.next=14,H_(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),nS.apply(this,arguments)}function rS(e,t,n){return iS.apply(this,arguments)}function iS(){return iS=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=GS(t),e.prev=1,e.next=4,function(e,t){var n,r=Py(e),i=Xy.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Mb());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ci.Ks(e,a).next((function(a){n=a;var o,u=[],s=sn(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=ub(c,n.get(c.key));null!=l&&u.push(new fb(c.key,l,zg(l.value.mapValue),nb.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.Bs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ua[e.currentUser.toKey()];r||(r=new _b(Hy)),r=r.insert(t,n),e.ua[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,_S(i,a.changes);case 9:return e.next=11,oE(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=TE(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),iS.apply(this,arguments)}function aS(e,t){return oS.apply(this,arguments)}function oS(){return oS=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Py(t),e.prev=1,e.next=4,q_(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ra.get(t);n&&(Ry(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Zu=!0:e.modifiedDocuments.size>0?Ry(n.Zu):e.removedDocuments.size>0&&(Ry(n.Zu),n.Zu=!1))})),e.next=8,_S(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,f_(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),oS.apply(this,arguments)}function uS(e,t,n){var r=Py(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ea.forEach((function(e,n){var r=n.view.Au(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Py(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=sn(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Au(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&jE(n)}(r.eventManager,t),i.length&&r.ta.Qo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function sS(e,t,n){return cS.apply(this,arguments)}function cS(){return cS=a(h().mark((function e(t,n,r){var i,a,o,u,s,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Py(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ra.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new _b(kg.comparator)).insert(o,qg.newNoDocument(o,$y.min())),s=Mb().add(o),c=new jb($y.min(),new Map,new Sb(Hy),u,s),e.next=9,aS(i,c);case 9:i.ia=i.ia.remove(o),i.ra.delete(n),xS(i),e.next=16;break;case 14:return e.next=16,H_(i.localStore,n,!1).then((function(){return gS(i,n,r)})).catch(f_);case 16:case"end":return e.stop()}}),e)}))),cS.apply(this,arguments)}function lS(e,t){return fS.apply(this,arguments)}function fS(){return fS=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Py(t),i=n.batch.batchId,e.prev=1,e.next=4,B_(r.localStore,n);case 4:return a=e.sent,yS(r,i,null),mS(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,_S(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,f_(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),fS.apply(this,arguments)}function hS(e,t,n){return dS.apply(this,arguments)}function dS(){return dS=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Py(t),e.prev=1,e.next=4,function(e,t){var n=Py(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return Ry(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.ci.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,yS(i,n,r),mS(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,_S(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,f_(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),dS.apply(this,arguments)}function pS(e,t){return vS.apply(this,arguments)}function vS(){return vS=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return YI((r=Py(t)).remoteStore)||Sy("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Py(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.aa.get(i)||[]).push(n),r.aa.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=TE(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),vS.apply(this,arguments)}function mS(e,t){(e.aa.get(t)||[]).forEach((function(e){e.resolve()})),e.aa.delete(t)}function yS(e,t,n){var r=Py(e),i=r.ua[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ua[r.currentUser.toKey()]=i}}function gS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=sn(e.na.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ea.delete(a),n&&e.ta.fa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.na.delete(t),e.isPrimaryClient&&e.oa.Pi(t).forEach((function(t){e.oa.containsKey(t)||kS(e,t)}))}function kS(e,t){e.sa.delete(t.path.canonicalString());var n=e.ia.get(t);null!==n&&(KI(e.remoteStore,n),e.ia=e.ia.remove(t),e.ra.delete(n),xS(e))}function bS(e,t,n){var r,i=sn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof GE?(e.oa.addReference(a.key,t),wS(e,a)):a instanceof WE?(Sy("SyncEngine","Document no longer in limbo: "+a.key),e.oa.removeReference(a.key,t),e.oa.containsKey(a.key)||kS(e,a.key)):Ay()}}catch(o){i.e(o)}finally{i.f()}}function wS(e,t){var n=t.key,r=n.path.canonicalString();e.ia.get(n)||e.sa.has(r)||(Sy("SyncEngine","New document in limbo: "+n),e.sa.add(r),xS(e))}function xS(e){for(;e.sa.size>0&&e.ia.size<e.maxConcurrentLimboResolutions;){var t=e.sa.values().next().value;e.sa.delete(t);var n=new kg(ng.fromString(t)),r=e.ca.next();e.ra.set(r,new YE(n)),e.ia=e.ia.insert(n,r),qI(e.remoteStore,new vx(Ak(_k(n.path)),r,2,Ky.A))}}function _S(e,t,n){return IS.apply(this,arguments)}function IS(){return IS=a(h().mark((function e(t,n,r){var i,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Py(t),o=[],u=[],s=[],e.t0=i.ea.isEmpty(),e.t0){e.next=9;break}return i.ea.forEach((function(e,t){s.push(i.la(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),o.push(e);var n=L_.Ys(t.targetId,e);u.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.ta.Qo(o),e.next=9,function(){var e=a(h().mark((function e(t,n){var r,i,a,o,u,s,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Py(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return ex.forEach(n,(function(t){return ex.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return ex.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),ax(e.t0)){e.next=10;break}throw e.t0;case 10:Sy("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=sn(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ii.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.ii=r.ii.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,u);case 9:case"end":return e.stop()}}),e)}))),IS.apply(this,arguments)}function ES(e,t){return SS.apply(this,arguments)}function SS(){return SS=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Py(t)).currentUser.isEqual(n)){e.next=11;break}return Sy("SyncEngine","User change. New user:",n.toKey()),e.next=5,j_(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.aa.forEach((function(e){e.forEach((function(e){e.reject(new Oy(Dy.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.aa.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,_S(r,i.hi);case 11:case"end":return e.stop()}}),e)}))),SS.apply(this,arguments)}function TS(e,t){var n=Py(e),r=n.ra.get(t);if(r&&r.Zu)return Mb().add(r.key);var i=Mb(),a=n.na.get(t);if(!a)return i;var o,u=sn(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ea.get(s);i=i.unionWith(c.view.Ku)}}catch(l){u.e(l)}finally{u.f()}return i}function CS(e,t){return NS.apply(this,arguments)}function NS(){return NS=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Py(t),e.next=3,Y_(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Yu(i),e.abrupt("return",(r.isPrimaryClient&&bS(r,n.targetId,a.Hu),a));case 6:case"end":return e.stop()}}),e)}))),NS.apply(this,arguments)}function AS(e,t){return RS.apply(this,arguments)}function RS(){return RS=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Py(t),e.abrupt("return",$_(r.localStore,n).then((function(e){return _S(r,e)})));case 2:case"end":return e.stop()}}),e)}))),RS.apply(this,arguments)}function PS(e,t,n,r){return DS.apply(this,arguments)}function DS(){return DS=a(h().mark((function e(t,n,r,i){var a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Py(t),e.next=3,function(e,t){var n=Py(e),r=Py(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.ci.Ks(e,t):ex.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,oE(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(yS(a,n,i||null),mS(a,n),function(e,t){Py(Py(e).Bs)._n(t)}(a.localStore,n)):Ay();case 11:return e.next=13,_S(a,o);case 13:e.next=16;break;case 15:Sy("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),DS.apply(this,arguments)}function OS(e,t){return LS.apply(this,arguments)}function LS(){return LS=a(h().mark((function e(t,n){var r,i,a,o,u,s,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(KS(r=Py(t)),GS(r),!0!==n||!0===r.ha){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,MS(r,i.toArray());case 5:return a=e.sent,r.ha=!0,e.next=9,xE(r.remoteStore,!0);case 9:o=sn(a);try{for(o.s();!(u=o.n()).done;)s=u.value,qI(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ha){e.next=25;break}return c=[],l=Promise.resolve(),r.na.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return gS(r,t),H_(r.localStore,t,!0)})),KI(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,MS(r,c);case 21:return function(e){var t=Py(e);t.ra.forEach((function(e,n){KI(t.remoteStore,n)})),t.oa.bi(),t.ra=new Map,t.ia=new _b(kg.comparator)}(r),r.ha=!1,e.next=25,xE(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),LS.apply(this,arguments)}function MS(e,t,n){return FS.apply(this,arguments)}function FS(){return FS=a(h().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,d,p,v,m,y,g;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Py(t),a=[],o=[],u=sn(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.na.get(c))||0===f.length){e.next=34;break}return e.next=11,W_(i.localStore,Ak(f[0]));case 11:l=e.sent,d=sn(f),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,m=i.ea.get(v),e.next=20,CS(i,m);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,X_(i.localStore,c);case 36:return g=e.sent,e.next=39,W_(i.localStore,g);case 39:return l=e.sent,e.next=42,ZE(i,US(g),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.ta.Qo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),FS.apply(this,arguments)}function US(e){return xk(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function jS(e){var t=Py(e);return Py(Py(t.localStore).persistence).Fs()}function VS(e,t,n,r){return BS.apply(this,arguments)}function BS(){return BS=a(h().mark((function e(t,n,r,i){var a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Py(t)).ha){e.next=3;break}return e.abrupt("return",void Sy("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.na.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,$_(a.localStore,Mk(o[0]));case 10:return u=e.sent,s=jb.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,_S(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,H_(a.localStore,n,!0);case 17:return gS(a,n,i),e.abrupt("break",20);case 19:Ay();case 20:case"end":return e.stop()}}),e)}))),BS.apply(this,arguments)}function zS(e,t,n){return qS.apply(this,arguments)}function qS(){return qS=a(h().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=KS(t)).ha){e.next=45;break}a=sn(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.na.has(u)){e.next=10;break}return Sy("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,X_(i.localStore,u);case 12:return s=e.sent,e.next=15,W_(i.localStore,s);case 15:return c=e.sent,e.next=18,ZE(i,US(s),c.targetId,!1);case 18:qI(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=sn(r),e.prev=30,d=h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.na.has(t),!e.t0){e.next=5;break}return e.next=5,H_(i.localStore,t,!1).then((function(){KI(i.remoteStore,t),gS(i,t)})).catch(f_);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),qS.apply(this,arguments)}function KS(e){var t=Py(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=aS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=TS.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=sS.bind(null,t),t.ta.Qo=FE.bind(null,t.eventManager),t.ta.fa=UE.bind(null,t.eventManager),t}function GS(e){var t=Py(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=lS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=hS.bind(null,t),t}function WS(e,t,n){var r=Py(e);(function(){var e=a(h().mark((function e(t,n,r){var i,a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Py(e),r=ew(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(KE(i)),a=new qE(i,t.localStore,n.M),e.next=15,n.da();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.ku(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.da();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,_S(t,s.Fu,void 0);case 31:return e.next=33,function(e,t){var n=Py(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Cy("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var HS=function(){function e(){an(this,e),this.synchronizeTabs=!1}return un(e,[{key:"initialize",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=RI(t.databaseInfo.databaseId),this.sharedClientState=this._a(t),this.persistence=this.wa(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.ma(t),this.localStore=this.ga(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ma",value:function(e){return null}},{key:"ga",value:function(e){return U_(this.persistence,new M_,e.initialUser,this.M)}},{key:"wa",value:function(e){return new fI(dI.zi,this.M)}},{key:"_a",value:function(e){return new _I}},{key:"terminate",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),QS=function(e){ln(n,e);var t=vn(n);function n(e,r,i){var a;return an(this,n),(a=t.call(this)).ya=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return un(n,[{key:"initialize",value:function(){var e=a(h().mark((function e(t){var r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ha(fn(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ya.initialize(this,t);case 4:return e.next=6,GS(this.ya.syncEngine);case 6:return e.next=8,oE(this.ya.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){return U_(this.persistence,new M_,e.initialUser,this.M)}},{key:"ma",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new v_(t,e.asyncQueue)}},{key:"wa",value:function(e){var t=D_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Jx.withCacheSize(this.cacheSizeBytes):Jx.DEFAULT;return new A_(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,NI(),AI(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"_a",value:function(e){return new _I}}]),n}(HS),YS=function(e){ln(n,e);var t=vn(n);function n(e,r){var i;return an(this,n),(i=t.call(this,e,r,!1)).ya=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return un(n,[{key:"initialize",value:function(){var e=a(h().mark((function e(t){var r,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ha(fn(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ya.syncEngine,e.t0=this.sharedClientState instanceof xI,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Mr:PS.bind(null,r),Or:VS.bind(null,r),Fr:zS.bind(null,r),Fs:jS.bind(null,r),kr:AS.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,OS(i.ya.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_a",value:function(e){var t=NI();if(!xI.vt(t))throw new Oy(Dy.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=D_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xI(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(QS),XS=function(){function e(){an(this,e)}return un(e,[{key:"initialize",value:function(){var e=a(h().mark((function e(t,n){var r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return uS(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ES.bind(null,this.syncEngine),e.next=12,xE(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new PE}},{key:"createDatastore",value:function(e){var t,n=RI(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new CI(t));return function(e,t,n,r){return new MI(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return uS(o.syncEngine,e,0)},a=EI.vt()?new EI:new II,new UI(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new XE(e,t,n,r,i,a);return o&&(u.ha=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Py(t),Sy("RemoteStore","RemoteStore shutting down."),n.fu.add(5),e.next=5,BI(n);case 5:n._u.shutdown(),n.wu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function $S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return a(h().mark((function r(){var i;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var JS=function(){function e(t){an(this,e),this.observer=t,this.muted=!1}return un(e,[{key:"next",value:function(e){this.observer.next&&this.pa(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Ia",value:function(){this.muted=!0}},{key:"pa",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),ZS=function(){function e(t,n){var r=this;an(this,e),this.Ta=t,this.M=n,this.metadata=new Ly,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then((function(e){e&&e.xu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return un(e,[{key:"close",value:function(){return this.Ta.cancel()}},{key:"getMetadata",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"da",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Aa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Aa",value:function(){var e=a(h().mark((function e(){var t,n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ea.decode(t),r=Number(n),isNaN(r)&&this.Pa("length string (".concat(n,") is not valid number")),e.next=9,this.ba(r);case 9:return i=e.sent,e.abrupt("return",new BE(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Va",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ra",value:function(){var e=a(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Va()<0)){e.next=7;break}return e.next=3,this.va();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Va())<0&&this.Pa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.va();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ea.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pa",value:function(e){throw this.Ta.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"va",value:function(){var e=a(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ta.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),eT=function(){function e(t){an(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return un(e,[{key:"lookup",value:function(){var e=a(h().mark((function e(t){var n,r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Oy(Dy.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=a(h().mark((function e(t,n){var r,i,a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Py(t),i=uw(r.M)+"/documents",a={documents:n.map((function(e){return rw(r.M,e)}))},e.next=5,r.ho("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=fw(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Ry(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new yb(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=a(h().mark((function e(){var t,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=kg.fromPath(t);n.mutations.push(new gb(r,n.precondition(r)))})),e.next=7,function(){var e=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Py(t),i=uw(r.M)+"/documents",a={writes:n.map((function(e){return hw(r.M,e)}))},e.next=3,r.oo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ay();t=$y.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Oy(Dy.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?nb.updateTime(t):nb.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual($y.min()))throw new Oy(Dy.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nb.updateTime(t)}return nb.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),tT=function(){function e(t,n,r,i){an(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new PI(this.asyncQueue,"transaction_retry")}return un(e,[{key:"run",value:function(){this.Sa-=1,this.Da()}},{key:"Da",value:function(){var e=this;this.Do.To(a(h().mark((function t(){var n,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new eT(e.datastore),(r=e.Ca(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.xa(t)}))}))})).catch((function(t){e.xa(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Ca",value:function(e){try{var t=this.updateFunction(e);return!mg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"xa",value:function(e){var t=this;this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Da(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Na",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!bb(t)}return!1}}]),e}(),nT=function(){function e(t,n,r,i){var o=this;an(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=xy.UNAUTHENTICATED,this.clientId=Wy.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sy("FirestoreClient","Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Sy("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return un(e,[{key:"getConfiguration",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Oy(Dy.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Ly;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(a(h().mark((function n(){var r;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=TE(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function rT(e,t){return iT.apply(this,arguments)}function iT(){return iT=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Sy("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,j_(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),iT.apply(this,arguments)}function aT(e,t){return oT.apply(this,arguments)}function oT(){return oT=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,uT(t);case 3:return r=e.sent,Sy("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return bE(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return bE(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),oT.apply(this,arguments)}function uT(e){return sT.apply(this,arguments)}function sT(){return sT=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Sy("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,rT(t,new HS);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),sT.apply(this,arguments)}function cT(e){return lT.apply(this,arguments)}function lT(){return lT=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Sy("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,aT(t,new XS);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),lT.apply(this,arguments)}function fT(e){return uT(e).then((function(e){return e.persistence}))}function hT(e){return uT(e).then((function(e){return e.localStore}))}function dT(e){return cT(e).then((function(e){return e.remoteStore}))}function pT(e){return cT(e).then((function(e){return e.syncEngine}))}function vT(e){return mT.apply(this,arguments)}function mT(){return mT=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cT(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=$E.bind(null,n.syncEngine),r.onUnlisten=tS.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),mT.apply(this,arguments)}function yT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ly;return e.asyncQueue.enqueueAndForget(a(h().mark((function i(){return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new JS({next:function(a){t.enqueueAndForget((function(){return LE(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Oy(Dy.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Oy(Dy.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new VE(_k(n.path),a,{includeMetadataChanges:!0,Cu:!0});return DE(e,o)},i.next=3,vT(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function gT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ly;return e.asyncQueue.enqueueAndForget(a(h().mark((function i(){return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new JS({next:function(n){t.enqueueAndForget((function(){return LE(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Oy(Dy.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new VE(n,a,{includeMetadataChanges:!0,Cu:!0});return DE(e,o)},i.next=3,vT(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var kT=new Map;function bT(e,t,n){if(!n)throw new Oy(Dy.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function wT(e,t,n,r){if(!0===t&&!0===r)throw new Oy(Dy.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function xT(e){if(!kg.isDocumentKey(e))throw new Oy(Dy.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function _T(e){if(kg.isDocumentKey(e))throw new Oy(Dy.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function IT(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Ay()}function ET(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Oy(Dy.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=IT(e);throw new Oy(Dy.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function ST(e,t){if(t<=0)throw new Oy(Dy.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var TT=function(){function e(t){var n;if(an(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Oy(Dy.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Oy(Dy.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,wT("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return un(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),CT=function(){function e(t,n,r){an(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TT({}),this._settingsFrozen=!1,t instanceof vg?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Oy(Dy.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vg(e.options.projectId)}(t))}return un(e,[{key:"app",get:function(){if(!this._app)throw new Oy(Dy.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Oy(Dy.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TT(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Fy;switch(e.type){case"gapi":var t=e.client;return Ry(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new By(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Oy(Dy.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=kT.get(e);t&&(Sy("ComponentProvider","Removing Datastore"),kT.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function NT(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=ET(e,CT))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Cy("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=xy.MOCK_USER;else{o=In(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Oy(Dy.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new xy(s)}e._authCredentials=new Uy(new My(o,u))}}var AT=function(){function e(t,n,r){an(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return un(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new PT(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),RT=function(){function e(t,n,r){an(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return un(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),PT=function(e){ln(n,e);var t=vn(n);function n(e,r,i){var a;return an(this,n),(a=t.call(this,e,r,_k(i)))._path=i,a.type="collection",a}return un(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new AT(this.firestore,null,new kg(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(RT);function DT(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Gn(e),bT("collection","path",t),e instanceof CT){var a=ng.fromString.apply(ng,[t].concat(r));return _T(a),new PT(e,null,a)}if(!(e instanceof AT||e instanceof PT))throw new Oy(Dy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ng.fromString.apply(ng,[t].concat(r)));return _T(o),new PT(e.firestore,null,o)}function OT(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Gn(e),1===arguments.length&&(t=Wy.R()),bT("doc","path",t),e instanceof CT){var a=ng.fromString.apply(ng,[t].concat(r));return xT(a),new AT(e,null,new kg(a))}if(!(e instanceof AT||e instanceof PT))throw new Oy(Dy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ng.fromString.apply(ng,[t].concat(r)));return xT(o),new AT(e.firestore,e instanceof PT?e.converter:null,new kg(o))}function LT(e,t){return e=Gn(e),t=Gn(t),(e instanceof AT||e instanceof PT)&&(t instanceof AT||t instanceof PT)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function MT(e,t){return e=Gn(e),t=Gn(t),e instanceof RT&&t instanceof RT&&e.firestore===t.firestore&&Pk(e._query,t._query)&&e.converter===t.converter}var FT=function(){function e(){var t=this;an(this,e),this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new PI(this,"async_queue_retry"),this.qa=function(){var e=AI();e&&Sy("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Do.Ao()};var n=AI();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qa)}return un(e,[{key:"isShuttingDown",get:function(){return this.Oa}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Ka(),this.Ga(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;var t=AI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.Ka(),this.Oa)return new Promise((function(){}));var n=new Ly;return this.Ga((function(){return t.Oa&&t.La?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Ma.push(e),t.Qa()}))}},{key:"Qa",value:function(){var e=a(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Ma.length){e.next=14;break}return e.prev=1,e.next=4,this.Ma[0]();case 4:this.Ma.shift(),this.Do.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),ax(e.t0)){e.next=12;break}throw e.t0;case 12:Sy("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Ma.length>0&&this.Do.To((function(){return t.Qa()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Ga",value:function(e){var t=this,n=this.ka.then((function(){return t.Ba=!0,e().catch((function(e){t.$a=e,t.Ba=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ty("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ba=!1,e}))}));return this.ka=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);var i=SE.createAndSchedule(this,e,t,n,(function(e){return r.ja(e)}));return this.Fa.push(i),i}},{key:"Ka",value:function(){this.$a&&Ay()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Wa",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ka,e.next=3,t;case 3:if(t!==this.ka){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"za",value:function(e){var t,n=sn(this.Fa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Ha",value:function(e){var t=this;return this.Wa().then((function(){t.Fa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=sn(t.Fa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Wa()}))}},{key:"Ja",value:function(e){this.Ua.push(e)}},{key:"ja",value:function(e){var t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}]),e}();function UT(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=sn(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var jT=function(){function e(){an(this,e),this._progressObserver={},this._taskCompletionResolver=new Ly,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return un(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),VT=function(e){ln(n,e);var t=vn(n);function n(e,r,i){var a;return an(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new FT,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return un(n,[{key:"_terminate",value:function(){return this._firestoreClient||zT(this),this._firestoreClient.terminate()}}]),n}(CT);function BT(e){return e._firestoreClient||zT(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function zT(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new pg(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new nT(e._authCredentials,e._appCheckCredentials,e._queue,r)}function qT(e,t,n){var r=new Ly;return e.asyncQueue.enqueue(a(h().mark((function i(){return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,rT(e,n);case 3:return i.next=5,aT(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Dy.FAILED_PRECONDITION||e.code===Dy.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function KT(e){return function(e){return e.asyncQueue.enqueue(a(h().mark((function t(){var n,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fT(e);case 2:return n=t.sent,t.next=5,dT(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Py(e);return t.fu.delete(0),jI(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(BT(e=ET(e,VT)))}function GT(e){return function(e){return e.asyncQueue.enqueue(a(h().mark((function t(){var n,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fT(e);case 2:return n=t.sent,t.next=5,dT(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Py(t)).fu.add(0),e.next=4,BI(n);case 4:n.wu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(BT(e=ET(e,VT)))}function WT(e,t){var n=BT(e=ET(e,VT)),r=new jT;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new ZS(e,t)}(function(e,t){if(e instanceof Uint8Array)return $S(e,t);if(e instanceof ArrayBuffer)return $S(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,RI(t));e.asyncQueue.enqueueAndForget(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=WS,t.next=3,pT(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function HT(e,t){return function(e,t){return e.asyncQueue.enqueue(a(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Py(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,hT(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(BT(e=ET(e,VT)),t).then((function(t){return t?new RT(e,null,t.query):null}))}function QT(e){if(e._initialized||e._terminated)throw new Oy(Dy.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var YT=function(){function e(){an(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Oy(Dy.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ig(n)}return un(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var XT=function(){function e(t){an(this,e),this._byteString=t}return un(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(og.fromBase64String(t))}catch(t){throw new Oy(Dy.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(og.fromUint8Array(t))}}]),e}(),$T=un((function e(t){an(this,e),this._methodName=t})),JT=function(){function e(t,n){if(an(this,e),!isFinite(t)||t<-90||t>90)throw new Oy(Dy.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Oy(Dy.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return un(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Hy(this._lat,e._lat)||Hy(this._long,e._long)}}]),e}(),ZT=/^__.*__$/,eC=function(){function e(t,n,r){an(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return un(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new fb(e,this.data,this.fieldMask,t,this.fieldTransforms):new lb(e,this.data,t,this.fieldTransforms)}}]),e}(),tC=function(){function e(t,n,r){an(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return un(e,[{key:"toMutation",value:function(e,t){return new fb(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function nC(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ay()}}var rC=function(){function e(t,n,r,i,a,o){an(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ya(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return un(e,[{key:"path",get:function(){return this.settings.path}},{key:"Xa",get:function(){return this.settings.Xa}},{key:"Za",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"tc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.nc(e),r}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.Ya(),r}},{key:"ic",value:function(e){return this.Za({path:void 0,ec:!0})}},{key:"rc",value:function(e){return _C(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ya",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.nc(this.path.get(e))}},{key:"nc",value:function(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(nC(this.Xa)&&ZT.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}]),e}(),iC=function(){function e(t,n,r){an(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||RI(t)}return un(e,[{key:"ac",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new rC({Xa:e,methodName:t,uc:n,path:ig.emptyPath(),ec:!1,oc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function aC(e){var t=e._freezeSettings(),n=RI(e._databaseId);return new iC(e._databaseId,!!t.ignoreUndefinedProperties,n)}function oC(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ac(a.merge||a.mergeFields?2:0,t,n,i);kC("Data must be an object, but it was:",o,r);var u,s,c=yC(r,o);if(a.merge)u=new ag(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=sn(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=bC(t,d,n);if(!o.contains(p))throw new Oy(Dy.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));IC(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new ag(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new eC(new Bg(c),u,s)}var uC=function(e){ln(n,e);var t=vn(n);function n(){return an(this,n),t.apply(this,arguments)}return un(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Xa)throw 1===e.Xa?e.rc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.rc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}($T);function sC(e,t,n){return new rC({Xa:3,uc:t.settings.uc,methodName:e._methodName,ec:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var cC=function(e){ln(n,e);var t=vn(n);function n(){return an(this,n),t.apply(this,arguments)}return un(n,[{key:"_toFieldTransform",value:function(e){return new eb(e.path,new Wk)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}($T),lC=function(e){ln(n,e);var t=vn(n);function n(e,r){var i;return an(this,n),(i=t.call(this,e)).cc=r,i}return un(n,[{key:"_toFieldTransform",value:function(e){var t=sC(this,e,!0),n=this.cc.map((function(e){return mC(e,t)})),r=new Hk(n);return new eb(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}($T),fC=function(e){ln(n,e);var t=vn(n);function n(e,r){var i;return an(this,n),(i=t.call(this,e)).cc=r,i}return un(n,[{key:"_toFieldTransform",value:function(e){var t=sC(this,e,!0),n=this.cc.map((function(e){return mC(e,t)})),r=new Yk(n);return new eb(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}($T),hC=function(e){ln(n,e);var t=vn(n);function n(e,r){var i;return an(this,n),(i=t.call(this,e)).hc=r,i}return un(n,[{key:"_toFieldTransform",value:function(e){var t=new $k(e.M,Bk(e.M,this.hc));return new eb(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}($T);function dC(e,t,n,r){var i=e.ac(1,t,n);kC("Data must be an object, but it was:",i,r);var a=[],o=Bg.empty();Zy(r,(function(e,r){var u=xC(t,e,n);r=Gn(r);var s=i.sc(u);if(r instanceof uC)a.push(u);else{var c=mC(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new ag(a);return new tC(o,u,i.fieldTransforms)}function pC(e,t,n,r,i,a){var o=e.ac(1,t,n),u=[bC(t,r,n)],s=[i];if(a.length%2!=0)throw new Oy(Dy.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(bC(t,a[c])),s.push(a[c+1]);for(var l=[],f=Bg.empty(),h=u.length-1;h>=0;--h)if(!IC(l,u[h])){var d=u[h],p=s[h];p=Gn(p);var v=o.sc(d);if(p instanceof uC)l.push(d);else{var m=mC(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new ag(l);return new tC(f,y,o.fieldTransforms)}function vC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return mC(n,e.ac(r?4:3,t))}function mC(e,t){if(gC(e=Gn(e)))return kC("Unsupported field value:",t,e),yC(e,t);if(e instanceof $T)return function(e,t){if(!nC(t.Xa))throw t.rc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.rc("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ec&&4!==t.Xa)throw t.rc("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=sn(e);try{for(a.s();!(n=a.n()).done;){var o=mC(n.value,t.ic(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Gn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Bk(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Xy.fromDate(e);return{timestampValue:$b(t.M,n)}}if(e instanceof Xy){var r=new Xy(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:$b(t.M,r)}}if(e instanceof JT)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof XT)return{bytesValue:Jb(t.M,e._byteString)};if(e instanceof AT){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.rc("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:tw(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.rc("Unsupported field value: ".concat(IT(e)))}(e,t)}function yC(e,t){var n={};return eg(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Zy(e,(function(e,r){var i=mC(r,t.tc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function gC(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Xy||e instanceof JT||e instanceof XT||e instanceof AT||e instanceof $T)}function kC(e,t,n){if(!gC(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=IT(n);throw"an object"===r?t.rc(e+" a custom object"):t.rc(e+" "+r)}}function bC(e,t,n){if((t=Gn(t))instanceof YT)return t._internalPath;if("string"==typeof t)return xC(e,t);throw _C("Field path arguments must be of type string or ",e,!1,void 0,n)}var wC=new RegExp("[~\\*/\\[\\]]");function xC(e,t,n){if(t.search(wC)>=0)throw _C("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return mn(YT,Jn(t.split(".")))._internalPath}catch(r){throw _C("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function _C(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Oy(Dy.INVALID_ARGUMENT,u+e+s)}function IC(e,t){return e.some((function(e){return e.isEqual(t)}))}var EC=function(){function e(t,n,r,i,a){an(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return un(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new AT(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new SC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(TC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),SC=function(e){ln(n,e);var t=vn(n);function n(){return an(this,n),t.apply(this,arguments)}return un(n,[{key:"data",value:function(){return Ha(fn(n.prototype),"data",this).call(this)}}]),n}(EC);function TC(e,t){return"string"==typeof t?xC(e,t):t instanceof YT?t._internalPath:t._delegate._internalPath}var CC=function(){function e(t,n){an(this,e),this.hasPendingWrites=t,this.fromCache=n}return un(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),NC=function(e){ln(n,e);var t=vn(n);function n(e,r,i,a,o,u){var s;return an(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return un(n,[{key:"exists",value:function(){return Ha(fn(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new AC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(TC("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(EC),AC=function(e){ln(n,e);var t=vn(n);function n(){return an(this,n),t.apply(this,arguments)}return un(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ha(fn(n.prototype),"data",this).call(this,e)}}]),n}(NC),RC=function(){function e(t,n,r,i){an(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new CC(i.hasPendingWrites,i.fromCache),this.query=r}return un(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new AC(n._firestore,n._userDataWriter,r.key,r,new CC(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oy(Dy.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new AC(e._firestore,e._userDataWriter,t.doc.key,t.doc,new CC(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new AC(e._firestore,e._userDataWriter,t.doc.key,t.doc,new CC(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:PC(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function PC(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ay()}}function DC(e,t){return e instanceof NC&&t instanceof NC?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof RC&&t instanceof RC&&e._firestore===t._firestore&&MT(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function OC(e){if(Ek(e)&&0===e.explicitOrderBy.length)throw new Oy(Dy.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var LC=un((function e(){an(this,e)}));function MC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var FC=function(e){ln(n,e);var t=vn(n);function n(e,r,i){var a;return an(this,n),(a=t.call(this)).lc=e,a.fc=r,a.dc=i,a.type="where",a}return un(n,[{key:"_apply",value:function(e){var t=aC(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Oy(Dy.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){QC(o,a);var s,c=[],l=sn(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(HC(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=HC(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||QC(o,a),u=vC(n,"where",o,"in"===a||"not-in"===a);var h=uk.create(i,a,u);return function(e,t){if(t.S()){var n=Tk(e);if(null!==n&&!n.isEqual(t.field))throw new Oy(Dy.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Sk(e);null!==r&&YC(e,t.field,r)}var i=function(e,t){var n,r=sn(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Oy(Dy.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Oy(Dy.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new RT(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new wk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(LC);var UC=function(e){ln(n,e);var t=vn(n);function n(e,r){var i;return an(this,n),(i=t.call(this)).lc=e,i._c=r,i.type="orderBy",i}return un(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Oy(Dy.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Oy(Dy.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new yk(t,n);return function(e,t){if(null===Sk(e)){var n=Tk(e);null!==n&&YC(e,n,t.field)}}(e,r),r}(e._query,this.lc,this._c);return new RT(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new wk(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(LC);var jC=function(e){ln(n,e);var t=vn(n);function n(e,r,i){var a;return an(this,n),(a=t.call(this)).type=e,a.wc=r,a.mc=i,a}return un(n,[{key:"_apply",value:function(e){return new RT(e.firestore,e.converter,Rk(e._query,this.wc,this.mc))}}]),n}(LC);var VC=function(e){ln(n,e);var t=vn(n);function n(e,r,i){var a;return an(this,n),(a=t.call(this)).type=e,a.gc=r,a.yc=i,a}return un(n,[{key:"_apply",value:function(e){var t=WC(e,this.type,this.gc,this.yc);return new RT(e.firestore,e.converter,function(e,t){return new wk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(LC);function BC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new VC("startAt",t,!0)}function zC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new VC("startAfter",t,!1)}var qC=function(e){ln(n,e);var t=vn(n);function n(e,r,i){var a;return an(this,n),(a=t.call(this)).type=e,a.gc=r,a.yc=i,a}return un(n,[{key:"_apply",value:function(e){var t=WC(e,this.type,this.gc,this.yc);return new RT(e.firestore,e.converter,function(e,t){return new wk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(LC);function KC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new qC("endBefore",t,!1)}function GC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new qC("endAt",t,!0)}function WC(e,t,n,r){if(n[0]=Gn(n[0]),n[0]instanceof EC)return function(e,t,n,r,i){if(!r)throw new Oy(Dy.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=sn(Nk(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Ng(t,r.key));else{var c=r.data.field(s.field);if(fg(c))throw new Oy(Dy.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Oy(Dy.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new mk(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=aC(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Oy(Dy.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Oy(Dy.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Ck(e)&&-1!==c.indexOf("/"))throw new Oy(Dy.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(ng.fromString(c));if(!kg.isDocumentKey(l))throw new Oy(Dy.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new kg(l);u.push(Ng(t,f))}else{var h=vC(n,r,c);u.push(h)}}return new mk(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function HC(e,t,n){if("string"==typeof(n=Gn(n))){if(""===n)throw new Oy(Dy.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ck(t)&&-1!==n.indexOf("/"))throw new Oy(Dy.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(ng.fromString(n));if(!kg.isDocumentKey(r))throw new Oy(Dy.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ng(e,new kg(r))}if(n instanceof AT)return Ng(e,n._key);throw new Oy(Dy.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(IT(n),"."))}function QC(e,t){if(!Array.isArray(e)||0===e.length)throw new Oy(Dy.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Oy(Dy.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function YC(e,t,n){if(!n.isEqual(t))throw new Oy(Dy.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var XC=function(){function e(){an(this,e)}return un(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(xg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cg(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ay()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Zy(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new JT(cg(e.latitude),cg(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=hg(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(dg(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=sg(e);return new Xy(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=ng.fromString(e);Ry(Ew(n));var r=new vg(n.get(1),n.get(3)),i=new kg(n.popFirst(5));return r.isEqual(t)||Ty("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function $C(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var JC=function(e){ln(n,e);var t=vn(n);function n(e){var r;return an(this,n),(r=t.call(this)).firestore=e,r}return un(n,[{key:"convertBytes",value:function(e){return new XT(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new AT(this.firestore,null,t)}}]),n}(XC),ZC=function(){function e(t,n){an(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=aC(t)}return un(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=eN(e,this._firestore),i=$C(r.converter,t,n),a=oC(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,nb.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=eN(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Gn(t))||t instanceof YT?pC(this._dataReader,"WriteBatch.update",i._key,t,n,o):dC(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,nb.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=eN(e,this._firestore);return this._mutations=this._mutations.concat(new yb(t._key,nb.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Oy(Dy.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function eN(e,t){if((e=Gn(e)).firestore!==t)throw new Oy(Dy.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var tN=function(e){ln(n,e);var t=vn(n);function n(e){var r;return an(this,n),(r=t.call(this)).firestore=e,r}return un(n,[{key:"convertBytes",value:function(e){return new XT(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new AT(this.firestore,null,t)}}]),n}(XC);function nN(e){e=ET(e,AT);var t=ET(e.firestore,VT),n=BT(t),r=new tN(t);return function(e,t){var n=new Ly;return e.asyncQueue.enqueueAndForget(a(h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Py(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.ci.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Oy(Dy.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=TE(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,hT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new NC(t,r,e._key,n,new CC(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function rN(e){e=ET(e,RT);var t=ET(e.firestore,VT),n=BT(t),r=new tN(t);return function(e,t){var n=new Ly;return e.asyncQueue.enqueueAndForget(a(h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=a(h().mark((function e(t,n,r){var i,a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y_(t,n,!0);case 3:i=e.sent,a=new HE(n,i.li),o=a.Gu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=TE(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,hT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new RC(t,r,e,n)}))}function iN(e,t,n){e=ET(e,AT);var r=ET(e.firestore,VT),i=$C(e.converter,t,n);return sN(r,[oC(aC(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,nb.none())])}function aN(e,t,n){e=ET(e,AT);for(var r=ET(e.firestore,VT),i=aC(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return sN(r,[("string"==typeof(t=Gn(t))||t instanceof YT?pC(i,"updateDoc",e._key,t,n,o):dC(i,"updateDoc",e._key,t)).toMutation(e._key,nb.exists(!0))])}function oN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,u;e=Gn(e);var s={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||UT(n[c])||(s=n[c],c++);var l,f,d,p={includeMetadataChanges:s.includeMetadataChanges};if(UT(n[c])){var v=n[c];n[c]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[c+1]=null===(o=v.error)||void 0===o?void 0:o.bind(v),n[c+2]=null===(u=v.complete)||void 0===u?void 0:u.bind(v)}if(e instanceof AT)f=ET(e.firestore,VT),d=_k(e._key.path),l={next:function(t){n[c]&&n[c](cN(f,e,t))},error:n[c+1],complete:n[c+2]};else{var m=ET(e,RT);f=ET(m.firestore,VT),d=m._query;var y=new tN(f);l={next:function(e){n[c]&&n[c](new RC(f,y,m,e))},error:n[c+1],complete:n[c+2]},OC(e._query)}return function(e,t,n,r){var i=new JS(r),o=new VE(t,i,n);return e.asyncQueue.enqueueAndForget(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=DE,t.next=3,vT(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Ia(),e.asyncQueue.enqueueAndForget(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=LE,t.next=3,vT(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(BT(f),d,p,l)}function uN(e,t){return function(e,t){var n=new JS(t);return e.asyncQueue.enqueueAndForget(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Py(e).Eu.add(t),t.next()},t.next=3,vT(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Ia(),e.asyncQueue.enqueueAndForget(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Py(e).Eu.delete(t)},t.next=3,vT(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(BT(e=ET(e,VT)),UT(t)?t:{next:t})}function sN(e,t){return function(e,t){var n=new Ly;return e.asyncQueue.enqueueAndForget(a(h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=rS,r.next=3,pT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(BT(e),t)}function cN(e,t,n){var r=n.docs.get(t._key),i=new tN(e);return new NC(e,i,t._key,r,new CC(n.hasPendingWrites,n.fromCache),t.converter)}var lN=function(e){ln(n,e);var t=vn(n);function n(e,r){var i;return an(this,n),(i=t.call(this,e,r))._firestore=e,i}return un(n,[{key:"get",value:function(e){var t=this,r=eN(e,this._firestore),i=new tN(this._firestore);return Ha(fn(n.prototype),"get",this).call(this,e).then((function(e){return new NC(t._firestore,i,r._key,e._document,new CC(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){an(this,e),this._firestore=t,this._transaction=n,this._dataReader=aC(t)}return un(e,[{key:"get",value:function(e){var t=this,n=eN(e,this._firestore),r=new JC(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Ay();var i=e[0];if(i.isFoundDocument())return new EC(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new EC(t._firestore,r,n._key,null,n.converter);throw Ay()}))}},{key:"set",value:function(e,t,n){var r=eN(e,this._firestore),i=$C(r.converter,t,n),a=oC(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=eN(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Gn(t))||t instanceof YT?pC(this._dataReader,"Transaction.update",i._key,t,n,o):dC(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=eN(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function fN(e,t){return function(e,t){var n=new Ly;return e.asyncQueue.enqueueAndForget(a(h().mark((function r(){var i;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return cT(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new tT(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(BT(e=ET(e,VT)),(function(n){return t(new lN(e,n))}))}function hN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new lC("arrayUnion",t)}function dN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new fC("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){_y=e}(Ar),_r(new Zn("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new VT(i,new jy(e.getProvider("auth-internal")),new qy(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Mr(wy,"3.4.8",e),Mr(wy,"3.4.8","esm2017")}();function pN(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Oy("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function vN(){if("undefined"===typeof Uint8Array)throw new Oy("unimplemented","Uint8Arrays are not available in this environment.")}function mN(){if("undefined"==typeof atob)throw new Oy("unimplemented","Blobs are unavailable in Firestore in this environment.")}var yN=function(){function e(t){an(this,e),this._delegate=t}return un(e,[{key:"toBase64",value:function(){return mN(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return vN(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return mN(),new e(XT.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return vN(),new e(XT.fromUint8Array(t))}}]),e}();function gN(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=sn(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var kN=function(){function e(){an(this,e)}return un(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){QT(e=ET(e,VT));var n=BT(e),r=e._freezeSettings(),i=new XS;return qT(n,i,new QS(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){QT(e=ET(e,VT));var t=BT(e),n=e._freezeSettings(),r=new XS;return qT(t,r,new YS(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Oy(Dy.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Ly;return e._queue.enqueueAndForgetEvenWhileRestricted(a(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nx.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,nx.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(D_(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),bN=function(){function e(t,n,r){var i=this;an(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof vg||(this._appCompat=t)}return un(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Cy("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};NT(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return KT(this._delegate)}},{key:"disableNetwork",value:function(){return GT(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&wT("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Ly;return e.asyncQueue.enqueueAndForget(a(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=pS,n.next=3,pT(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(BT(e=ET(e,VT)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return uN(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Oy("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new ON(this,DT(this._delegate,e))}catch(rR){throw SN(rR,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new EN(this,OT(this._delegate,e))}catch(rR){throw SN(rR,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new RN(this,function(e,t){if(e=ET(e,CT),bT("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Oy(Dy.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new RT(e,null,function(e){return new wk(ng.emptyPath(),e)}(t))}(this._delegate,e))}catch(rR){throw SN(rR,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return fN(this._delegate,(function(n){return e(new xN(t,n))}))}},{key:"batch",value:function(){var e=this;return BT(this._delegate),new _N(new ZC(this._delegate,(function(t){return sN(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return WT(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return HT(this._delegate,e).then((function(e){return e?new RN(t,e):null}))}}]),e}(),wN=function(e){ln(n,e);var t=vn(n);function n(e){var r;return an(this,n),(r=t.call(this)).firestore=e,r}return un(n,[{key:"convertBytes",value:function(e){return new yN(new XT(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return EN.forKey(t,this.firestore,null)}}]),n}(XC);var xN=function(){function e(t,n){an(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new wN(t)}return un(e,[{key:"get",value:function(e){var t=this,n=LN(e);return this._delegate.get(n).then((function(e){return new NN(t._firestore,new NC(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=LN(e);return n?(pN("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=LN(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=LN(e);return this._delegate.delete(t),this}}]),e}(),_N=function(){function e(t){an(this,e),this._delegate=t}return un(e,[{key:"set",value:function(e,t,n){var r=LN(e);return n?(pN("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=LN(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=LN(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),IN=function(){function e(t,n,r){an(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return un(e,[{key:"fromFirestore",value:function(e,t){var n=new AC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new AN(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new wN(t),n),i.set(n,a)),a}}]),e}();IN.INSTANCES=new WeakMap;var EN=function(){function e(t,n){an(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new wN(t)}return un(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new ON(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new ON(this.firestore,DT(this._delegate,e))}catch(rR){throw SN(rR,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Gn(e))instanceof AT&&LT(this._delegate,e)}},{key:"set",value:function(e,t){t=pN("DocumentReference.set",t);try{return t?iN(this._delegate,e,t):iN(this._delegate,e)}catch(rR){throw SN(rR,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?aN(this._delegate,e):aN.apply(void 0,[this._delegate,e,t].concat(r))}catch(rR){throw SN(rR,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return sN(ET(e.firestore,VT),[new yb(e._key,nb.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=TN(n),a=CN(n,(function(t){return new NN(e.firestore,new NC(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return oN(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?nN(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ET(e,AT);var t=ET(e.firestore,VT);return yT(BT(t),e._key,{source:"server"}).then((function(n){return cN(t,e,n)}))}(this._delegate):function(e){e=ET(e,AT);var t=ET(e.firestore,VT);return yT(BT(t),e._key).then((function(n){return cN(t,e,n)}))}(this._delegate),t.then((function(e){return new NN(n.firestore,new NC(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(IN.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Oy("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new AT(n._delegate,r,new kg(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new AT(n._delegate,r,t))}}]),e}();function SN(e,t,n){return e.message=e.message.replace(t,n),e}function TN(e){var t,n=sn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!gN(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function CN(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=gN(e[0])?e[0]:gN(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var NN=function(){function e(t,n){an(this,e),this._firestore=t,this._delegate=n}return un(e,[{key:"ref",get:function(){return new EN(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return DC(this._delegate,e._delegate)}}]),e}(),AN=function(e){ln(n,e);var t=vn(n);function n(){return an(this,n),t.apply(this,arguments)}return un(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Ay()}(void 0!==t),t}}]),n}(NN),RN=function(){function e(t,n){an(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new wN(t)}return un(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,MC(this._delegate,function(e,t,n){var r=t,i=TC("where",e);return new FC(i,r,n)}(t,n,r)))}catch(rR){throw SN(rR,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,MC(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=TC("orderBy",e);return new UC(n,t)}(t,n)))}catch(rR){throw SN(rR,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,MC(this._delegate,function(e){return ST("limit",e),new jC("limit",e,"F")}(t)))}catch(rR){throw SN(rR,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,MC(this._delegate,function(e){return ST("limitToLast",e),new jC("limitToLast",e,"L")}(t)))}catch(rR){throw SN(rR,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,MC(this._delegate,BC.apply(void 0,arguments)))}catch(rR){throw SN(rR,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,MC(this._delegate,zC.apply(void 0,arguments)))}catch(rR){throw SN(rR,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,MC(this._delegate,KC.apply(void 0,arguments)))}catch(rR){throw SN(rR,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,MC(this._delegate,GC.apply(void 0,arguments)))}catch(rR){throw SN(rR,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return MT(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?rN(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ET(e,RT);var t=ET(e.firestore,VT),n=BT(t),r=new tN(t);return gT(n,e._query,{source:"server"}).then((function(n){return new RC(t,r,e,n)}))}(this._delegate):function(e){e=ET(e,RT);var t=ET(e.firestore,VT),n=BT(t),r=new tN(t);return OC(e._query),gT(n,e._query).then((function(n){return new RC(t,r,e,n)}))}(this._delegate),t.then((function(e){return new DN(n.firestore,new RC(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=TN(n),a=CN(n,(function(t){return new DN(e.firestore,new RC(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return oN(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(IN.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),PN=function(){function e(t,n){an(this,e),this._firestore=t,this._delegate=n}return un(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new AN(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),DN=function(){function e(t,n){an(this,e),this._firestore=t,this._delegate=n}return un(e,[{key:"query",get:function(){return new RN(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new AN(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new PN(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new AN(n._firestore,r))}))}},{key:"isEqual",value:function(e){return DC(this._delegate,e._delegate)}}]),e}(),ON=function(e){ln(n,e);var t=vn(n);function n(e,r){var i;return an(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return un(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new EN(this.firestore,e):null}},{key:"doc",value:function(e){try{return new EN(this.firestore,void 0===e?OT(this._delegate):OT(this._delegate,e))}catch(rR){throw SN(rR,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=ET(e.firestore,VT),r=OT(e),i=$C(e.converter,t);return sN(n,[oC(aC(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,nb.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new EN(t.firestore,e)}))}},{key:"isEqual",value:function(e){return LT(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(IN.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(RN);function LN(e){return ET(e,AT)}var MN=function(){function e(){an(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=mn(YT,n)}return un(e,[{key:"isEqual",value:function(e){return(e=Gn(e))instanceof YT&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(ig.keyField().canonicalString())}}]),e}(),FN=function(){function e(t){an(this,e),this._delegate=t}return un(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new cC("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new uC("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=hN.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=dN.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new hC("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),UN={Firestore:bN,GeoPoint:JT,Timestamp:Xy,Blob:yN,Transaction:xN,WriteBatch:_N,DocumentReference:EN,DocumentSnapshot:NN,Query:RN,QueryDocumentSnapshot:AN,QuerySnapshot:DN,CollectionReference:ON,FieldPath:MN,FieldValue:FN,setLogLevel:function(e){!function(e){Iy.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Zn("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},UN)))}(e,(function(e,t){return new bN(e,t,new kN)})),e.registerVersion("@firebase/firestore-compat","0.1.17")}(oi);var jN,VN=oi.initializeApp({apiKey:"AIzaSyCDSWz5o-Exx8iDrAXRaEpSfJB9hRlN7iM",authDomain:"barter-944e6.firebaseapp.com",projectId:"barter-944e6",storageBucket:"barter-944e6.appspot.com",messagingSenderId:"1084600070768",appId:"1:1084600070768:web:317f09c7afebaaa1be3ab5"}),BN=VN.auth(),zN=oi.firestore(),qN=VN.storage().ref(),KN=t.createContext();function GN(){return(0,t.useContext)(KN)}function WN(e){var n=e.children,r=l((0,t.useState)(),2),i=r[0],o=r[1],u=l((0,t.useState)(!0),2),s=u[0],c=u[1];function f(){return(f=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=zN.collection("items").where("uid","==",t),e.next=3,n.get().then((function(e){return e.docs.map((function(e){return v({id:e.id},e.data())}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=a(h().mark((function e(t,n,r,i){var a,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=zN.collection("items"),o=qN.child(r.name),u={},e.next=5,o.put(r).then((function(){console.log("Image added")})).catch((function(e){console.log("Image not added!",e)}));case 5:return e.next=7,o.getDownloadURL().then((function(e){return console.log("Url returned."),e})).catch((function(e){console.log("Url not returned.",e)}));case 7:return u.imgUrl=e.sent,console.log(u.imgUrl),e.next=12,a.add({uid:i,type:n,name:t,imgUrl:u.imgUrl,createdAt:(new Date).getTime()}).then((function(e){return e.id})).catch((function(e){console.log("Item not added!",e)}));case 12:return u.itemID=e.sent,e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=zN.collection("items").doc(t)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,n.get().then((function(e){e.ref.delete()})).catch((function(e){console.log("Could not delete item!",e)}));case 5:e.sent;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=a(h().mark((function e(t,n,r,i){var a,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=zN.collection("items").doc(i),!r){e.next=15;break}return o=qN.child(r.name),e.next=5,o.put(r).then((function(){console.log("Image added")})).catch((function(e){console.log("Image not added!",e)}));case 5:return e.next=7,o.getDownloadURL().then((function(e){return console.log("Url returned."),e})).catch((function(e){console.log("Url not returned.",e)}));case 7:return u=e.sent,e.next=11,a.update({name:t,type:n,imgUrl:u}).then((function(){console.log("Item updated with img!")})).catch((function(e){console.log("Item not updated with img!",e)}));case 11:return e.sent,e.abrupt("return",u);case 15:return e.next=17,a.update({name:t,type:n}).then((function(){console.log("Item updated!")})).catch((function(e){console.log("Item not updated!",e)}));case 17:return e.sent,e.abrupt("return","");case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return y=a(h().mark((function e(t){var n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=t.user.multiFactor.user.email,r=t.user.multiFactor.user.uid,i=zN.collection("users"),e.next=8,i.add({uid:r,email:n,createdAt:new Date}).then((function(){console.log("User added!")})).catch((function(e){console.log("User not added!",e)}));case 8:e.sent;case 9:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}(0,t.useEffect)((function(){var e=BN.onAuthStateChanged((function(e){o(e),c(!1)}));return e}),[]);var g={currentUser:i,loading:s,signup:function(e,t){return BN.createUserWithEmailAndPassword(e,t)},login:function(e,t){return BN.signInWithEmailAndPassword(e,t)},logout:function(){return BN.signOut()},createUserDocument:function(e){return y.apply(this,arguments)},getItemsByUID:function(e){return f.apply(this,arguments)},setItemByUID:function(e,t,n,r){return d.apply(this,arguments)},deleteItemByID:function(e){return p.apply(this,arguments)},editItemByID:function(e,t,n,r){return m.apply(this,arguments)}};return(0,b.jsx)(KN.Provider,{value:g,children:!s&&n})}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(jN||(jN={}));var HN=function(e){return e};var QN="beforeunload",YN="popstate";function XN(e){e.preventDefault(),e.returnValue=""}function $N(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function JN(){return Math.random().toString(36).substr(2,8)}function ZN(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function eA(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var tA=(0,t.createContext)(null);var nA=(0,t.createContext)(null);var rA=(0,t.createContext)({outlet:null,matches:[]});function iA(e,t){if(!e)throw new Error(t)}function aA(e,t,n){void 0===n&&(n="/");var r=dA(("string"===typeof t?eA(t):t).pathname||"/",n);if(null==r)return null;var i=oA(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=lA(i[o],r);return a}function oA(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||iA(!1),a.relativePath=a.relativePath.slice(r.length));var o=pA([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&iA(!1),oA(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:cA(o,e.index),routesMeta:u})})),t}var uA=/^:\w+$/,sA=function(e){return"*"===e};function cA(e,t){var n=e.split("/"),r=n.length;return n.some(sA)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!sA(e)})).reduce((function(e,t){return e+(uA.test(t)?3:""===t?1:10)}),r)}function lA(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=fA({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:pA([i,l.pathname]),pathnameBase:vA(pA([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=pA([i,l.pathnameBase]))}return a}function fA(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(c[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function hA(e,t,n){var r,i="string"===typeof e?eA(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?eA(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:mA(a),hash:yA(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function dA(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var pA=function(e){return e.join("/").replace(/\/\/+/g,"/")},vA=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},mA=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},yA=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function gA(e){kA()||iA(!1);var n=(0,t.useContext)(tA),r=n.basename,i=n.navigator,a=xA(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==r){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?eA(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?r+(f?"/":""):pA([r,u])}return i.createHref({pathname:c,search:s,hash:o})}function kA(){return null!=(0,t.useContext)(nA)}function bA(){return kA()||iA(!1),(0,t.useContext)(nA).location}function wA(){kA()||iA(!1);var e=(0,t.useContext)(tA),n=e.basename,r=e.navigator,i=(0,t.useContext)(rA).matches,a=bA().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,t.useRef)(!1);(0,t.useEffect)((function(){u.current=!0}));var s=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=hA(e,JSON.parse(o),a);"/"!==n&&(i.pathname=pA([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return s}function xA(e){var n=(0,t.useContext)(rA).matches,r=bA().pathname,i=JSON.stringify(n.map((function(e){return e.pathnameBase})));return(0,t.useMemo)((function(){return hA(e,JSON.parse(i),r)}),[e,i,r])}function _A(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(rA.Provider,{children:void 0!==i.route.element?i.route.element:r,value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function IA(e){iA(!1)}function EA(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?jN.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;kA()&&iA(!1);var h=vA(r),d=(0,t.useMemo)((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=eA(o));var p=o,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,k=p.hash,b=void 0===k?"":k,w=p.state,x=void 0===w?null:w,_=p.key,I=void 0===_?"default":_,E=(0,t.useMemo)((function(){var e=dA(m,h);return null==e?null:{pathname:e,search:g,hash:b,state:x,key:I}}),[h,m,g,b,x,I]);return null==E?null:(0,t.createElement)(tA.Provider,{value:d},(0,t.createElement)(nA.Provider,{children:a,value:{location:E,navigationType:s}}))}function SA(e){var n=e.children,r=e.location;return function(e,n){kA()||iA(!1);var r,i=(0,t.useContext)(rA).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,bA());if(n){var c,l="string"===typeof n?eA(n):n;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||iA(!1),r=l}else r=s;var f=r.pathname||"/",h=aA(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return _A(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:pA([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:pA([u,e.pathnameBase])})})),i)}(TA(n),r)}function TA(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==IA&&iA(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=TA(e.props.children)),n.push(r)}else n.push.apply(n,TA(e.props.children))})),n}function CA(){return CA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CA.apply(this,arguments)}function NA(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var AA=["onClick","reloadDocument","replace","state","target","to"];function RA(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function i(){var e=n.location,t=e.pathname,i=e.search,a=e.hash,o=r.state||{};return[o.idx,HN({pathname:t,search:i,hash:a,state:o.usr||null,key:o.key||"default"})]}var a=null;n.addEventListener(YN,(function(){if(a)f.call(a),a=null;else{var e=jN.Pop,t=i(),n=t[0],r=t[1];if(f.length){if(null!=n){var o=s-n;o&&(a={action:e,location:r,retry:function(){y(-1*o)}},y(o))}}else m(e)}}));var o=jN.Pop,u=i(),s=u[0],c=u[1],l=$N(),f=$N();function h(e){return"string"===typeof e?e:ZN(e)}function d(e,t){return void 0===t&&(t=null),HN(Y({pathname:c.pathname,hash:"",search:""},"string"===typeof e?eA(e):e,{state:t,key:JN()}))}function p(e,t){return[{usr:e.state,key:e.key,idx:t},h(e)]}function v(e,t,n){return!f.length||(f.call({action:e,location:t,retry:n}),!1)}function m(e){o=e;var t=i();s=t[0],c=t[1],l.call({action:o,location:c})}function y(e){r.go(e)}null==s&&(s=0,r.replaceState(Y({},r.state,{idx:s}),""));var g={get action(){return o},get location(){return c},createHref:h,push:function e(t,i){var a=jN.Push,o=d(t,i);if(v(a,o,(function(){e(t,i)}))){var u=p(o,s+1),c=u[0],l=u[1];try{r.pushState(c,"",l)}catch(f){n.location.assign(l)}m(a)}},replace:function e(t,n){var i=jN.Replace,a=d(t,n);if(v(i,a,(function(){e(t,n)}))){var o=p(a,s),u=o[0],c=o[1];r.replaceState(u,"",c),m(i)}},go:y,back:function(){y(-1)},forward:function(){y(1)},listen:function(e){return l.push(e)},block:function(e){var t=f.push(e);return 1===f.length&&n.addEventListener(QN,XN),function(){t(),f.length||n.removeEventListener(QN,XN)}}};return g}({window:i}));var o=a.current,u=l((0,t.useState)({action:o.action,location:o.location}),2),s=u[0],c=u[1];return(0,t.useLayoutEffect)((function(){return o.listen(c)}),[o]),(0,t.createElement)(EA,{basename:n,children:r,location:s.location,navigationType:s.action,navigator:o})}var PA=(0,t.forwardRef)((function(e,n){var r=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=NA(e,AA),f=gA(c),h=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=wA(),s=bA(),c=xA(e);return(0,t.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||ZN(s)===ZN(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,t.createElement)("a",CA({},l,{href:f,onClick:function(e){r&&r(e),e.defaultPrevented||i||h(e)},ref:n,target:s}))}));var DA=function(){var e=(0,t.useRef)(),n=(0,t.useRef)(),r=(0,t.useRef)(),i=GN(),o=i.signup,u=i.currentUser,s=i.createUserDocument,c=l((0,t.useState)(""),2),f=c[0],d=c[1],p=l((0,t.useState)(!1),2),v=p[0],m=p[1],y=wA();function g(){return(g=a(h().mark((function t(i){var a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.preventDefault(),n.current.value===r.current.value){t.next=3;break}return t.abrupt("return",d("Please provide the password confirmation."));case 3:return t.prev=3,d(""),m(!0),t.next=8,o(e.current.value,n.current.value);case 8:a=t.sent,s(a),y("/account"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),t.t0?d(t.t0.message.replace(/Firebase: /,"")):d("Could not sign in.");case 16:m(!1);case 17:case"end":return t.stop()}}),t,null,[[3,13]])})))).apply(this,arguments)}return(0,t.useEffect)((function(){u&&y("/account")}),[]),(0,b.jsxs)("div",{className:"login-container w-75 mx-auto",children:[(0,b.jsx)(Q,{children:(0,b.jsxs)(Q.Body,{children:[(0,b.jsx)("h2",{className:"text-center",children:"Sign Up"}),f&&(0,b.jsx)(ut,{variant:"danger",children:f}),(0,b.jsxs)(en,{onSubmit:function(e){return g.apply(this,arguments)},children:[(0,b.jsxs)(en.Group,{className:"mt-3",id:"email",children:[(0,b.jsx)(en.Label,{children:"Email"}),(0,b.jsx)(en.Control,{type:"email",ref:e,required:!0})]}),(0,b.jsxs)(en.Group,{className:"mt-3",id:"password",children:[(0,b.jsx)(en.Label,{children:"Password"}),(0,b.jsx)(en.Control,{type:"password",ref:n,required:!0})]}),(0,b.jsxs)(en.Group,{className:"mt-3",id:"password-confirm",children:[(0,b.jsx)(en.Label,{children:"Confirm password"}),(0,b.jsx)(en.Control,{type:"password",ref:r,required:!0})]}),(0,b.jsx)(rn,{disabled:v,className:"w-100 mt-4",type:"submit",children:"Sign Up"})]})]})}),(0,b.jsxs)("div",{className:"w-100 text-center mt-4",children:["Have an account? ",(0,b.jsx)(PA,{to:"/signin",children:"Log In"})]})]})};function OA(){return OA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OA.apply(this,arguments)}var LA="undefined"!==typeof window?t.useLayoutEffect:t.useEffect,MA={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},FA=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],UA=function(e,t,n,r,i){var a=i.offsetX,o=i.offsetY,u=r?8:0,s=n.split(" "),c=e.top+e.height/2,l=e.left+e.width/2,f=t.height,h=t.width,d=c-f/2,p=l-h/2,v="",m="0%",y="0%";switch(s[0]){case"top":d-=f/2+e.height/2+u,v="rotate(180deg)  translateX(50%)",m="100%",y="50%";break;case"bottom":d+=f/2+e.height/2+u,v="rotate(0deg) translateY(-100%) translateX(-50%)",y="50%";break;case"left":p-=h/2+e.width/2+u,v=" rotate(90deg)  translateY(50%) translateX(-25%)",y="100%",m="50%";break;case"right":p+=h/2+e.width/2+u,v="rotate(-90deg)  translateY(-150%) translateX(25%)",m="50%"}switch(s[1]){case"top":d=e.top,m=e.height/2+"px";break;case"bottom":d=e.top-f+e.height,m=f-e.height/2+"px";break;case"left":p=e.left,y=e.width/2+"px";break;case"right":p=e.left-h+e.width,y=h-e.width/2+"px"}return{top:d="top"===s[0]?d-o:d+o,left:p="left"===s[0]?p-a:p+a,transform:v,arrowLeft:y,arrowTop:m}},jA=function(e,t,n,r,i,a){var o=i.offsetX,u=i.offsetY,s={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},c=0,l=function(e){var t={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if("string"===typeof e){var n=document.querySelector(e);null!==n&&(t=n.getBoundingClientRect())}return t}(a),f=Array.isArray(n)?n:[n];for((a||Array.isArray(n))&&(f=[].concat(f,FA));c<f.length;){var h={top:(s=UA(e,t,f[c],r,{offsetX:o,offsetY:u})).top,left:s.left,width:t.width,height:t.height};if(!(h.top<=l.top||h.left<=l.left||h.top+h.height>=l.top+l.height||h.left+h.width>=l.left+l.width))break;c++}return s},VA=0,BA=(0,t.forwardRef)((function(e,n){var r=e.trigger,i=void 0===r?null:r,a=e.onOpen,o=void 0===a?function(){}:a,u=e.onClose,s=void 0===u?function(){}:u,c=e.defaultOpen,l=void 0!==c&&c,f=e.open,h=void 0===f?void 0:f,d=e.disabled,p=void 0!==d&&d,v=e.nested,m=void 0!==v&&v,y=e.closeOnDocumentClick,g=void 0===y||y,k=e.repositionOnResize,b=void 0===k||k,w=e.closeOnEscape,x=void 0===w||w,_=e.on,I=void 0===_?["click"]:_,E=e.contentStyle,S=void 0===E?{}:E,T=e.arrowStyle,C=void 0===T?{}:T,N=e.overlayStyle,A=void 0===N?{}:N,R=e.className,P=void 0===R?"":R,D=e.position,O=void 0===D?"bottom center":D,L=e.modal,M=void 0!==L&&L,F=e.lockScroll,U=void 0!==F&&F,j=e.arrow,V=void 0===j||j,B=e.offsetX,z=void 0===B?0:B,q=e.offsetY,K=void 0===q?0:q,G=e.mouseEnterDelay,W=void 0===G?100:G,H=e.mouseLeaveDelay,Q=void 0===H?100:H,Y=e.keepTooltipInside,X=void 0!==Y&&Y,$=e.children,J=(0,t.useState)(h||l),Z=J[0],ee=J[1],te=(0,t.useRef)(null),ne=(0,t.useRef)(null),re=(0,t.useRef)(null),ie=(0,t.useRef)(null),ae=(0,t.useRef)("popup-"+ ++VA),oe=!!M||!i,ue=(0,t.useRef)(0);LA((function(){return Z?(ie.current=document.activeElement,be(),ye(),ve()):me(),function(){clearTimeout(ue.current)}}),[Z]),(0,t.useEffect)((function(){"boolean"===typeof h&&(h?se():ce())}),[h,p]);var se=function(e){Z||p||(ee(!0),setTimeout((function(){return o(e)}),0))},ce=function(e){var t;Z&&!p&&(ee(!1),oe&&(null===(t=ie.current)||void 0===t||t.focus()),setTimeout((function(){return s(e)}),0))},le=function(e){null===e||void 0===e||e.stopPropagation(),Z?ce(e):se(e)},fe=function(e){clearTimeout(ue.current),ue.current=setTimeout((function(){return se(e)}),W)},de=function(e){null===e||void 0===e||e.preventDefault(),le()},pe=function(e){clearTimeout(ue.current),ue.current=setTimeout((function(){return ce(e)}),Q)},ve=function(){oe&&U&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},me=function(){oe&&U&&(document.getElementsByTagName("body")[0].style.overflow="auto")},ye=function(){var e,t=null===ne||void 0===ne||null===(e=ne.current)||void 0===e?void 0:e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),n=Array.prototype.slice.call(t)[0];null===n||void 0===n||n.focus()};(0,t.useImperativeHandle)(n,(function(){return{open:function(){se()},close:function(){ce()},toggle:function(){le()}}}));var ge,ke,be=function(){if(!oe&&Z&&(null===te||void 0===te?void 0:te.current)&&(null===te||void 0===te?void 0:te.current)&&(null===ne||void 0===ne?void 0:ne.current)){var e,t,n=te.current.getBoundingClientRect(),r=ne.current.getBoundingClientRect(),i=jA(n,r,O,V,{offsetX:z,offsetY:K},X);if(ne.current.style.top=i.top+window.scrollY+"px",ne.current.style.left=i.left+window.scrollX+"px",V&&re.current)re.current.style.transform=i.transform,re.current.style.setProperty("-ms-transform",i.transform),re.current.style.setProperty("-webkit-transform",i.transform),re.current.style.top=(null===(e=C.top)||void 0===e?void 0:e.toString())||i.arrowTop,re.current.style.left=(null===(t=C.left)||void 0===t?void 0:t.toString())||i.arrowLeft}};ge=ce,void 0===(ke=x)&&(ke=!0),(0,t.useEffect)((function(){if(ke){var e=function(e){"Escape"===e.key&&ge(e)};return document.addEventListener("keyup",e),function(){ke&&document.removeEventListener("keyup",e)}}}),[ge,ke]),function(e,n){void 0===n&&(n=!0),(0,t.useEffect)((function(){if(n){var t=function(t){if(9===t.keyCode){var n,r=null===e||void 0===e||null===(n=e.current)||void 0===n?void 0:n.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),i=Array.prototype.slice.call(r);if(1===i.length)return void t.preventDefault();var a=i[0],o=i[i.length-1];t.shiftKey&&document.activeElement===a?(t.preventDefault(),o.focus()):document.activeElement===o&&(t.preventDefault(),a.focus())}};return document.addEventListener("keydown",t),function(){n&&document.removeEventListener("keydown",t)}}}),[e,n])}(ne,Z&&oe),function(e,n){void 0===n&&(n=!0),(0,t.useEffect)((function(){if(n){var t=function(){e()};return window.addEventListener("resize",t),function(){n&&window.removeEventListener("resize",t)}}}),[e,n])}(be,b),function(e,n,r){void 0===r&&(r=!0),(0,t.useEffect)((function(){if(r){var t=function(t){var r=Array.isArray(e)?e:[e],i=!1;r.forEach((function(e){e.current&&!e.current.contains(t.target)||(i=!0)})),t.stopPropagation(),i||n(t)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),function(){r&&(document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t))}}}),[e,n,r])}(i?[ne,te]:[ne],ce,g&&!m);var we=function(){return t.createElement("div",Object.assign({},function(){var e=oe?MA.popupContent.modal:MA.popupContent.tooltip,t={className:"popup-content "+(""!==P?P.split(" ").map((function(e){return e+"-content"})).join(" "):""),style:OA({},e,S,{pointerEvents:"auto"}),ref:ne,onClick:function(e){e.stopPropagation()}};return!M&&I.indexOf("hover")>=0&&(t.onMouseEnter=fe,t.onMouseLeave=pe),t}(),{key:"C",role:oe?"dialog":"tooltip",id:ae.current}),V&&!oe&&t.createElement("div",{ref:re,style:MA.popupArrow},t.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(""!==P?P.split(" ").map((function(e){return e+"-arrow"})).join(" "):""),viewBox:"0 0 32 16",style:OA({position:"absolute"},C)},t.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),$&&"function"===typeof $?$(ce,Z):$)},xe=!(I.indexOf("hover")>=0),_e=oe?MA.overlay.modal:MA.overlay.tooltip,Ie=[xe&&t.createElement("div",{key:"O","data-testid":"overlay","data-popup":oe?"modal":"tooltip",className:"popup-overlay "+(""!==P?P.split(" ").map((function(e){return e+"-overlay"})).join(" "):""),style:OA({},_e,A,{pointerEvents:g&&m||oe?"auto":"none"}),onClick:g&&m?ce:void 0,tabIndex:-1},oe&&we()),!oe&&we()];return t.createElement(t.Fragment,null,function(){for(var e={key:"T",ref:te,"aria-describedby":ae.current},n=Array.isArray(I)?I:[I],r=0,a=n.length;r<a;r++)switch(n[r]){case"click":e.onClick=le;break;case"right-click":e.onContextMenu=de;break;case"hover":e.onMouseEnter=fe,e.onMouseLeave=pe;break;case"focus":e.onFocus=fe,e.onBlur=pe}if("function"===typeof i){var o=i(Z);return!!i&&t.cloneElement(o,e)}return!!i&&t.cloneElement(i,e)}(),Z&&he.createPortal(Ie,function(){var e=document.getElementById("popup-root");return null===e&&((e=document.createElement("div")).setAttribute("id","popup-root"),document.body.appendChild(e)),e}()))})),zA=BA;function qA(){return(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-pencil",viewBox:"0 0 16 16",children:(0,b.jsx)("path",{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"})})}function KA(){return(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-file-x",viewBox:"0 0 16 16",children:[(0,b.jsx)("path",{d:"M6.146 6.146a.5.5 0 0 1 .708 0L8 7.293l1.146-1.147a.5.5 0 1 1 .708.708L8.707 8l1.147 1.146a.5.5 0 0 1-.708.708L8 8.707 6.854 9.854a.5.5 0 0 1-.708-.708L7.293 8 6.146 6.854a.5.5 0 0 1 0-.708z"}),(0,b.jsx)("path",{d:"M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z"})]})}function GA(e){var n=l((0,t.useState)(""),2),r=n[0],i=n[1],o=l((0,t.useState)([]),2),u=o[0],s=o[1],c=(0,t.useRef)(),f=(0,t.useRef)(),d=(0,t.useRef)(),p=GN(),m=p.getItemsByUID,y=p.setItemByUID,g=p.deleteItemByID,k=p.editItemByID,w=null;function x(){return(x=a(h().mark((function t(n){var r,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),c&&f&&c.current&&f.current&&w){t.next=4;break}return i("Could not add item."),t.abrupt("return");case 4:return console.log(w),r=c.current.value,a=f.current.value,t.prev=7,i(""),t.next=11,y(r,a,w,e.currentUser.uid).then((function(e){s((function(t){return[{name:r,type:a,id:e.itemID,imgUrl:e.imgUrl}].concat(Jn(t))})),console.log(u)}));case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(7),t.t0?i(t.t0.message.replace(/Firebase: /,"")):i("Could not add item.");case 16:w=null;case 17:case"end":return t.stop()}}),t,null,[[7,13]])})))).apply(this,arguments)}function _(){return _=a(h().mark((function e(t,n){var r,a,o,l,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=c.current.value,a=f.current.value,o="",c&&f&&c.current&&f.current){e.next=7;break}return i("Could not edit item."),e.abrupt("return");case 7:return e.prev=7,i(""),e.next=11,k(r,a,w,n);case 11:o=e.sent,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),e.t0?i(e.t0.message.replace(/Firebase: /,"")):i("Could not edit item.");case 17:o?(l=u.map((function(e){return e.id==n?v(v({},e),{},{name:r,type:a,imgUrl:o}):e})),s(l)):(d=u.map((function(e){return e.id==n?v(v({},e),{},{name:r,type:a}):e})),s(d));case 18:case"end":return e.stop()}}),e,null,[[7,14]])}))),_.apply(this,arguments)}function I(){return I=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,i(""),e.next=5,g(n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i("Could not delete item.");case 10:(r=Jn(u)).splice(r.findIndex((function(e){return e.id==n})),1),s(r);case 13:case"end":return e.stop()}}),e,null,[[1,7]])}))),I.apply(this,arguments)}function E(e){w=e.target.files[0]}return(0,t.useEffect)((function(){function t(){return t=a(h().mark((function t(){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(e.currentUser.uid);case 2:(n=t.sent).sort((function(e,t){return t.createdAt>e.createdAt?1:e.createdAt>t.createdAt?-1:0})),s(n);case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),(0,b.jsxs)("div",{className:"item-container mt-4",children:[(0,b.jsx)("h2",{children:"Your Items:"}),(0,b.jsx)(zA,{trigger:(0,b.jsx)("div",{className:"add-item btn btn-primary mt-1 mb-3",children:"Add Items"}),position:"center center",children:function(e){return(0,b.jsx)("div",{children:(0,b.jsx)(Q,{className:"item-card",children:(0,b.jsxs)(Q.Body,{children:[(0,b.jsxs)("div",{className:"item-header",children:[(0,b.jsx)("h2",{className:"info",children:"Item Info"}),(0,b.jsx)("h2",{className:"close x-btn ",onClick:e,children:"x"})]}),(0,b.jsxs)(en,{onSubmit:function(t){e(),function(e){x.apply(this,arguments)}(t)},children:[(0,b.jsxs)(en.Group,{className:"mt-3",id:"name",children:[(0,b.jsx)(en.Label,{children:"Name"}),(0,b.jsx)(en.Control,{type:"name",ref:c,required:!0})]}),(0,b.jsxs)(en.Group,{className:"mt-3",id:"type",children:[(0,b.jsx)(en.Label,{children:"Type"}),(0,b.jsx)(en.Control,{type:"type",ref:f,required:!0})]}),(0,b.jsxs)(en.Group,{className:"mt-3",id:"img",children:[(0,b.jsx)(en.Label,{children:"Image"}),(0,b.jsx)(en.Control,{type:"file",onChange:E,ref:d,accept:"image/*",required:!0})]}),(0,b.jsx)(rn,{className:"close w-100 mt-4",type:"submit",children:"Add Item"})]})]})})})}}),r&&(0,b.jsx)(ut,{variant:"danger",children:r}),u&&u.length?(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"items-table",children:[(0,b.jsxs)("div",{className:"row item-col mb-2",children:[(0,b.jsx)("div",{className:"item-name item-element",children:"Item:"}),(0,b.jsx)("div",{className:"item-price item-element",children:"Type:"})]}),u.map((function(e,t){return(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"item-img",children:(0,b.jsx)("img",{src:e.imgUrl})}),(0,b.jsxs)("div",{className:"row item-col",id:e.id,children:[(0,b.jsx)("div",{className:"item-name item-element",children:e.name}),(0,b.jsx)("div",{className:"item-price item-element",children:e.type}),(0,b.jsx)(zA,{trigger:(0,b.jsx)("div",{className:"edit-item",children:(0,b.jsx)(qA,{})}),position:"center center",children:function(t){return(0,b.jsx)("div",{children:(0,b.jsx)(Q,{className:"item-card",children:(0,b.jsxs)(Q.Body,{children:[(0,b.jsxs)("div",{className:"item-header",children:[(0,b.jsx)("h2",{className:"info",children:"Edit item"}),(0,b.jsx)("h2",{className:"close x-btn ",onClick:t,children:"x"})]}),(0,b.jsxs)(en,{onSubmit:function(n){t(),function(e,t){_.apply(this,arguments)}(n,e.id)},children:[(0,b.jsxs)(en.Group,{className:"mt-3",id:"name",children:[(0,b.jsx)(en.Label,{children:"Name"}),(0,b.jsx)(en.Control,{type:"name",ref:c,defaultValue:e.name,required:!0})]}),(0,b.jsxs)(en.Group,{className:"mt-3",id:"type",children:[(0,b.jsx)(en.Label,{children:"Type"}),(0,b.jsx)(en.Control,{type:"type",ref:f,defaultValue:e.type,required:!0})]}),(0,b.jsxs)(en.Group,{className:"mt-3",id:"img",children:[(0,b.jsx)(en.Label,{children:"Image"}),(0,b.jsx)(en.Control,{type:"file",onChange:E,ref:d,accept:"image/*"})]}),(0,b.jsx)(rn,{className:"close w-100 mt-4",type:"submit",children:"Save"})]})]})})})}}),(0,b.jsx)(zA,{trigger:(0,b.jsx)("h3",{className:"item-delete",children:(0,b.jsx)(KA,{})}),position:"center center",children:function(t){return(0,b.jsx)("div",{children:(0,b.jsx)(Q,{className:"item-card",children:(0,b.jsxs)(Q.Body,{children:[(0,b.jsxs)("div",{className:"item-header",children:[(0,b.jsx)("h2",{className:"info",children:"Delete an item?"}),(0,b.jsx)("h2",{className:"close x-btn ",onClick:t,children:"x"})]}),(0,b.jsx)(en,{children:(0,b.jsxs)("div",{className:"row item-col",children:[(0,b.jsx)(rn,{className:"remove-col w-40 mt-4 col-sm-6",onClick:function(n){t(),function(e,t){I.apply(this,arguments)}(n,e.id)},type:"submit",children:"Delete"}),(0,b.jsx)(rn,{className:"remove-col w-40 mt-4 col-sm-6",onClick:function(e){t()},type:"submit",children:"Cancel"})]})})]})})})}})]})]},t)}))]})}):(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{className:"mb-3",children:"You do not have any items, please add some."})})]})}function WA(){var e=l((0,t.useState)(""),2),n=e[0],r=e[1],i=GN(),o=i.currentUser,u=i.logout,s=(i.setItemsByUID,wA());function c(){return(c=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(""),e.prev=1,e.next=4,u();case 4:s("/signin"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r("Could not log out.");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return(0,t.useEffect)((function(){!o&&s("/signin")}),[]),(0,b.jsx)("div",{className:"account-container w-75 mx-auto",children:(0,b.jsx)(Q,{children:(0,b.jsxs)(Q.Body,{children:[(0,b.jsx)("h2",{className:"text-center",children:"Account"}),n&&(0,b.jsx)(ut,{variant:"danger",children:n}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsxs)("div",{className:"mt-1 col-sm-6 email-col",children:["Email: ",o&&o.email]}),(0,b.jsx)("div",{className:"col-sm-6 log-out",children:(0,b.jsx)(rn,{variant:"link",onClick:function(){return c.apply(this,arguments)},children:"Log Out"})})]}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsxs)("div",{className:"col-sm-6 links-col",children:[(0,b.jsx)(PA,{to:"/profile-preferences",className:"btn btn-primary w-75 mt-5",children:"Profile"}),(0,b.jsx)(PA,{to:"/address",className:"btn btn-primary w-75 mt-2",children:"My Address"}),(0,b.jsx)(PA,{to:"/rented-items",className:"btn btn-primary w-75 mt-2",children:"Rented Items"})]}),(0,b.jsx)("div",{className:"col-sm-6 right-col mb-1",children:(0,b.jsx)(GA,{currentUser:o})})]})]})})})}var HA=function(){var e=(0,t.useRef)(),n=(0,t.useRef)(),r=GN(),i=r.login,o=r.currentUser,u=l((0,t.useState)(""),2),s=u[0],c=u[1],f=l((0,t.useState)(!1),2),d=f[0],p=f[1],v=wA();function m(){return(m=a(h().mark((function t(r){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.prev=1,c(""),p(!0),t.next=6,i(e.current.value,n.current.value);case 6:v("/account"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),t.t0?c(t.t0.message.replace(/Firebase: /,"")):c("Could not sign in.");case 12:p(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}return(0,t.useEffect)((function(){o&&v("/account")}),[]),(0,b.jsxs)("div",{className:"login-container w-75 mx-auto",children:[(0,b.jsx)(Q,{children:(0,b.jsxs)(Q.Body,{children:[(0,b.jsx)("h2",{className:"text-center",children:"Log In"}),s&&(0,b.jsx)(ut,{variant:"danger",children:s}),(0,b.jsxs)(en,{onSubmit:function(e){return m.apply(this,arguments)},children:[(0,b.jsxs)(en.Group,{className:"mt-3",id:"email",children:[(0,b.jsx)(en.Label,{children:"Email"}),(0,b.jsx)(en.Control,{type:"email",ref:e,required:!0})]}),(0,b.jsxs)(en.Group,{className:"mt-3",id:"password",children:[(0,b.jsx)(en.Label,{children:"Password"}),(0,b.jsx)(en.Control,{type:"password",ref:n,required:!0})]}),(0,b.jsx)(rn,{disabled:d,className:"w-100 mt-4",type:"submit",children:"Log In"})]})]})}),(0,b.jsxs)("div",{className:"w-100 text-center mt-4",children:["Don't have an account? ",(0,b.jsx)(PA,{to:"/signup",children:"Sign Up"})]})]})};var QA=function(){var e=GN().currentUser;return(0,b.jsxs)("div",{className:"gnav-container",children:[(0,b.jsxs)(en,{className:"d-flex search-form",children:[(0,b.jsx)(It,{type:"search",placeholder:"Search",className:"me-2","aria-label":"Search"}),(0,b.jsx)(rn,{children:"Search"})]}),e?(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(PA,{to:"/account",variant:"link",className:"sign-in",children:"Account"})}):(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(PA,{to:"/signin",variant:"link",className:"sign-in",children:"Sign In"})})]})};function YA(){return(0,b.jsx)("div",{children:(0,b.jsx)(DA,{})})}function XA(){return(0,b.jsx)("div",{children:(0,b.jsx)(HA,{})})}function $A(){return(0,b.jsx)("div",{children:(0,b.jsx)(WA,{})})}function JA(){return(0,b.jsx)("div",{children:(0,b.jsx)(WA,{})})}function ZA(){return(0,b.jsx)("div",{children:(0,b.jsx)(WA,{})})}function eR(){return(0,b.jsx)("div",{children:(0,b.jsx)(WA,{})})}function tR(){return(0,b.jsx)("div",{children:(0,b.jsx)(QA,{})})}var nR=function(){return(0,b.jsx)("div",{className:"routes",children:(0,b.jsx)(RA,{children:(0,b.jsx)(WN,{children:(0,b.jsxs)(SA,{children:[(0,b.jsx)(IA,{path:"/",element:(0,b.jsx)(tR,{})}),(0,b.jsx)(IA,{path:"/signup",element:(0,b.jsx)(YA,{})}),(0,b.jsx)(IA,{path:"/account",element:(0,b.jsx)($A,{})}),(0,b.jsx)(IA,{path:"/signin",element:(0,b.jsx)(XA,{})}),(0,b.jsx)(IA,{path:"/address",element:(0,b.jsx)(JA,{})}),(0,b.jsx)(IA,{path:"/rented-items",element:(0,b.jsx)(ZA,{})}),(0,b.jsx)(IA,{path:"/profile-preferences",element:(0,b.jsx)(eR,{})})]})})})})};r.createRoot(document.getElementById("root")).render((0,b.jsx)(t.StrictMode,{children:(0,b.jsx)(nR,{})}))}()}();
//# sourceMappingURL=main.f6e8891e.js.map